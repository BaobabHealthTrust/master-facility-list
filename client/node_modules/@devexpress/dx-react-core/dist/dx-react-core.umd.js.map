{"version":3,"file":"dx-react-core.umd.js","sources":["../src/plugin-based/contexts.ts","../src/plugin-based/plugin-indexer.tsx","../src/plugin-based/constants.ts","../src/utils/with-props-from-context.tsx","../src/plugin-based/plugin.tsx","../src/plugin-based/template-placeholder.tsx","../src/plugin-based/plugin-host.tsx","../src/plugin-based/helpers.ts","../src/plugin-based/action.tsx","../src/plugin-based/getter.tsx","../src/plugin-based/template.tsx","../src/plugin-based/template-connector.tsx","../src/draggable/touch-strategy.ts","../src/draggable/gesture-cover.ts","../src/draggable/mouse-strategy.ts","../src/draggable/shared-events.ts","../src/draggable/selection-utils.ts","../src/draggable.tsx","../src/drag-drop/context.ts","../src/drag-drop/provider.tsx","../src/drag-drop/source.tsx","../src/drag-drop/target.tsx","../src/ref-holder.tsx","../src/sizer.tsx","../src/utils/connect-props.tsx","../src/utils/state-helper.ts","../src/utils/with-components.tsx","../src/utils/ref-type.ts"],"sourcesContent":["import * as React from 'react';\nimport { PluginHost, PluginPositionFn } from '@devexpress/dx-core';\n\n/** @internal */\nexport interface TemplateHostInterface {\n  params(...args): any;\n  templates(...args): any;\n}\n\n/** @internal */\nexport const PluginHostContext = React.createContext<PluginHost | null>(null);\n/** @internal */\nexport const PositionContext = React.createContext<PluginPositionFn>(() => []);\n/** @internal */\nexport const TemplateHostContext = React.createContext<TemplateHostInterface | null>(null);\n","import * as React from 'react';\nimport { PluginPositionFn } from '@devexpress/dx-core';\nimport { PositionContext } from './contexts';\n\ntype MemoizedPluginPositionFn =\n  (index: number, positionContext: PluginPositionFn) => PluginPositionFn;\n\ntype PluginIndexerProps = {\n  children: React.ReactNode;\n};\n\n/** @internal */\nexport class PluginIndexer extends React.PureComponent<PluginIndexerProps> {\n  indexes: { [index: number]: PluginPositionFn } = {};\n  memoize: MemoizedPluginPositionFn = (index, positionContext) => {\n    if (this.indexes[index]) return this.indexes[index];\n\n    const fn: PluginPositionFn = () => {\n      const calculatedPosition = positionContext();\n      return [...calculatedPosition, index];\n    };\n    this.indexes[index] = fn;\n\n    return fn;\n  }\n  render() {\n    const { children } = this.props;\n    return (\n      <PositionContext.Consumer>\n        {positionContext => (\n          React.Children.map(children, (child: any, index: number) => {\n            if (!child || !child.type) return child;\n            const childPosition = this.memoize(index, positionContext);\n\n            return (\n              <PositionContext.Provider key={String(index)} value={childPosition}>\n                {child}\n              </PositionContext.Provider>\n            );\n          })\n        )}\n      </PositionContext.Consumer>\n    );\n  }\n}\n","/** @internal */\nexport const PLUGIN_HOST_CONTEXT = 'dxcore_pluginHost_context';\n/** @internal */\nexport const POSITION_CONTEXT = 'dxcore_position_context';\n/** @internal */\nexport const TEMPLATE_HOST_CONTEXT = 'dxcore_templateHost_context';\n\n/** @internal */\nexport const RERENDER_TEMPLATE_EVENT = Symbol('rerenderTemplate');\n/** @internal */\nexport const RERENDER_TEMPLATE_SCOPE_EVENT = Symbol('rerenderTemplateScope');\n/** @internal */\nexport const UPDATE_CONNECTION_EVENT = Symbol('updateConnection');\n","import * as React from 'react';\nimport { PluginHostContext, PositionContext } from '../plugin-based/contexts';\nimport { PLUGIN_HOST_CONTEXT, POSITION_CONTEXT } from '../plugin-based/constants';\n\n/** @internal */\nexport const withContext = (Context, name) => Component => props => (\n  <Context.Consumer>\n    {context => (\n      <Component {...props} {...{ [name]: context }} />\n    )}\n  </Context.Consumer>\n);\n\n/** @internal */\nexport const withHostAndPosition = Component => withContext(\n  PluginHostContext,\n  PLUGIN_HOST_CONTEXT,\n)(withContext(PositionContext, POSITION_CONTEXT)(Component));\n","import * as React from 'react';\nimport { InnerPlugin } from '@devexpress/dx-core';\nimport { PluginIndexer } from './plugin-indexer';\nimport { PLUGIN_HOST_CONTEXT, POSITION_CONTEXT } from './constants';\nimport { withHostAndPosition } from '../utils/with-props-from-context';\nimport { PluginContextProps } from './plugin-context-prop-types';\nimport { IDependency } from '../types';\n\nexport interface PluginProps {\n  /** React elements that expose the plugin's state and actions and render the plugin's UI. */\n  children: React.ReactNode;\n  name?: string;\n  dependencies?: IDependency[];\n}\n\n/** @internal */\nexport class PluginBase extends React.PureComponent<PluginProps & PluginContextProps> {\n  plugin!: InnerPlugin;\n\n  componentDidMount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost, [POSITION_CONTEXT]: position } = this.props;\n    const { name, dependencies } = this.props;\n    this.plugin = {\n      position,\n      name,\n      dependencies,\n      container: true,\n    };\n    pluginHost.registerPlugin(this.plugin);\n  }\n\n  componentDidUpdate() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n    pluginHost.ensureDependencies();\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n    pluginHost.unregisterPlugin(this.plugin);\n  }\n\n  render() {\n    const { children } = this.props;\n    return (\n      <PluginIndexer>\n        {children}\n      </PluginIndexer>\n    );\n  }\n}\n\nexport const Plugin: React.ComponentType<PluginProps> = withHostAndPosition(PluginBase);\n","import * as React from 'react';\nimport { shallowEqual } from '@devexpress/dx-core';\nimport {\n  PLUGIN_HOST_CONTEXT, RERENDER_TEMPLATE_EVENT,\n  TEMPLATE_HOST_CONTEXT, RERENDER_TEMPLATE_SCOPE_EVENT,\n} from './constants';\nimport { withContext } from '../utils/with-props-from-context';\nimport { PluginHostContext, TemplateHostContext, TemplateHostInterface } from './contexts';\nimport { PluginContextProps } from './plugin-context-prop-types';\nimport { TemplateBase } from './template';\n\nexport interface TemplatePlaceholderProps {\n  /** The name of a template to be rendered. */\n  name?: string;\n  /** An object passed to the related template. */\n  params?: object;\n  children?: (content) => any;\n}\ninterface TemplateHostContextProps {\n  [TEMPLATE_HOST_CONTEXT: string]: TemplateHostInterface;\n}\n\ntype Props = TemplatePlaceholderProps & PluginContextProps & TemplateHostContextProps;\n\nconst getRenderingData = (props: Props): { params?: object, templates: TemplateBase[] } => {\n  const { name, params } = props;\n  if (name) {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = props;\n    return {\n      params,\n      templates: pluginHost.collect(`${name}Template`)\n        .filter(template => template.predicate(params))\n        .reverse(),\n    };\n  }\n  const { [TEMPLATE_HOST_CONTEXT]: templateHost } = props;\n  return {\n    params: params || templateHost.params(),\n    templates: templateHost.templates(),\n  };\n};\n\nclass TemplatePlaceholderBase extends React.Component<Props> {\n  subscription = {\n    [RERENDER_TEMPLATE_EVENT]: (id: number) => {\n      if (this.template && this.template.id === id) {\n        this.forceUpdate();\n      }\n    },\n    [RERENDER_TEMPLATE_SCOPE_EVENT]: (name: string) => {\n      const { name: propsName } = this.props;\n      if (propsName === name) {\n        this.forceUpdate();\n      }\n    },\n  };\n  template: TemplateBase | null = null;\n  params?: object = {};\n\n  componentDidMount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n    pluginHost.registerSubscription(this.subscription);\n  }\n\n  shouldComponentUpdate(nextProps: Props) {\n    const { params, templates } = getRenderingData(nextProps);\n    const { children } = this.props;\n    const [template] = templates;\n    return children !== nextProps.children || this.template !== template\n      || !shallowEqual(this.params, params);\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n    pluginHost.unregisterSubscription(this.subscription);\n  }\n\n  render() {\n    const { params, templates } = getRenderingData(this.props);\n\n    this.params = params;\n    [this.template] = templates;\n    const restTemplates = templates.slice(1);\n\n    let content: ((...args) => any) | null = null;\n    if (this.template) {\n      const { children: templateContent } = this.template;\n\n      content = templateContent() || null;\n      if (content && typeof content === 'function') {\n        content = content(params);\n      }\n    }\n\n    const { children: templatePlaceholder } = this.props;\n    return (\n      <TemplateHostContext.Provider\n        value={{\n          templates: () => restTemplates,\n          params: () => this.params,\n        }}\n      >\n        {templatePlaceholder ? templatePlaceholder(content) : content}\n      </TemplateHostContext.Provider>\n    );\n  }\n}\n\n/** A React component to which a related Template is rendered. */\nexport const TemplatePlaceholder: React.ComponentType<TemplatePlaceholderProps> = withContext(\n  PluginHostContext, PLUGIN_HOST_CONTEXT,\n)(\n  withContext(TemplateHostContext, TEMPLATE_HOST_CONTEXT)(TemplatePlaceholderBase),\n);\n","import * as React from 'react';\nimport { PluginHost as PluginHostCore } from '@devexpress/dx-core';\nimport { PluginIndexer } from './plugin-indexer';\nimport { TemplatePlaceholder } from './template-placeholder';\nimport { PluginHostContext } from './contexts';\n\nexport interface PluginHostProps {\n  /** Plugin React elements. */\n  children: React.ReactNode;\n}\n\n/** @internal */\nclass PluginHostBase extends React.PureComponent<PluginHostProps> {\n  host: PluginHostCore;\n\n  constructor(props: PluginHostProps) {\n    super(props);\n\n    this.host = new PluginHostCore();\n  }\n\n  render() {\n    const { children } = this.props;\n\n    return (\n      <PluginHostContext.Provider value={this.host}>\n        <PluginIndexer>\n          {children}\n        </PluginIndexer>\n        <TemplatePlaceholder name=\"root\" />\n      </PluginHostContext.Provider>\n    );\n  }\n}\n\nexport const PluginHost: React.ComponentType<PluginHostProps> = PluginHostBase;\n","import { shallowEqual } from '@devexpress/dx-core';\n\n/** @internal */\nexport const getAvailableGetters = (\n  pluginHost,\n  getGetterValue = getterName => pluginHost.get(`${getterName}Getter`),\n) => {\n  const trackedDependencies = {};\n\n  let getters;\n  if (typeof Proxy !== 'undefined') {\n    getters = new Proxy({}, {\n      get(target, prop) {\n        if (typeof prop !== 'string') return undefined;\n        const result = getGetterValue(prop);\n        trackedDependencies[prop] = result;\n        return result;\n      },\n      getOwnPropertyDescriptor(target, prop) {\n        return {\n          configurable: true,\n          enumerable: true,\n          value: this.get!(target as any, prop, undefined),\n        };\n      },\n      ownKeys() {\n        return pluginHost.knownKeys('Getter');\n      },\n    });\n  } else {\n    getters = pluginHost.knownKeys('Getter')\n      .reduce((acc, getterName) => {\n        Object.defineProperty(acc, getterName, {\n          get: () => {\n            const result = getGetterValue(getterName);\n            trackedDependencies[getterName] = result;\n            return result;\n          },\n        });\n        return acc;\n      }, {});\n  }\n\n  return { getters, trackedDependencies };\n};\n\n/** @internal */\nexport const isTrackedDependenciesChanged = (\n  pluginHost,\n  prevTrackedDependencies,\n  getGetterValue = getterName => pluginHost.get(`${getterName}Getter`),\n) => {\n  const trackedDependencies = Object.keys(prevTrackedDependencies)\n    // tslint:disable-next-line: prefer-object-spread\n    .reduce((acc, getterName) => Object.assign(acc, {\n      [getterName]: getGetterValue(getterName),\n    }), {});\n\n  return !shallowEqual(prevTrackedDependencies, trackedDependencies);\n};\n\n/** @internal */\nexport const getAvailableActions = (\n  pluginHost,\n  getAction = actionName => pluginHost.collect(`${actionName}Action`).slice().reverse()[0],\n) => {\n  let actions;\n  if (typeof Proxy !== 'undefined') {\n    actions = new Proxy({}, {\n      get(target, prop) {\n        if (typeof prop !== 'string') return undefined;\n        return getAction(prop);\n      },\n      getOwnPropertyDescriptor(target, prop) {\n        return {\n          configurable: true,\n          enumerable: true,\n          value: this.get!(target as any, prop, undefined),\n        };\n      },\n      ownKeys() {\n        return pluginHost.knownKeys('Action');\n      },\n    });\n  } else {\n    actions = pluginHost.knownKeys('Action')\n      .reduce((acc, actionName) => {\n        Object.defineProperty(acc, actionName, {\n          get: () => getAction(actionName),\n        });\n        return acc;\n      }, {});\n  }\n  return actions;\n};\n","import * as React from 'react';\nimport { InnerPlugin } from '@devexpress/dx-core';\nimport {\n  getAvailableGetters,\n  getAvailableActions,\n} from './helpers';\nimport { PLUGIN_HOST_CONTEXT, POSITION_CONTEXT } from './constants';\nimport { withHostAndPosition } from '../utils/with-props-from-context';\nimport { PluginContextProps } from './plugin-context-prop-types';\nimport { Actions, Getters } from './getter';\n\nexport interface ActionProps {\n  /** The action name. */\n  name: string;\n  /** A function that is called when the action is executed. */\n  action: (payload: any, getters: Getters, actions: Actions) => void;\n}\n\nclass ActionBase extends React.PureComponent<ActionProps & PluginContextProps> {\n  plugin: InnerPlugin;\n\n  constructor(props) {\n    super(props);\n\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost, [POSITION_CONTEXT]: positionContext } = props;\n    const { name } = props;\n\n    this.plugin = {\n      position: () => positionContext(),\n      [`${name}Action`]: (params) => {\n        const { action } = this.props;\n        const { getters } = getAvailableGetters(\n          pluginHost,\n          getterName => pluginHost.get(`${getterName}Getter`, this.plugin),\n        );\n        let nextParams = params;\n        const actions = getAvailableActions(\n          pluginHost,\n          actionName => (actionName === name\n            ? (newParams) => { nextParams = newParams; }\n            : pluginHost.collect(`${actionName}Action`, this.plugin).slice().reverse()[0]),\n        );\n        action(params, getters, actions);\n        const nextAction = pluginHost.collect(`${name}Action`, this.plugin).slice().reverse()[0];\n        if (nextAction) {\n          nextAction(nextParams);\n        }\n      },\n    };\n\n    pluginHost.registerPlugin(this.plugin);\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n\n    pluginHost.unregisterPlugin(this.plugin);\n  }\n\n  render() {\n    return null;\n  }\n}\n\nexport const Action: React.ComponentType<ActionProps> = withHostAndPosition(ActionBase);\n","import * as React from 'react';\nimport {\n  isTrackedDependenciesChanged,\n  getAvailableGetters,\n  getAvailableActions,\n} from './helpers';\nimport { UPDATE_CONNECTION_EVENT, PLUGIN_HOST_CONTEXT, POSITION_CONTEXT } from './constants';\nimport { withHostAndPosition } from '../utils/with-props-from-context';\nimport { InnerPlugin } from '@devexpress/dx-core';\nimport { PluginContextProps } from './plugin-context-prop-types';\n\nexport interface GetterProps {\n  /** The Getter's name. */\n  name: string;\n  /** The shared value. */\n  value?: any;\n  /*** A function that calculates a value depending on the values other Getters expose.\n   * The value is computed each time a related Getter's value changes.\n   * Applies only if `value` is not defined.\n   */\n  computed?: (\n    getters: Getters,\n    actions: Actions,\n  ) => any;\n}\nexport type Getters = { readonly [getterName: string]: any };\nexport type Actions = { [actionName: string]: (payload?: any) => void };\n\nclass GetterBase extends React.PureComponent<GetterProps & PluginContextProps> {\n  plugin: InnerPlugin;\n\n  constructor(props) {\n    super(props);\n\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost, [POSITION_CONTEXT]: positionContext } = props;\n    const { name } = props;\n\n    let lastComputed;\n    let lastTrackedDependencies = {};\n    let lastResult;\n\n    this.plugin = {\n      position: () => positionContext(),\n      [`${name}Getter`]: (original) => {\n        const { value, computed } = this.props;\n        if (computed === undefined) return value;\n\n        const getGetterValue = getterName => ((getterName === name)\n          ? original\n          : pluginHost.get(`${getterName}Getter`, this.plugin));\n\n        if (computed === lastComputed\n          && !isTrackedDependenciesChanged(pluginHost, lastTrackedDependencies, getGetterValue)) {\n          return lastResult;\n        }\n\n        const { getters, trackedDependencies } = getAvailableGetters(pluginHost, getGetterValue);\n        const actions = getAvailableActions(pluginHost);\n\n        lastComputed = computed;\n        lastTrackedDependencies = trackedDependencies;\n        lastResult = computed(getters, actions);\n        return lastResult;\n      },\n    };\n\n    pluginHost.registerPlugin(this.plugin);\n  }\n\n  componentDidUpdate() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n\n    pluginHost.broadcast(UPDATE_CONNECTION_EVENT);\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n\n    pluginHost.unregisterPlugin(this.plugin);\n  }\n\n  render() {\n    return null;\n  }\n}\n\nexport const Getter: React.ComponentType<GetterProps> = withHostAndPosition(GetterBase);\n","import * as React from 'react';\nimport { InnerPlugin } from '@devexpress/dx-core';\nimport {\n  PLUGIN_HOST_CONTEXT, POSITION_CONTEXT,\n  RERENDER_TEMPLATE_EVENT, RERENDER_TEMPLATE_SCOPE_EVENT,\n} from './constants';\nimport { withHostAndPosition } from '../utils/with-props-from-context';\nimport { PluginContextProps } from './plugin-context-prop-types';\n\nexport interface TemplateProps {\n  // tslint:disable-next-line:max-line-length\n  /** The template name. The `root` name is reserved. A template called `root` is rendered as the plugin based component's root. */\n  name: string;\n  // tslint:disable-next-line:max-line-length\n  /** A predicate function that returns a Boolean value that specifies whether the template should be rendered. */\n  predicate?: (params: object) => boolean;\n  /** A markup or function that returns a markup based on the specified parameters. */\n  children: React.ReactNode | ((params: object) => React.ReactNode);\n}\n\nlet globalTemplateId = 0;\n/** @internal */\nexport class TemplateBase extends React.PureComponent<TemplateProps & PluginContextProps> {\n  id: number;\n  plugin: InnerPlugin;\n  children: () => any;\n\n  constructor(props) {\n    super(props);\n\n    this.children = () => void 0;\n\n    globalTemplateId += 1;\n    this.id = globalTemplateId;\n\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost, [POSITION_CONTEXT]: positionContext } = props;\n    const { name, predicate } = props;\n\n    this.plugin = {\n      position: () => positionContext(),\n      [`${name}Template`]: {\n        id: this.id,\n        predicate: params => (predicate ? predicate(params) : true),\n        children: () => {\n          const { children } = this.props;\n          return children;\n        },\n      },\n    };\n    pluginHost.registerPlugin(this.plugin);\n    pluginHost.broadcast(RERENDER_TEMPLATE_SCOPE_EVENT, name);\n  }\n\n  componentDidUpdate() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n    pluginHost.broadcast(RERENDER_TEMPLATE_EVENT, this.id);\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n    const { name } = this.props;\n    pluginHost.unregisterPlugin(this.plugin);\n    pluginHost.broadcast(RERENDER_TEMPLATE_SCOPE_EVENT, name);\n  }\n\n  render() {\n    return null;\n  }\n}\n\n/*** A React component that defines a markup that is rendered\n * as the corresponding TemplatePlaceholder.\n */\nexport const Template: React.ComponentType<TemplateProps> = withHostAndPosition(TemplateBase);\n","import * as React from 'react';\nimport { UPDATE_CONNECTION_EVENT } from './constants';\nimport {\n  isTrackedDependenciesChanged,\n  getAvailableGetters,\n  getAvailableActions,\n} from './helpers';\nimport { PluginHostContext } from './contexts';\nimport { Getters, Actions } from './getter';\n\nexport interface TemplateConnectorProps {\n  /** A function that renders a markup using Getters and Actions passed as arguments. */\n  children: (\n    getters: Getters,\n    actions: Actions,\n  ) => React.ReactNode;\n}\n\n/** @internal */\nclass TemplateConnectorBase extends React.Component<TemplateConnectorProps> {\n  trackedDependencies: { [key: string]: { get: (args) => any }};\n  subscription: { [UPDATE_CONNECTION_EVENT: string]: (args) => void };\n\n  constructor(props, context) {\n    super(props, context);\n\n    this.trackedDependencies = {};\n    this.subscription = {\n      [UPDATE_CONNECTION_EVENT]: () => this.updateConnection(),\n    };\n  }\n\n  componentDidMount() {\n    const pluginHost = this.context;\n    pluginHost.registerSubscription(this.subscription);\n  }\n\n  componentWillUnmount() {\n    const pluginHost = this.context;\n    pluginHost.unregisterSubscription(this.subscription);\n  }\n\n  updateConnection() {\n    const pluginHost = this.context;\n\n    if (isTrackedDependenciesChanged(pluginHost, this.trackedDependencies)) {\n      this.forceUpdate();\n    }\n  }\n\n  render() {\n    const pluginHost = this.context;\n    const { children } = this.props;\n\n    const { getters, trackedDependencies } = getAvailableGetters(pluginHost);\n    this.trackedDependencies = trackedDependencies;\n    const actions = getAvailableActions(pluginHost);\n\n    return children(getters, actions);\n  }\n}\n\nTemplateConnectorBase.contextType = PluginHostContext;\n\n/** A React component that provides access to Getters and Actions within a Template. */\nexport const TemplateConnector: React.ComponentType<TemplateConnectorProps> = TemplateConnectorBase;\n","const TIMEOUT = 180;\n\n/** @internal */\nexport class TouchStrategy {\n  delegate: any;\n  touchStartTimeout: any;\n  dragging: boolean;\n  mouseInitialOffset: null;\n\n  constructor(delegate) {\n    this.delegate = delegate;\n    this.touchStartTimeout = null;\n    this.dragging = false;\n  }\n\n  isDragging() {\n    return this.dragging;\n  }\n\n  isWaiting() {\n    return !!this.touchStartTimeout;\n  }\n\n  cancelWaiting() {\n    clearTimeout(this.touchStartTimeout);\n    this.touchStartTimeout = undefined;\n  }\n\n  start(e) {\n    const { clientX: x, clientY: y } = e.touches[0];\n    this.touchStartTimeout = setTimeout(() => {\n      this.delegate.onStart({ x, y });\n      this.dragging = true;\n    }, TIMEOUT);\n  }\n\n  move(e) {\n    this.cancelWaiting();\n    if (this.dragging) {\n      const { clientX, clientY } = e.touches[0];\n      e.preventDefault();\n      this.delegate.onMove({ x: clientX, y: clientY });\n    }\n  }\n\n  end(e) {\n    this.cancelWaiting();\n    if (this.dragging) {\n      const { clientX, clientY } = e.changedTouches[0];\n      this.delegate.onEnd({ x: clientX, y: clientY });\n    }\n    this.mouseInitialOffset = null;\n    this.dragging = false;\n  }\n}\n","/* globals document:true */\n\nlet gestureCover: HTMLElement;\n/** @internal */\nexport const toggleGestureCover = (toggle, cursor?) => {\n  let style: React.CSSProperties = {\n    pointerEvents: toggle ? 'all' : 'none',\n  };\n  if (toggle && cursor) {\n    style = {\n      ...style,\n      cursor,\n    };\n  }\n  if (!gestureCover) {\n    style = {\n      ...style,\n      position: 'fixed',\n      top: 0,\n      right: 0,\n      left: 0,\n      bottom: 0,\n      opacity: 0,\n      zIndex: 2147483647,\n    };\n\n    gestureCover = document.createElement('div');\n    document.body.appendChild(gestureCover);\n  }\n  Object.keys(style).forEach((key) => { gestureCover.style[key] = style[key]; });\n};\n","/* globals window:true document:true */\n\nimport { toggleGestureCover } from './gesture-cover';\n\nconst BOUNDARY = 10;\nconst clamp = (value, min, max) => Math.max(Math.min(value, max), min);\nconst isBoundExceeded = (\n  { x: initialX, y: initialY }, { x, y },\n) => clamp(x, initialX - BOUNDARY, initialX + BOUNDARY) !== x\n  || clamp(y, initialY - BOUNDARY, initialY + BOUNDARY) !== y;\n\n/** @internal */\nexport class MouseStrategy {\n  delegate: any;\n  mouseInitialOffset: any;\n  dragging: boolean;\n  e: any;\n\n  constructor(delegate) {\n    this.delegate = delegate;\n    this.mouseInitialOffset = null;\n    this.dragging = false;\n  }\n\n  isDragging() {\n    return this.dragging;\n  }\n\n  start(e) {\n    const { clientX: x, clientY: y } = e;\n    this.e = e;\n    this.mouseInitialOffset = { x, y };\n  }\n\n  move(e) {\n    const { clientX: x, clientY: y } = e;\n    let dragStarted = false;\n    if (!this.dragging && this.mouseInitialOffset) {\n      if (isBoundExceeded(this.mouseInitialOffset, { x, y })) {\n        this.delegate.onStart(this.mouseInitialOffset);\n        const selection = window.getSelection && window.getSelection();\n        if (selection && selection.removeAllRanges) {\n          selection.removeAllRanges();\n        }\n        dragStarted = true;\n        this.dragging = true;\n      }\n    }\n    if (this.dragging) {\n      e.preventDefault();\n      this.delegate.onMove({ x, y });\n    }\n    if (dragStarted) {\n      const { cursor } = window.getComputedStyle(document.elementFromPoint(x, y)!);\n      toggleGestureCover(true, cursor);\n    }\n  }\n\n  end(e) {\n    if (this.dragging) {\n      const { clientX: x, clientY: y } = e;\n      toggleGestureCover(false);\n      this.delegate.onEnd({ x, y });\n    }\n    this.mouseInitialOffset = null;\n    this.dragging = false;\n  }\n}\n","/* globals window:true */\n\nimport { EventEmitter } from '@devexpress/dx-core';\n\nlet eventEmitter;\n/** @internal */\nexport const getSharedEventEmitter = () => {\n  if (!eventEmitter) {\n    eventEmitter = new EventEmitter();\n\n    ['mousemove', 'mouseup', 'touchmove', 'touchend', 'touchcancel']\n      .forEach(name => window.addEventListener(\n        name, e => eventEmitter.emit([name, e]), { passive: false },\n      ));\n  }\n  return eventEmitter;\n};\n","/* globals document:true window:true */\n\n/** @internal */\nexport const clear = () => {\n  const selection = window.getSelection && window.getSelection();\n\n  if (selection) {\n    if (selection.empty) {\n      selection.empty();\n    } else if (selection.removeAllRanges) {\n      selection.removeAllRanges();\n    }\n  }\n};\n","import * as React from 'react';\nimport { unstable_batchedUpdates, findDOMNode } from 'react-dom';\nimport { TouchStrategy } from './draggable/touch-strategy';\nimport { MouseStrategy } from './draggable/mouse-strategy';\nimport { getSharedEventEmitter } from './draggable/shared-events';\nimport { clear } from './draggable/selection-utils';\n\nconst draggingHandled = Symbol('draggingHandled');\n\ntype DraggableProps = {\n  onStart?: (args) => void;\n  onUpdate?: (args) => void;\n  onEnd?: (args) => void;\n};\n\n/** @internal */\nexport class Draggable extends React.Component<DraggableProps> {\n  mouseStrategy: MouseStrategy;\n  touchStrategy: TouchStrategy;\n\n  constructor(props, context) {\n    super(props, context);\n    const delegate = {\n      onStart: ({ x, y }) => {\n        const { onStart } = this.props;\n        if (!onStart) return;\n        unstable_batchedUpdates(() => {\n          onStart({ x, y });\n        });\n      },\n      onMove: ({ x, y }) => {\n        const { onUpdate } = this.props;\n        if (!onUpdate) return;\n        unstable_batchedUpdates(() => {\n          onUpdate({ x, y });\n        });\n      },\n      onEnd: ({ x, y }) => {\n        const { onEnd } = this.props;\n        if (!onEnd) return;\n        unstable_batchedUpdates(() => {\n          onEnd({ x, y });\n        });\n      },\n    };\n\n    this.mouseStrategy = new MouseStrategy(delegate);\n    this.touchStrategy = new TouchStrategy(delegate);\n\n    this.mouseDownListener = this.mouseDownListener.bind(this);\n    this.touchStartListener = this.touchStartListener.bind(this);\n    this.globalListener = this.globalListener.bind(this);\n  }\n\n  componentDidMount() {\n    getSharedEventEmitter().subscribe(this.globalListener);\n    this.setupNodeSubscription();\n  }\n\n  shouldComponentUpdate(nextProps) {\n    const { children } = this.props;\n    return nextProps.children !== children;\n  }\n\n  componentDidUpdate() {\n    this.setupNodeSubscription();\n  }\n\n  componentWillUnmount() {\n    getSharedEventEmitter().unsubscribe(this.globalListener);\n  }\n\n  setupNodeSubscription() {\n    const node = findDOMNode(this) as Element;\n    if (!node) return;\n    node.removeEventListener('mousedown', this.mouseDownListener);\n    node.removeEventListener('touchstart', this.touchStartListener);\n    node.addEventListener('mousedown', this.mouseDownListener, { passive: true });\n    node.addEventListener('touchstart', this.touchStartListener, { passive: true });\n  }\n\n  mouseDownListener(e) {\n    if (this.touchStrategy.isWaiting() || e[draggingHandled]) return;\n    this.mouseStrategy.start(e);\n    e[draggingHandled] = true;\n  }\n\n  touchStartListener(e) {\n    if (e[draggingHandled]) return;\n    this.touchStrategy.start(e);\n    e[draggingHandled] = true;\n  }\n\n  globalListener([name, e]) {\n    switch (name) {\n      case 'mousemove':\n        this.mouseStrategy.move(e);\n        break;\n      case 'mouseup':\n        this.mouseStrategy.end(e);\n        break;\n      case 'touchmove': {\n        this.touchStrategy.move(e);\n        break;\n      }\n      case 'touchend':\n      case 'touchcancel': {\n        this.touchStrategy.end(e);\n        break;\n      }\n      default:\n        break;\n    }\n    if (this.mouseStrategy.isDragging() || this.touchStrategy.isDragging()) {\n      clear();\n    }\n  }\n\n  render() {\n    const { children } = this.props;\n    return children;\n  }\n}\n","import * as React from 'react';\nimport { DragDropProviderCore } from './provider';\n\n/** @internal */\nexport const DragDropContext = React.createContext<DragDropProviderCore | null>(null);\n","import * as React from 'react';\n\nimport { EventEmitter } from '@devexpress/dx-core';\nimport { DragDropContext } from './context';\n\n/** @internal */\nexport class DragDropProviderCore {\n  payload: null;\n  dragEmitter: EventEmitter;\n\n  constructor() {\n    this.payload = null;\n    this.dragEmitter = new EventEmitter();\n  }\n\n  start(payload, clientOffset) {\n    this.payload = payload;\n    this.dragEmitter.emit({ clientOffset, payload: this.payload });\n  }\n\n  update(clientOffset) {\n    this.dragEmitter.emit({ clientOffset, payload: this.payload });\n  }\n\n  end(clientOffset) {\n    this.dragEmitter.emit({ clientOffset, payload: this.payload, end: true });\n    this.payload = null;\n  }\n}\n\nconst defaultProps = {\n  onChange: ({ payload, clientOffset }) => {},\n};\ntype DragDropProviderDefaultProps = Readonly<typeof defaultProps>;\ntype DragDropProviderProps = Partial<DragDropProviderDefaultProps>;\n\n/** @internal */\n// tslint:disable-next-line: max-classes-per-file\nexport class DragDropProvider extends React.Component<\n  DragDropProviderProps & DragDropProviderDefaultProps\n> {\n  static defaultProps = defaultProps;\n  dragDropProvider: DragDropProviderCore;\n\n  constructor(props) {\n    super(props);\n    const { onChange } = this.props;\n\n    this.dragDropProvider = new DragDropProviderCore();\n\n    this.dragDropProvider.dragEmitter.subscribe(({ payload, clientOffset, end }) => {\n      onChange({\n        payload: end ? null : payload,\n        clientOffset: end ? null : clientOffset,\n      });\n    });\n  }\n\n  shouldComponentUpdate(nextProps) {\n    const { children } = this.props;\n    return nextProps.children !== children;\n  }\n\n  render() {\n    const { children } = this.props;\n    return (\n      <DragDropContext.Provider value={this.dragDropProvider}>\n        {children}\n      </DragDropContext.Provider>\n    );\n  }\n}\n","import * as React from 'react';\nimport { DragDropContext } from './context';\nimport { Draggable } from '../draggable';\n\nconst defaultProps = {\n  onStart: ({ clientOffset }) => {},\n  onUpdate: ({ clientOffset }) => {},\n  onEnd: ({ clientOffset }) => {},\n};\ntype DragSourceDefaultProps = Readonly<typeof defaultProps>;\ntype DragSourceProps = {\n  payload: any;\n} & Partial<DragSourceDefaultProps>;\n\n/** @internal */\nexport class DragSource extends React.Component<DragSourceProps & DragSourceDefaultProps> {\n  static defaultProps = defaultProps;\n\n  shouldComponentUpdate(nextProps) {\n    const { children } = this.props;\n    return nextProps.children !== children;\n  }\n\n  render() {\n    const dragDropProvider = this.context;\n    const {\n      onStart, onUpdate, onEnd, payload, children,\n    } = this.props;\n    return (\n      <Draggable\n        onStart={({ x, y }) => {\n          dragDropProvider.start(payload, { x, y });\n          onStart({ clientOffset: { x, y } });\n        }}\n        onUpdate={({ x, y }) => {\n          dragDropProvider.update({ x, y });\n          onUpdate({ clientOffset: { x, y } });\n        }}\n        onEnd={({ x, y }) => {\n          dragDropProvider.end({ x, y });\n          onEnd({ clientOffset: { x, y } });\n        }}\n      >\n        {children}\n      </Draggable>\n    );\n  }\n}\nDragSource.contextType = DragDropContext;\n","import * as React from 'react';\nimport { findDOMNode } from 'react-dom';\nimport { DragDropContext } from './context';\n\nconst clamp = (value, min, max) => Math.max(Math.min(value, max), min);\n\nconst defaultProps = {\n  onEnter: (args) => {},\n  onOver: (args) => {},\n  onLeave: (args) => {},\n  onDrop: (args) => {},\n};\ntype DropTargetDefaultProps = Readonly<typeof defaultProps>;\n\n/** @internal */\nexport class DropTarget extends React.Component<DropTargetDefaultProps> {\n  static defaultProps = defaultProps;\n  isOver: boolean;\n\n  constructor(props) {\n    super(props);\n\n    this.isOver = false;\n\n    this.handleDrag = this.handleDrag.bind(this);\n  }\n\n  componentDidMount() {\n    const { dragEmitter } = this.context;\n    dragEmitter.subscribe(this.handleDrag);\n  }\n\n  shouldComponentUpdate(nextProps) {\n    const { children } = this.props;\n    return nextProps.children !== children;\n  }\n\n  componentWillUnmount() {\n    const { dragEmitter } = this.context;\n    dragEmitter.unsubscribe(this.handleDrag);\n  }\n\n  handleDrag({ payload, clientOffset, end }) {\n    const {\n      left,\n      top,\n      right,\n      bottom,\n    } = (findDOMNode(this) as Element).getBoundingClientRect();\n    const {\n      onDrop, onEnter, onLeave, onOver,\n    } = this.props;\n    const isOver = clientOffset\n      && clamp(clientOffset.x, left, right) === clientOffset.x\n      && clamp(clientOffset.y, top, bottom) === clientOffset.y;\n\n    if (!this.isOver && isOver) onEnter({ payload, clientOffset });\n    if (this.isOver && isOver) onOver({ payload, clientOffset });\n    if (this.isOver && !isOver) onLeave({ payload, clientOffset });\n    if (isOver && end) onDrop({ payload, clientOffset });\n\n    this.isOver = isOver && !end;\n  }\n\n  render() {\n    const { children } = this.props;\n    return React.Children.only(children);\n  }\n}\n\nDropTarget.contextType = DragDropContext;\n","import * as React from 'react';\n\n/** @internal */\nexport class RefHolder extends React.PureComponent {\n  render() {\n    const { children } = this.props;\n    return children;\n  }\n}\n","/* globals document:true */\n\nimport * as React from 'react';\nimport { findDOMNode } from 'react-dom';\nimport { RefHolder } from './ref-holder';\nimport { SizerProps, Size } from './types';\n\nconst styles = {\n  root: {\n    position: 'relative',\n  },\n  triggersRoot: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    overflow: 'hidden',\n    zIndex: -1,\n    visibility: 'hidden',\n    opacity: 0,\n  },\n  expandTrigger: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    overflow: 'auto',\n  },\n  contractTrigger: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    overflow: 'auto',\n    minHeight: '1px',\n    minWidth: '1px',\n  },\n  contractNotifier: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '200%',\n    height: '200%',\n  },\n};\n\n/** @internal */\nexport class Sizer extends React.PureComponent<SizerProps> {\n  static defaultProps = {\n    containerComponent: 'div',\n  };\n\n  rootRef: React.RefObject<RefHolder>;\n  // Though there properties cannot be assigned in constructor\n  // they will be assigned when component is mount.\n  rootNode!: HTMLElement;\n  triggersRoot!: HTMLDivElement;\n  expandTrigger!: HTMLDivElement;\n  expandNotifier!: HTMLDivElement;\n  contractTrigger!: HTMLDivElement;\n  contractNotifier!: HTMLDivElement;\n\n  constructor(props) {\n    super(props);\n\n    this.setupListeners = this.setupListeners.bind(this);\n    this.rootRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.createListeners();\n    this.setupListeners();\n  }\n\n  // There is no need to remove listeners as divs are removed from DOM when component is unmount.\n  // But there is a little chance that component unmounting and 'scroll' event happen roughly\n  // at the same time so that `setupListeners` is called after component is unmount.\n  componentWillUnmount() {\n    this.expandTrigger.removeEventListener('scroll', this.setupListeners);\n    this.contractTrigger.removeEventListener('scroll', this.setupListeners);\n  }\n\n  setupListeners() {\n    const size: Size = { height: this.rootNode.clientHeight, width: this.rootNode.clientWidth };\n\n    this.contractTrigger.scrollTop = size.height;\n    this.contractTrigger.scrollLeft = size.width;\n\n    const scrollOffset = 2;\n    this.expandNotifier.style.width = `${size.width + scrollOffset}px`;\n    this.expandNotifier.style.height = `${size.height + scrollOffset}px`;\n    this.expandTrigger.scrollTop = scrollOffset;\n    this.expandTrigger.scrollLeft = scrollOffset;\n\n    const { onSizeChange } = this.props;\n    onSizeChange(size);\n  }\n\n  createListeners() {\n    this.rootNode = findDOMNode(this.rootRef.current!) as HTMLElement;\n\n    this.triggersRoot = document.createElement('div');\n    Object.assign(this.triggersRoot.style, styles.triggersRoot);\n    this.rootNode.appendChild(this.triggersRoot);\n\n    this.expandTrigger = document.createElement('div');\n    Object.assign(this.expandTrigger.style, styles.expandTrigger);\n    this.expandTrigger.addEventListener('scroll', this.setupListeners);\n    this.triggersRoot.appendChild(this.expandTrigger);\n\n    this.expandNotifier = document.createElement('div');\n    this.expandTrigger.appendChild(this.expandNotifier);\n\n    this.contractTrigger = document.createElement('div');\n    Object.assign(this.contractTrigger.style, styles.contractTrigger);\n    this.contractTrigger.addEventListener('scroll', this.setupListeners);\n    this.triggersRoot.appendChild(this.contractTrigger);\n\n    this.contractNotifier = document.createElement('div');\n    Object.assign(this.contractNotifier.style, styles.contractNotifier);\n    this.contractTrigger.appendChild(this.contractNotifier);\n  }\n\n  render() {\n    const {\n      onSizeChange,\n      containerComponent: Container,\n      style,\n      ...restProps\n    } = this.props;\n\n    return (\n      <RefHolder\n        ref={this.rootRef}\n      >\n        <Container // NOTE: should have `position: relative`\n          style={style ? { ...styles.root, ...style } : styles.root}\n          {...restProps}\n        />\n      </RefHolder>\n    );\n  }\n}\n","import * as React from 'react';\n\ntype RenderComponentProps = {\n  update: () => void;\n};\n\n/*** A function that creates a new component that allows you to pass additional properties\n * to the wrapped component.\n */\nexport const connectProps = (\n  WrappedComponent: React.ComponentType<any>, getAdditionalProps: () => object,\n): React.ComponentType<any> & { update(): void } => {\n  let storedAdditionalProps = getAdditionalProps();\n  const components = new Set();\n  class RenderComponent extends React.PureComponent<RenderComponentProps> {\n    static update: () => void;\n\n    componentDidMount() {\n      components.add(this);\n    }\n\n    componentWillUnmount() {\n      components.delete(this);\n    }\n\n    render() {\n      return <WrappedComponent {...this.props} {...storedAdditionalProps} />;\n    }\n  }\n  RenderComponent.update = () => {\n    storedAdditionalProps = getAdditionalProps();\n    Array.from(components.values()).forEach(component => component.forceUpdate());\n  };\n  return RenderComponent;\n};\n","import { CreateStateHelperFn } from '../types';\n\n/** @internal */\nexport const createStateHelper: CreateStateHelperFn = (\n  component, controlledStateProperties = {},\n) => {\n  const notifyStateChange = (nextState, state) => {\n    Object.keys(controlledStateProperties).forEach((propertyName) => {\n      const changeEvent = controlledStateProperties[propertyName]();\n      if (changeEvent && nextState[propertyName] !== state[propertyName]) {\n        changeEvent(nextState[propertyName]);\n      }\n    });\n  };\n\n  let lastStateUpdater: (state) => void;\n  let initialState = null;\n  let lastInitialState = null;\n  const applyReducer = (reduce, payload?, callback?) => {\n    const stateUpdater = (prevState) => {\n      if (initialState === null) {\n        initialState = prevState;\n      }\n      const stateChange = reduce({ ...prevState }, payload);\n      const state = { ...prevState, ...stateChange };\n\n      if (typeof callback === 'function') {\n        callback(state, prevState);\n      }\n      if (stateUpdater === lastStateUpdater) {\n        if (lastInitialState !== initialState) {\n          notifyStateChange(state, initialState);\n          lastInitialState = initialState;\n        }\n        initialState = null;\n      }\n\n      return stateChange;\n    };\n    lastStateUpdater = stateUpdater;\n    component.setState(stateUpdater);\n  };\n  const applyFieldReducer = (field, reduce, payload) => {\n    applyReducer(state => ({\n      [field]: reduce(state[field], payload),\n    }));\n  };\n\n  return {\n    applyReducer,\n    applyFieldReducer,\n  };\n};\n","import * as React from 'react';\n\nconst makeBoundComponent = (Target, components, exposed: object) => {\n  class Component extends React.PureComponent {\n    static components: PluginComponents;\n\n    render() {\n      return <Target {...components} {...this.props} />;\n    }\n  }\n  Component.components = Target.components;\n  Object.assign(Component, exposed);\n  return Component;\n};\n\nexport type PluginComponents = { [key: string]: string };\nexport interface ITargetComponent {\n  components: PluginComponents;\n}\n// type ITargetComponentStatic = new() => ITargetComponent;\n\n/** @internal */\nexport const withComponents = components => (Target) => {\n  const props = {};\n  const exposed = {};\n  const targetComponents = (Target as ITargetComponent).components;\n\n  Object.entries(targetComponents).forEach(([fieldName, componentName]: [string, string]) => {\n    const component = components[componentName];\n    if (component && component !== Target[componentName]) {\n      props[fieldName] = component;\n    }\n    exposed[componentName] = component || Target[componentName];\n  });\n\n  return Object.keys(props).length > 0\n    ? makeBoundComponent(Target, props, exposed) : Target;\n};\n","/* globals Element */\nimport * as PropTypes from 'prop-types';\n\n/** @internal */\nexport const RefType = PropTypes.shape({\n  current: PropTypes.instanceOf((typeof Element !== 'undefined') ? Element : Object),\n});\n"],"names":["React.createContext","tslib_1.__extends","React.createElement","React.Children","React.PureComponent","shallowEqual","React.Component","PluginHostCore","EventEmitter","unstable_batchedUpdates","findDOMNode","defaultProps","clamp","React.createRef","PropTypes.shape","PropTypes.instanceOf"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IASA;AACA,IAAO,IAAM,iBAAiB,GAAGA,mBAAmB,CAAoB,IAAI,CAAC,CAAC;IAC9E;AACA,IAAO,IAAM,eAAe,GAAGA,mBAAmB,CAAmB,cAAM,OAAA,EAAE,GAAA,CAAC,CAAC;IAC/E;AACA,IAAO,IAAM,mBAAmB,GAAGA,mBAAmB,CAA+B,IAAI,CAAC,CAAC;;ICH3F;IACA;QAAmCC,iCAAuC;QAA1E;YAAA,qEAgCC;YA/BC,aAAO,GAA0C,EAAE,CAAC;YACpD,aAAO,GAA6B,UAAC,KAAK,EAAE,eAAe;gBACzD,IAAI,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC;oBAAE,OAAO,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;gBAEpD,IAAM,EAAE,GAAqB;oBAC3B,IAAM,kBAAkB,GAAG,eAAe,EAAE,CAAC;oBAC7C,gBAAW,kBAAkB,GAAE,KAAK,GAAE;iBACvC,CAAC;gBACF,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;gBAEzB,OAAO,EAAE,CAAC;aACX,CAAA;;SAoBF;QAnBC,8BAAM,GAAN;YAAA,iBAkBC;YAjBS,IAAA,8BAAQ,CAAgB;YAChC,QACEC,oBAAC,eAAe,CAAC,QAAQ,QACtB,UAAA,eAAe,IAAI,QAClBC,cAAc,CAAC,GAAG,CAAC,QAAQ,EAAE,UAAC,KAAU,EAAE,KAAa;gBACrD,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,IAAI;oBAAE,OAAO,KAAK,CAAC;gBACxC,IAAM,aAAa,GAAG,KAAI,CAAC,OAAO,CAAC,KAAK,EAAE,eAAe,CAAC,CAAC;gBAE3D,QACED,oBAAC,eAAe,CAAC,QAAQ,IAAC,GAAG,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE,KAAK,EAAE,aAAa,IAC/D,KAAK,CACmB,EAC3B;aACH,CAAC,IACH,CACwB,EAC3B;SACH;QACH,oBAAC;IAAD,CAAC,CAhCkCE,mBAAmB,GAgCrD;;IC5CD;AACA,IAAO,IAAM,mBAAmB,GAAG,2BAA2B,CAAC;IAC/D;AACA,IAAO,IAAM,gBAAgB,GAAG,yBAAyB,CAAC;IAC1D;AACA,IAAO,IAAM,qBAAqB,GAAG,6BAA6B,CAAC;IAEnE;AACA,IAAO,IAAM,uBAAuB,GAAG,MAAM,CAAC,kBAAkB,CAAC,CAAC;IAClE;AACA,IAAO,IAAM,6BAA6B,GAAG,MAAM,CAAC,uBAAuB,CAAC,CAAC;IAC7E;AACA,IAAO,IAAM,uBAAuB,GAAG,MAAM,CAAC,kBAAkB,CAAC,CAAC;;ICRlE;AACA,IAAO,IAAM,WAAW,GAAG,UAAC,OAAO,EAAE,IAAI,IAAK,OAAA,UAAA,SAAS,IAAI,OAAA,UAAA,KAAK,IAAI,QAClEF,oBAAC,OAAO,CAAC,QAAQ,QACd,UAAA,OAAO;;QAAI,QACVA,oBAAC,SAAS,eAAK,KAAK,YAAQ,GAAC,IAAI,IAAG,OAAO,OAAM;IADvC,CAEX,CACgB,IACpB,GAAA,GAAA,CAAC;IAEF;AACA,IAAO,IAAM,mBAAmB,GAAG,UAAA,SAAS,IAAI,OAAA,WAAW,CACzD,iBAAiB,EACjB,mBAAmB,CACpB,CAAC,WAAW,CAAC,eAAe,EAAE,gBAAgB,CAAC,CAAC,SAAS,CAAC,CAAC,GAAA,CAAC;;ICF7D;IACA;QAAgCD,8BAAqD;QAArF;;SAiCC;QA9BC,sCAAiB,GAAjB;YACQ,IAAA,eAAgF,EAA9E,wBAAqB,EAArB,mBAAiC,EAAE,qBAAkB,EAAlB,iBAA2C,CAAC;YACjF,IAAA,eAAmC,EAAjC,cAAI,EAAE,8BAA2B,CAAC;YAC1C,IAAI,CAAC,MAAM,GAAG;gBACZ,QAAQ,UAAA;gBACR,IAAI,MAAA;gBACJ,YAAY,cAAA;gBACZ,SAAS,EAAE,IAAI;aAChB,CAAC;YACF,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SACxC;QAED,uCAAkB,GAAlB;YACU,IAAA,wBAAqB,EAArB,2BAAiC,CAAgB;YACzD,UAAU,CAAC,kBAAkB,EAAE,CAAC;SACjC;QAED,yCAAoB,GAApB;YACU,IAAA,wBAAqB,EAArB,2BAAiC,CAAgB;YACzD,UAAU,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SAC1C;QAED,2BAAM,GAAN;YACU,IAAA,8BAAQ,CAAgB;YAChC,QACEC,oBAAC,aAAa,QACX,QAAQ,CACK,EAChB;SACH;QACH,iBAAC;IAAD,CAAC,CAjC+BE,mBAAmB,GAiClD;QAEY,MAAM,GAAqC,mBAAmB,CAAC,UAAU,CAAC;;IC3BvF,IAAM,gBAAgB,GAAG,UAAC,KAAY;QAC5B,IAAA,iBAAI,EAAE,qBAAM,CAAW;QAC/B,IAAI,IAAI,EAAE;YACA,IAAA,wBAAqB,EAArB,sBAAiC,CAAW;YACpD,OAAO;gBACL,MAAM,QAAA;gBACN,SAAS,EAAE,UAAU,CAAC,OAAO,CAAI,IAAI,aAAU,CAAC;qBAC7C,MAAM,CAAC,UAAA,QAAQ,IAAI,OAAA,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC,GAAA,CAAC;qBAC9C,OAAO,EAAE;aACb,CAAC;SACH;QACO,IAAA,0BAAuB,EAAvB,wBAAqC,CAAW;QACxD,OAAO;YACL,MAAM,EAAE,MAAM,IAAI,YAAY,CAAC,MAAM,EAAE;YACvC,SAAS,EAAE,YAAY,CAAC,SAAS,EAAE;SACpC,CAAC;IACJ,CAAC,CAAC;IAEF;QAAsCH,2CAAsB;QAA5D;;YAAA,qEAgEC;YA/DC,kBAAY;gBACV,GAAC,uBAAuB,IAAG,UAAC,EAAU;oBACpC,IAAI,KAAI,CAAC,QAAQ,IAAI,KAAI,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,EAAE;wBAC5C,KAAI,CAAC,WAAW,EAAE,CAAC;qBACpB;iBACF;gBACD,GAAC,6BAA6B,IAAG,UAAC,IAAY;oBACpC,IAAA,4BAAe,CAAgB;oBACvC,IAAI,SAAS,KAAK,IAAI,EAAE;wBACtB,KAAI,CAAC,WAAW,EAAE,CAAC;qBACpB;iBACF;oBACD;YACF,cAAQ,GAAwB,IAAI,CAAC;YACrC,YAAM,GAAY,EAAE,CAAC;;SAiDtB;QA/CC,mDAAiB,GAAjB;YACU,IAAA,wBAAqB,EAArB,2BAAiC,CAAgB;YACzD,UAAU,CAAC,oBAAoB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;SACpD;QAED,uDAAqB,GAArB,UAAsB,SAAgB;YAC9B,IAAA,gCAAmD,EAAjD,kBAAM,EAAE,wBAAyC,CAAC;YAClD,IAAA,8BAAQ,CAAgB;YAC1B,IAAA,yBAAsB,EAArB,gBAAqB,CAAC;YAC7B,OAAO,QAAQ,KAAK,SAAS,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,KAAK,QAAQ;mBAC/D,CAACI,mBAAY,CAAC,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;SACzC;QAED,sDAAoB,GAApB;YACU,IAAA,wBAAqB,EAArB,2BAAiC,CAAgB;YACzD,UAAU,CAAC,sBAAsB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;SACtD;QAED,wCAAM,GAAN;YAAA,iBA4BC;;YA3BO,IAAA,iCAAoD,EAAlD,kBAAM,EAAE,wBAA0C,CAAC;YAE3D,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrB,yBAA2B,EAA1B,qBAAa,CAAc;YAC5B,IAAM,aAAa,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAEzC,IAAI,OAAO,GAA8B,IAAI,CAAC;YAC9C,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACT,IAAA,wCAAyB,CAAmB;gBAEpD,OAAO,GAAG,eAAe,EAAE,IAAI,IAAI,CAAC;gBACpC,IAAI,OAAO,IAAI,OAAO,OAAO,KAAK,UAAU,EAAE;oBAC5C,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;iBAC3B;aACF;YAEO,IAAA,yCAA6B,CAAgB;YACrD,QACEH,oBAAC,mBAAmB,CAAC,QAAQ,IAC3B,KAAK,EAAE;oBACL,SAAS,EAAE,cAAM,OAAA,aAAa,GAAA;oBAC9B,MAAM,EAAE,cAAM,OAAA,KAAI,CAAC,MAAM,GAAA;iBAC1B,IAEA,mBAAmB,GAAG,mBAAmB,CAAC,OAAO,CAAC,GAAG,OAAO,CAChC,EAC/B;SACH;QACH,8BAAC;IAAD,CAAC,CAhEqCI,eAAe,GAgEpD;IAED;QACa,mBAAmB,GAAkD,WAAW,CAC3F,iBAAiB,EAAE,mBAAmB,CACvC,CACC,WAAW,CAAC,mBAAmB,EAAE,qBAAqB,CAAC,CAAC,uBAAuB,CAAC,CACjF;;ICtGD;IACA;QAA6BL,kCAAoC;QAG/D,wBAAY,KAAsB;YAAlC,YACE,kBAAM,KAAK,CAAC,SAGb;YADC,KAAI,CAAC,IAAI,GAAG,IAAIM,iBAAc,EAAE,CAAC;;SAClC;QAED,+BAAM,GAAN;YACU,IAAA,8BAAQ,CAAgB;YAEhC,QACEL,oBAAC,iBAAiB,CAAC,QAAQ,IAAC,KAAK,EAAE,IAAI,CAAC,IAAI;gBAC1CA,oBAAC,aAAa,QACX,QAAQ,CACK;gBAChBA,oBAAC,mBAAmB,IAAC,IAAI,EAAC,MAAM,GAAG,CACR,EAC7B;SACH;QACH,qBAAC;IAAD,CAAC,CArB4BE,mBAAmB,GAqB/C;AAED,QAAa,UAAU,GAAyC,cAAc;;ICjC9E;AACA,IAAO,IAAM,mBAAmB,GAAG,UACjC,UAAU,EACV,cAAoE;QAApE,+BAAA,EAAA,2BAAiB,UAAU,IAAI,OAAA,UAAU,CAAC,GAAG,CAAI,UAAU,WAAQ,CAAC,GAAA;QAEpE,IAAM,mBAAmB,GAAG,EAAE,CAAC;QAE/B,IAAI,OAAO,CAAC;QACZ,IAAI,OAAO,KAAK,KAAK,WAAW,EAAE;YAChC,OAAO,GAAG,IAAI,KAAK,CAAC,EAAE,EAAE;gBACtB,GAAG,YAAC,MAAM,EAAE,IAAI;oBACd,IAAI,OAAO,IAAI,KAAK,QAAQ;wBAAE,OAAO,SAAS,CAAC;oBAC/C,IAAM,MAAM,GAAG,cAAc,CAAC,IAAI,CAAC,CAAC;oBACpC,mBAAmB,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC;oBACnC,OAAO,MAAM,CAAC;iBACf;gBACD,wBAAwB,EAAxB,UAAyB,MAAM,EAAE,IAAI;oBACnC,OAAO;wBACL,YAAY,EAAE,IAAI;wBAClB,UAAU,EAAE,IAAI;wBAChB,KAAK,EAAE,IAAI,CAAC,GAAI,CAAC,MAAa,EAAE,IAAI,EAAE,SAAS,CAAC;qBACjD,CAAC;iBACH;gBACD,OAAO;oBACL,OAAO,UAAU,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;iBACvC;aACF,CAAC,CAAC;SACJ;aAAM;YACL,OAAO,GAAG,UAAU,CAAC,SAAS,CAAC,QAAQ,CAAC;iBACrC,MAAM,CAAC,UAAC,GAAG,EAAE,UAAU;gBACtB,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,UAAU,EAAE;oBACrC,GAAG,EAAE;wBACH,IAAM,MAAM,GAAG,cAAc,CAAC,UAAU,CAAC,CAAC;wBAC1C,mBAAmB,CAAC,UAAU,CAAC,GAAG,MAAM,CAAC;wBACzC,OAAO,MAAM,CAAC;qBACf;iBACF,CAAC,CAAC;gBACH,OAAO,GAAG,CAAC;aACZ,EAAE,EAAE,CAAC,CAAC;SACV;QAED,OAAO,EAAE,OAAO,SAAA,EAAE,mBAAmB,qBAAA,EAAE,CAAC;IAC1C,CAAC,CAAC;IAEF;AACA,IAAO,IAAM,4BAA4B,GAAG,UAC1C,UAAU,EACV,uBAAuB,EACvB,cAAoE;QAApE,+BAAA,EAAA,2BAAiB,UAAU,IAAI,OAAA,UAAU,CAAC,GAAG,CAAI,UAAU,WAAQ,CAAC,GAAA;QAEpE,IAAM,mBAAmB,GAAG,MAAM,CAAC,IAAI,CAAC,uBAAuB,CAAC;;aAE7D,MAAM,CAAC,UAAC,GAAG,EAAE,UAAU;;YAAK,OAAA,MAAM,CAAC,MAAM,CAAC,GAAG;gBAC5C,GAAC,UAAU,IAAG,cAAc,CAAC,UAAU,CAAC;oBACxC;SAAA,EAAE,EAAE,CAAC,CAAC;QAEV,OAAO,CAACC,mBAAY,CAAC,uBAAuB,EAAE,mBAAmB,CAAC,CAAC;IACrE,CAAC,CAAC;IAEF;AACA,IAAO,IAAM,mBAAmB,GAAG,UACjC,UAAU,EACV,SAAwF;QAAxF,0BAAA,EAAA,sBAAY,UAAU,IAAI,OAAA,UAAU,CAAC,OAAO,CAAI,UAAU,WAAQ,CAAC,CAAC,KAAK,EAAE,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,GAAA;QAExF,IAAI,OAAO,CAAC;QACZ,IAAI,OAAO,KAAK,KAAK,WAAW,EAAE;YAChC,OAAO,GAAG,IAAI,KAAK,CAAC,EAAE,EAAE;gBACtB,GAAG,YAAC,MAAM,EAAE,IAAI;oBACd,IAAI,OAAO,IAAI,KAAK,QAAQ;wBAAE,OAAO,SAAS,CAAC;oBAC/C,OAAO,SAAS,CAAC,IAAI,CAAC,CAAC;iBACxB;gBACD,wBAAwB,EAAxB,UAAyB,MAAM,EAAE,IAAI;oBACnC,OAAO;wBACL,YAAY,EAAE,IAAI;wBAClB,UAAU,EAAE,IAAI;wBAChB,KAAK,EAAE,IAAI,CAAC,GAAI,CAAC,MAAa,EAAE,IAAI,EAAE,SAAS,CAAC;qBACjD,CAAC;iBACH;gBACD,OAAO;oBACL,OAAO,UAAU,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;iBACvC;aACF,CAAC,CAAC;SACJ;aAAM;YACL,OAAO,GAAG,UAAU,CAAC,SAAS,CAAC,QAAQ,CAAC;iBACrC,MAAM,CAAC,UAAC,GAAG,EAAE,UAAU;gBACtB,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,UAAU,EAAE;oBACrC,GAAG,EAAE,cAAM,OAAA,SAAS,CAAC,UAAU,CAAC,GAAA;iBACjC,CAAC,CAAC;gBACH,OAAO,GAAG,CAAC;aACZ,EAAE,EAAE,CAAC,CAAC;SACV;QACD,OAAO,OAAO,CAAC;IACjB,CAAC,CAAC;;IC5EF;QAAyBJ,8BAAqD;QAG5E,oBAAY,KAAK;;YAAjB,YACE,kBAAM,KAAK,CAAC,SA6Bb;YA3BS,IAAA,wBAAqB,EAArB,sBAAiC,EAAE,qBAAkB,EAAlB,2BAAmC,CAAW;YACjF,IAAA,iBAAI,CAAW;YAEvB,KAAI,CAAC,MAAM;oBACT,QAAQ,EAAE,cAAM,OAAA,eAAe,EAAE,GAAA;;gBACjC,GAAI,IAAI,WAAQ,IAAG,UAAC,MAAM;oBAChB,IAAA,2BAAM,CAAgB;oBACtB,IAAA,wIAAO,CAGb;oBACF,IAAI,UAAU,GAAG,MAAM,CAAC;oBACxB,IAAM,OAAO,GAAG,mBAAmB,CACjC,UAAU,EACV,UAAA,UAAU,IAAI,QAAC,UAAU,KAAK,IAAI;0BAC9B,UAAC,SAAS,IAAO,UAAU,GAAG,SAAS,CAAC,EAAE;0BAC1C,UAAU,CAAC,OAAO,CAAI,UAAU,WAAQ,EAAE,KAAI,CAAC,MAAM,CAAC,CAAC,KAAK,EAAE,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,IAAC,CACjF,CAAC;oBACF,MAAM,CAAC,MAAM,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;oBACjC,IAAM,UAAU,GAAG,UAAU,CAAC,OAAO,CAAI,IAAI,WAAQ,EAAE,KAAI,CAAC,MAAM,CAAC,CAAC,KAAK,EAAE,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC;oBACzF,IAAI,UAAU,EAAE;wBACd,UAAU,CAAC,UAAU,CAAC,CAAC;qBACxB;iBACF;mBACF,CAAC;YAEF,UAAU,CAAC,cAAc,CAAC,KAAI,CAAC,MAAM,CAAC,CAAC;;SACxC;QAED,yCAAoB,GAApB;YACU,IAAA,wBAAqB,EAArB,2BAAiC,CAAgB;YAEzD,UAAU,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SAC1C;QAED,2BAAM,GAAN;YACE,OAAO,IAAI,CAAC;SACb;QACH,iBAAC;IAAD,CAAC,CA5CwBG,mBAAmB,GA4C3C;QAEY,MAAM,GAAqC,mBAAmB,CAAC,UAAU,CAAC;;ICpCvF;QAAyBH,8BAAqD;QAG5E,oBAAY,KAAK;;YAAjB,YACE,kBAAM,KAAK,CAAC,SAmCb;YAjCS,IAAA,wBAAqB,EAArB,sBAAiC,EAAE,qBAAkB,EAAlB,2BAAmC,CAAW;YACjF,IAAA,iBAAI,CAAW;YAEvB,IAAI,YAAY,CAAC;YACjB,IAAI,uBAAuB,GAAG,EAAE,CAAC;YACjC,IAAI,UAAU,CAAC;YAEf,KAAI,CAAC,MAAM;oBACT,QAAQ,EAAE,cAAM,OAAA,eAAe,EAAE,GAAA;;gBACjC,GAAI,IAAI,WAAQ,IAAG,UAAC,QAAQ;oBACpB,IAAA,gBAAgC,EAA9B,gBAAK,EAAE,sBAAuB,CAAC;oBACvC,IAAI,QAAQ,KAAK,SAAS;wBAAE,OAAO,KAAK,CAAC;oBAEzC,IAAM,cAAc,GAAG,UAAA,UAAU,IAAI,QAAC,CAAC,UAAU,KAAK,IAAI;0BACtD,QAAQ;0BACR,UAAU,CAAC,GAAG,CAAI,UAAU,WAAQ,EAAE,KAAI,CAAC,MAAM,CAAC,IAAC,CAAC;oBAExD,IAAI,QAAQ,KAAK,YAAY;2BACxB,CAAC,4BAA4B,CAAC,UAAU,EAAE,uBAAuB,EAAE,cAAc,CAAC,EAAE;wBACvF,OAAO,UAAU,CAAC;qBACnB;oBAEK,IAAA,oDAAkF,EAAhF,oBAAO,EAAE,4CAAuE,CAAC;oBACzF,IAAM,OAAO,GAAG,mBAAmB,CAAC,UAAU,CAAC,CAAC;oBAEhD,YAAY,GAAG,QAAQ,CAAC;oBACxB,uBAAuB,GAAG,mBAAmB,CAAC;oBAC9C,UAAU,GAAG,QAAQ,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;oBACxC,OAAO,UAAU,CAAC;iBACnB;mBACF,CAAC;YAEF,UAAU,CAAC,cAAc,CAAC,KAAI,CAAC,MAAM,CAAC,CAAC;;SACxC;QAED,uCAAkB,GAAlB;YACU,IAAA,wBAAqB,EAArB,2BAAiC,CAAgB;YAEzD,UAAU,CAAC,SAAS,CAAC,uBAAuB,CAAC,CAAC;SAC/C;QAED,yCAAoB,GAApB;YACU,IAAA,wBAAqB,EAArB,2BAAiC,CAAgB;YAEzD,UAAU,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SAC1C;QAED,2BAAM,GAAN;YACE,OAAO,IAAI,CAAC;SACb;QACH,iBAAC;IAAD,CAAC,CAxDwBG,mBAAmB,GAwD3C;QAEY,MAAM,GAAqC,mBAAmB,CAAC,UAAU,CAAC;;IClEvF,IAAI,gBAAgB,GAAG,CAAC,CAAC;IACzB;IACA;QAAkCH,gCAAuD;QAKvF,sBAAY,KAAK;;YAAjB,YACE,kBAAM,KAAK,CAAC,SAuBb;YArBC,KAAI,CAAC,QAAQ,GAAG,cAAM,OAAA,KAAK,CAAC,GAAA,CAAC;YAE7B,gBAAgB,IAAI,CAAC,CAAC;YACtB,KAAI,CAAC,EAAE,GAAG,gBAAgB,CAAC;YAEnB,IAAA,wBAAqB,EAArB,sBAAiC,EAAE,qBAAkB,EAAlB,2BAAmC,CAAW;YACjF,IAAA,iBAAI,EAAE,2BAAS,CAAW;YAElC,KAAI,CAAC,MAAM;oBACT,QAAQ,EAAE,cAAM,OAAA,eAAe,EAAE,GAAA;;gBACjC,GAAI,IAAI,aAAU,IAAG;oBACnB,EAAE,EAAE,KAAI,CAAC,EAAE;oBACX,SAAS,EAAE,UAAA,MAAM,IAAI,QAAC,SAAS,GAAG,SAAS,CAAC,MAAM,CAAC,GAAG,IAAI,IAAC;oBAC3D,QAAQ,EAAE;wBACA,IAAA,+BAAQ,CAAgB;wBAChC,OAAO,QAAQ,CAAC;qBACjB;iBACF;mBACF,CAAC;YACF,UAAU,CAAC,cAAc,CAAC,KAAI,CAAC,MAAM,CAAC,CAAC;YACvC,UAAU,CAAC,SAAS,CAAC,6BAA6B,EAAE,IAAI,CAAC,CAAC;;SAC3D;QAED,yCAAkB,GAAlB;YACU,IAAA,wBAAqB,EAArB,2BAAiC,CAAgB;YACzD,UAAU,CAAC,SAAS,CAAC,uBAAuB,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;SACxD;QAED,2CAAoB,GAApB;YACU,IAAA,wBAAqB,EAArB,2BAAiC,CAAgB;YACjD,IAAA,sBAAI,CAAgB;YAC5B,UAAU,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACzC,UAAU,CAAC,SAAS,CAAC,6BAA6B,EAAE,IAAI,CAAC,CAAC;SAC3D;QAED,6BAAM,GAAN;YACE,OAAO,IAAI,CAAC;SACb;QACH,mBAAC;IAAD,CAAC,CA9CiCG,mBAAmB,GA8CpD;IAED;;;QAGa,QAAQ,GAAuC,mBAAmB,CAAC,YAAY,CAAC;;ICvD7F;IACA;QAAoCH,yCAAuC;QAIzE,+BAAY,KAAK,EAAE,OAAO;;YAA1B,YACE,kBAAM,KAAK,EAAE,OAAO,CAAC,SAMtB;YAJC,KAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC;YAC9B,KAAI,CAAC,YAAY;gBACf,GAAC,uBAAuB,IAAG,cAAM,OAAA,KAAI,CAAC,gBAAgB,EAAE,GAAA;mBACzD,CAAC;;SACH;QAED,iDAAiB,GAAjB;YACE,IAAM,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC;YAChC,UAAU,CAAC,oBAAoB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;SACpD;QAED,oDAAoB,GAApB;YACE,IAAM,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC;YAChC,UAAU,CAAC,sBAAsB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;SACtD;QAED,gDAAgB,GAAhB;YACE,IAAM,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC;YAEhC,IAAI,4BAA4B,CAAC,UAAU,EAAE,IAAI,CAAC,mBAAmB,CAAC,EAAE;gBACtE,IAAI,CAAC,WAAW,EAAE,CAAC;aACpB;SACF;QAED,sCAAM,GAAN;YACE,IAAM,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC;YACxB,IAAA,8BAAQ,CAAgB;YAE1B,IAAA,oCAAkE,EAAhE,oBAAO,EAAE,4CAAuD,CAAC;YACzE,IAAI,CAAC,mBAAmB,GAAG,mBAAmB,CAAC;YAC/C,IAAM,OAAO,GAAG,mBAAmB,CAAC,UAAU,CAAC,CAAC;YAEhD,OAAO,QAAQ,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;SACnC;QACH,4BAAC;IAAD,CAAC,CAzCmCK,eAAe,GAyClD;IAED,qBAAqB,CAAC,WAAW,GAAG,iBAAiB,CAAC;IAEtD;AACA,QAAa,iBAAiB,GAAgD,qBAAqB;;ICjEnG,IAAM,OAAO,GAAG,GAAG,CAAC;IAEpB;IACA;QAME,uBAAY,QAAQ;YAClB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;YACzB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;YAC9B,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;SACvB;QAED,kCAAU,GAAV;YACE,OAAO,IAAI,CAAC,QAAQ,CAAC;SACtB;QAED,iCAAS,GAAT;YACE,OAAO,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC;SACjC;QAED,qCAAa,GAAb;YACE,YAAY,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;YACrC,IAAI,CAAC,iBAAiB,GAAG,SAAS,CAAC;SACpC;QAED,6BAAK,GAAL,UAAM,CAAC;YAAP,iBAMC;YALO,IAAA,iBAAyC,EAAvC,cAAU,EAAE,cAA2B,CAAC;YAChD,IAAI,CAAC,iBAAiB,GAAG,UAAU,CAAC;gBAClC,KAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE,CAAC,GAAA,EAAE,CAAC,GAAA,EAAE,CAAC,CAAC;gBAChC,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;aACtB,EAAE,OAAO,CAAC,CAAC;SACb;QAED,4BAAI,GAAJ,UAAK,CAAC;YACJ,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACX,IAAA,iBAAmC,EAAjC,oBAAO,EAAE,oBAAwB,CAAC;gBAC1C,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,CAAC;aAClD;SACF;QAED,2BAAG,GAAH,UAAI,CAAC;YACH,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACX,IAAA,wBAA0C,EAAxC,oBAAO,EAAE,oBAA+B,CAAC;gBACjD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,CAAC;aACjD;YACD,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;YAC/B,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;SACvB;QACH,oBAAC;IAAD,CAAC,IAAA;;ICtDD;IAEA,IAAI,YAAyB,CAAC;IAC9B;AACA,IAAO,IAAM,kBAAkB,GAAG,UAAC,MAAM,EAAE,MAAO;QAChD,IAAI,KAAK,GAAwB;YAC/B,aAAa,EAAE,MAAM,GAAG,KAAK,GAAG,MAAM;SACvC,CAAC;QACF,IAAI,MAAM,IAAI,MAAM,EAAE;YACpB,KAAK,gBACA,KAAK,IACR,MAAM,QAAA,GACP,CAAC;SACH;QACD,IAAI,CAAC,YAAY,EAAE;YACjB,KAAK,gBACA,KAAK,IACR,QAAQ,EAAE,OAAO,EACjB,GAAG,EAAE,CAAC,EACN,KAAK,EAAE,CAAC,EACR,IAAI,EAAE,CAAC,EACP,MAAM,EAAE,CAAC,EACT,OAAO,EAAE,CAAC,EACV,MAAM,EAAE,UAAU,GACnB,CAAC;YAEF,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAC7C,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;SACzC;QACD,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,UAAC,GAAG,IAAO,YAAY,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;IACjF,CAAC,CAAC;;IC9BF;AAEA,IAEA,IAAM,QAAQ,GAAG,EAAE,CAAC;IACpB,IAAM,KAAK,GAAG,UAAC,KAAK,EAAE,GAAG,EAAE,GAAG,IAAK,OAAA,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC,GAAA,CAAC;IACvE,IAAM,eAAe,GAAG,UACtB,EAA4B,EAAE,EAAQ;YAApC,eAAW,EAAE,eAAW;YAAM,QAAC,EAAE,QAAC;QACjC,OAAA,KAAK,CAAC,CAAC,EAAE,QAAQ,GAAG,QAAQ,EAAE,QAAQ,GAAG,QAAQ,CAAC,KAAK,CAAC;eACxD,KAAK,CAAC,CAAC,EAAE,QAAQ,GAAG,QAAQ,EAAE,QAAQ,GAAG,QAAQ,CAAC,KAAK,CAAC;IADxD,CACwD,CAAC;IAE9D;IACA;QAME,uBAAY,QAAQ;YAClB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;YACzB,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;YAC/B,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;SACvB;QAED,kCAAU,GAAV;YACE,OAAO,IAAI,CAAC,QAAQ,CAAC;SACtB;QAED,6BAAK,GAAL,UAAM,CAAC;YACG,IAAA,aAAU,EAAE,aAAU,CAAO;YACrC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;YACX,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC,GAAA,EAAE,CAAC,GAAA,EAAE,CAAC;SACpC;QAED,4BAAI,GAAJ,UAAK,CAAC;YACI,IAAA,aAAU,EAAE,aAAU,CAAO;YACrC,IAAI,WAAW,GAAG,KAAK,CAAC;YACxB,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,kBAAkB,EAAE;gBAC7C,IAAI,eAAe,CAAC,IAAI,CAAC,kBAAkB,EAAE,EAAE,CAAC,GAAA,EAAE,CAAC,GAAA,EAAE,CAAC,EAAE;oBACtD,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;oBAC/C,IAAM,SAAS,GAAG,MAAM,CAAC,YAAY,IAAI,MAAM,CAAC,YAAY,EAAE,CAAC;oBAC/D,IAAI,SAAS,IAAI,SAAS,CAAC,eAAe,EAAE;wBAC1C,SAAS,CAAC,eAAe,EAAE,CAAC;qBAC7B;oBACD,WAAW,GAAG,IAAI,CAAC;oBACnB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;iBACtB;aACF;YACD,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,GAAA,EAAE,CAAC,GAAA,EAAE,CAAC,CAAC;aAChC;YACD,IAAI,WAAW,EAAE;gBACP,IAAA,wEAAM,CAA+D;gBAC7E,kBAAkB,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;aAClC;SACF;QAED,2BAAG,GAAH,UAAI,CAAC;YACH,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACT,IAAA,aAAU,EAAE,aAAU,CAAO;gBACrC,kBAAkB,CAAC,KAAK,CAAC,CAAC;gBAC1B,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC,GAAA,EAAE,CAAC,GAAA,EAAE,CAAC,CAAC;aAC/B;YACD,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;YAC/B,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;SACvB;QACH,oBAAC;IAAD,CAAC,IAAA;;ICnED;AAEA,IAEA,IAAI,YAAY,CAAC;IACjB;AACA,IAAO,IAAM,qBAAqB,GAAG;QACnC,IAAI,CAAC,YAAY,EAAE;YACjB,YAAY,GAAG,IAAIE,mBAAY,EAAE,CAAC;YAElC,CAAC,WAAW,EAAE,SAAS,EAAE,WAAW,EAAE,UAAU,EAAE,aAAa,CAAC;iBAC7D,OAAO,CAAC,UAAA,IAAI,IAAI,OAAA,MAAM,CAAC,gBAAgB,CACtC,IAAI,EAAE,UAAA,CAAC,IAAI,OAAA,YAAY,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,GAAA,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,CAC5D,GAAA,CAAC,CAAC;SACN;QACD,OAAO,YAAY,CAAC;IACtB,CAAC,CAAC;;IChBF;IAEA;AACA,IAAO,IAAM,KAAK,GAAG;QACnB,IAAM,SAAS,GAAG,MAAM,CAAC,YAAY,IAAI,MAAM,CAAC,YAAY,EAAE,CAAC;QAE/D,IAAI,SAAS,EAAE;YACb,IAAI,SAAS,CAAC,KAAK,EAAE;gBACnB,SAAS,CAAC,KAAK,EAAE,CAAC;aACnB;iBAAM,IAAI,SAAS,CAAC,eAAe,EAAE;gBACpC,SAAS,CAAC,eAAe,EAAE,CAAC;aAC7B;SACF;IACH,CAAC,CAAC;;ICNF,IAAM,eAAe,GAAG,MAAM,CAAC,iBAAiB,CAAC,CAAC;IAQlD;;QAC+BP,6BAA+B;QAI5D,mBAAY,KAAK,EAAE,OAAO;YAA1B,YACE,kBAAM,KAAK,EAAE,OAAO,CAAC,SA+BtB;YA9BC,IAAM,QAAQ,GAAG;gBACf,OAAO,EAAE,UAAC,EAAQ;wBAAN,QAAC,EAAE,QAAC;oBACN,IAAA,6BAAO,CAAgB;oBAC/B,IAAI,CAAC,OAAO;wBAAE,OAAO;oBACrBQ,gCAAuB,CAAC;wBACtB,OAAO,CAAC,EAAE,CAAC,GAAA,EAAE,CAAC,GAAA,EAAE,CAAC,CAAC;qBACnB,CAAC,CAAC;iBACJ;gBACD,MAAM,EAAE,UAAC,EAAQ;wBAAN,QAAC,EAAE,QAAC;oBACL,IAAA,+BAAQ,CAAgB;oBAChC,IAAI,CAAC,QAAQ;wBAAE,OAAO;oBACtBA,gCAAuB,CAAC;wBACtB,QAAQ,CAAC,EAAE,CAAC,GAAA,EAAE,CAAC,GAAA,EAAE,CAAC,CAAC;qBACpB,CAAC,CAAC;iBACJ;gBACD,KAAK,EAAE,UAAC,EAAQ;wBAAN,QAAC,EAAE,QAAC;oBACJ,IAAA,yBAAK,CAAgB;oBAC7B,IAAI,CAAC,KAAK;wBAAE,OAAO;oBACnBA,gCAAuB,CAAC;wBACtB,KAAK,CAAC,EAAE,CAAC,GAAA,EAAE,CAAC,GAAA,EAAE,CAAC,CAAC;qBACjB,CAAC,CAAC;iBACJ;aACF,CAAC;YAEF,KAAI,CAAC,aAAa,GAAG,IAAI,aAAa,CAAC,QAAQ,CAAC,CAAC;YACjD,KAAI,CAAC,aAAa,GAAG,IAAI,aAAa,CAAC,QAAQ,CAAC,CAAC;YAEjD,KAAI,CAAC,iBAAiB,GAAG,KAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;YAC3D,KAAI,CAAC,kBAAkB,GAAG,KAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;YAC7D,KAAI,CAAC,cAAc,GAAG,KAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;;SACtD;QAED,qCAAiB,GAAjB;YACE,qBAAqB,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YACvD,IAAI,CAAC,qBAAqB,EAAE,CAAC;SAC9B;QAED,yCAAqB,GAArB,UAAsB,SAAS;YACrB,IAAA,8BAAQ,CAAgB;YAChC,OAAO,SAAS,CAAC,QAAQ,KAAK,QAAQ,CAAC;SACxC;QAED,sCAAkB,GAAlB;YACE,IAAI,CAAC,qBAAqB,EAAE,CAAC;SAC9B;QAED,wCAAoB,GAApB;YACE,qBAAqB,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;SAC1D;QAED,yCAAqB,GAArB;YACE,IAAM,IAAI,GAAGC,oBAAW,CAAC,IAAI,CAAY,CAAC;YAC1C,IAAI,CAAC,IAAI;gBAAE,OAAO;YAClB,IAAI,CAAC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;YAC9D,IAAI,CAAC,mBAAmB,CAAC,YAAY,EAAE,IAAI,CAAC,kBAAkB,CAAC,CAAC;YAChE,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,iBAAiB,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;YAC9E,IAAI,CAAC,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAAC,kBAAkB,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;SACjF;QAED,qCAAiB,GAAjB,UAAkB,CAAC;YACjB,IAAI,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC,eAAe,CAAC;gBAAE,OAAO;YACjE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAC5B,CAAC,CAAC,eAAe,CAAC,GAAG,IAAI,CAAC;SAC3B;QAED,sCAAkB,GAAlB,UAAmB,CAAC;YAClB,IAAI,CAAC,CAAC,eAAe,CAAC;gBAAE,OAAO;YAC/B,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAC5B,CAAC,CAAC,eAAe,CAAC,GAAG,IAAI,CAAC;SAC3B;QAED,kCAAc,GAAd,UAAe,EAAS;gBAAT,kBAAS,EAAR,YAAI,EAAE,SAAC;YACrB,QAAQ,IAAI;gBACV,KAAK,WAAW;oBACd,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;oBAC3B,MAAM;gBACR,KAAK,SAAS;oBACZ,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC1B,MAAM;gBACR,KAAK,WAAW,EAAE;oBAChB,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;oBAC3B,MAAM;iBACP;gBACD,KAAK,UAAU,CAAC;gBAChB,KAAK,aAAa,EAAE;oBAClB,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC1B,MAAM;iBACP;gBACD;oBACE,MAAM;aACT;YACD,IAAI,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,IAAI,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,EAAE;gBACtE,KAAK,EAAE,CAAC;aACT;SACF;QAED,0BAAM,GAAN;YACU,IAAA,8BAAQ,CAAgB;YAChC,OAAO,QAAQ,CAAC;SACjB;QACH,gBAAC;IAAD,CAAC,CA1G8BJ,eAAe;;ICb9C;AACA,IAAO,IAAM,eAAe,GAAGN,mBAAmB,CAA8B,IAAI,CAAC,CAAC;;ICCtF;IACA;QAIE;YACE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YACpB,IAAI,CAAC,WAAW,GAAG,IAAIQ,mBAAY,EAAE,CAAC;SACvC;QAED,oCAAK,GAAL,UAAM,OAAO,EAAE,YAAY;YACzB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;YACvB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,YAAY,cAAA,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;SAChE;QAED,qCAAM,GAAN,UAAO,YAAY;YACjB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,YAAY,cAAA,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;SAChE;QAED,kCAAG,GAAH,UAAI,YAAY;YACd,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,YAAY,cAAA,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;YAC1E,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;SACrB;QACH,2BAAC;IAAD,CAAC,IAAA;IAED,IAAM,YAAY,GAAG;QACnB,QAAQ,EAAE,UAAC,EAAyB;gBAAvB,oBAAO,EAAE,8BAAY;SAAS;KAC5C,CAAC;IAIF;IACA;;QACsCP,oCAErC;QAIC,0BAAY,KAAK;YAAjB,YACE,kBAAM,KAAK,CAAC,SAWb;YAVS,IAAA,+BAAQ,CAAgB;YAEhC,KAAI,CAAC,gBAAgB,GAAG,IAAI,oBAAoB,EAAE,CAAC;YAEnD,KAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,SAAS,CAAC,UAAC,EAA8B;oBAA5B,oBAAO,EAAE,8BAAY,EAAE,YAAG;gBACvE,QAAQ,CAAC;oBACP,OAAO,EAAE,GAAG,GAAG,IAAI,GAAG,OAAO;oBAC7B,YAAY,EAAE,GAAG,GAAG,IAAI,GAAG,YAAY;iBACxC,CAAC,CAAC;aACJ,CAAC,CAAC;;SACJ;QAED,gDAAqB,GAArB,UAAsB,SAAS;YACrB,IAAA,8BAAQ,CAAgB;YAChC,OAAO,SAAS,CAAC,QAAQ,KAAK,QAAQ,CAAC;SACxC;QAED,iCAAM,GAAN;YACU,IAAA,8BAAQ,CAAgB;YAChC,QACEC,oBAAC,eAAe,CAAC,QAAQ,IAAC,KAAK,EAAE,IAAI,CAAC,gBAAgB,IACnD,QAAQ,CACgB,EAC3B;SACH;QA7BM,6BAAY,GAAG,YAAY,CAAC;QA8BrC,uBAAC;KAjCD,CAAsCI,eAAe;;IClCrD,IAAMK,cAAY,GAAG;QACnB,OAAO,EAAE,UAAC,EAAgB;gBAAd,8BAAY;SAAS;QACjC,QAAQ,EAAE,UAAC,EAAgB;gBAAd,8BAAY;SAAS;QAClC,KAAK,EAAE,UAAC,EAAgB;gBAAd,8BAAY;SAAS;KAChC,CAAC;IAMF;;QACgCV,8BAAyD;QAAzF;;SAgCC;QA7BC,0CAAqB,GAArB,UAAsB,SAAS;YACrB,IAAA,8BAAQ,CAAgB;YAChC,OAAO,SAAS,CAAC,QAAQ,KAAK,QAAQ,CAAC;SACxC;QAED,2BAAM,GAAN;YACE,IAAM,gBAAgB,GAAG,IAAI,CAAC,OAAO,CAAC;YAChC,IAAA,eAEQ,EADZ,oBAAO,EAAE,sBAAQ,EAAE,gBAAK,EAAE,oBAAO,EAAE,sBACvB,CAAC;YACf,QACEC,oBAAC,SAAS,IACR,OAAO,EAAE,UAAC,EAAQ;wBAAN,QAAC,EAAE,QAAC;oBACd,gBAAgB,CAAC,KAAK,CAAC,OAAO,EAAE,EAAE,CAAC,GAAA,EAAE,CAAC,GAAA,EAAE,CAAC,CAAC;oBAC1C,OAAO,CAAC,EAAE,YAAY,EAAE,EAAE,CAAC,GAAA,EAAE,CAAC,GAAA,EAAE,EAAE,CAAC,CAAC;iBACrC,EACD,QAAQ,EAAE,UAAC,EAAQ;wBAAN,QAAC,EAAE,QAAC;oBACf,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,GAAA,EAAE,CAAC,GAAA,EAAE,CAAC,CAAC;oBAClC,QAAQ,CAAC,EAAE,YAAY,EAAE,EAAE,CAAC,GAAA,EAAE,CAAC,GAAA,EAAE,EAAE,CAAC,CAAC;iBACtC,EACD,KAAK,EAAE,UAAC,EAAQ;wBAAN,QAAC,EAAE,QAAC;oBACZ,gBAAgB,CAAC,GAAG,CAAC,EAAE,CAAC,GAAA,EAAE,CAAC,GAAA,EAAE,CAAC,CAAC;oBAC/B,KAAK,CAAC,EAAE,YAAY,EAAE,EAAE,CAAC,GAAA,EAAE,CAAC,GAAA,EAAE,EAAE,CAAC,CAAC;iBACnC,IAEA,QAAQ,CACC,EACZ;SACH;QA9BM,uBAAY,GAAGS,cAAY,CAAC;QA+BrC,iBAAC;KAhCD,CAAgCL,eAAe,GAgC9C;IACD,UAAU,CAAC,WAAW,GAAG,eAAe,CAAC;;IC5CzC,IAAMM,OAAK,GAAG,UAAC,KAAK,EAAE,GAAG,EAAE,GAAG,IAAK,OAAA,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC,GAAA,CAAC;IAEvE,IAAMD,cAAY,GAAG;QACnB,OAAO,EAAE,UAAC,IAAI,KAAO;QACrB,MAAM,EAAE,UAAC,IAAI,KAAO;QACpB,OAAO,EAAE,UAAC,IAAI,KAAO;QACrB,MAAM,EAAE,UAAC,IAAI,KAAO;KACrB,CAAC;IAGF;;QACgCV,8BAAuC;QAIrE,oBAAY,KAAK;YAAjB,YACE,kBAAM,KAAK,CAAC,SAKb;YAHC,KAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YAEpB,KAAI,CAAC,UAAU,GAAG,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;;SAC9C;QAED,sCAAiB,GAAjB;YACU,IAAA,sCAAW,CAAkB;YACrC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;SACxC;QAED,0CAAqB,GAArB,UAAsB,SAAS;YACrB,IAAA,8BAAQ,CAAgB;YAChC,OAAO,SAAS,CAAC,QAAQ,KAAK,QAAQ,CAAC;SACxC;QAED,yCAAoB,GAApB;YACU,IAAA,sCAAW,CAAkB;YACrC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;SAC1C;QAED,+BAAU,GAAV,UAAW,EAA8B;gBAA5B,oBAAO,EAAE,8BAAY,EAAE,YAAG;YAC/B,IAAA,uDAKoD,EAJxD,cAAI,EACJ,YAAG,EACH,gBAAK,EACL,kBACwD,CAAC;YACrD,IAAA,eAEQ,EADZ,kBAAM,EAAE,oBAAO,EAAE,oBAAO,EAAE,kBACd,CAAC;YACf,IAAM,MAAM,GAAG,YAAY;mBACtBW,OAAK,CAAC,YAAY,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,CAAC,KAAK,YAAY,CAAC,CAAC;mBACrDA,OAAK,CAAC,YAAY,CAAC,CAAC,EAAE,GAAG,EAAE,MAAM,CAAC,KAAK,YAAY,CAAC,CAAC,CAAC;YAE3D,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,MAAM;gBAAE,OAAO,CAAC,EAAE,OAAO,SAAA,EAAE,YAAY,cAAA,EAAE,CAAC,CAAC;YAC/D,IAAI,IAAI,CAAC,MAAM,IAAI,MAAM;gBAAE,MAAM,CAAC,EAAE,OAAO,SAAA,EAAE,YAAY,cAAA,EAAE,CAAC,CAAC;YAC7D,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,MAAM;gBAAE,OAAO,CAAC,EAAE,OAAO,SAAA,EAAE,YAAY,cAAA,EAAE,CAAC,CAAC;YAC/D,IAAI,MAAM,IAAI,GAAG;gBAAE,MAAM,CAAC,EAAE,OAAO,SAAA,EAAE,YAAY,cAAA,EAAE,CAAC,CAAC;YAErD,IAAI,CAAC,MAAM,GAAG,MAAM,IAAI,CAAC,GAAG,CAAC;SAC9B;QAED,2BAAM,GAAN;YACU,IAAA,8BAAQ,CAAgB;YAChC,OAAOT,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SACtC;QAnDM,uBAAY,GAAGQ,cAAY,CAAC;QAoDrC,iBAAC;KArDD,CAAgCL,eAAe,GAqD9C;IAED,UAAU,CAAC,WAAW,GAAG,eAAe,CAAC;;ICpEzC;;QAC+BL,6BAAmB;QAAlD;;SAKC;QAJC,0BAAM,GAAN;YACU,IAAA,8BAAQ,CAAgB;YAChC,OAAO,QAAQ,CAAC;SACjB;QACH,gBAAC;IAAD,CAAC,CAL8BG,mBAAmB;;ICHlD;IAOA,IAAM,MAAM,GAAG;QACb,IAAI,EAAE;YACJ,QAAQ,EAAE,UAAU;SACrB;QACD,YAAY,EAAE;YACZ,QAAQ,EAAE,UAAU;YACpB,GAAG,EAAE,CAAC;YACN,IAAI,EAAE,CAAC;YACP,MAAM,EAAE,MAAM;YACd,KAAK,EAAE,MAAM;YACb,QAAQ,EAAE,QAAQ;YAClB,MAAM,EAAE,CAAC,CAAC;YACV,UAAU,EAAE,QAAQ;YACpB,OAAO,EAAE,CAAC;SACX;QACD,aAAa,EAAE;YACb,QAAQ,EAAE,UAAU;YACpB,GAAG,EAAE,CAAC;YACN,IAAI,EAAE,CAAC;YACP,MAAM,EAAE,MAAM;YACd,KAAK,EAAE,MAAM;YACb,QAAQ,EAAE,MAAM;SACjB;QACD,eAAe,EAAE;YACf,QAAQ,EAAE,UAAU;YACpB,GAAG,EAAE,CAAC;YACN,IAAI,EAAE,CAAC;YACP,MAAM,EAAE,MAAM;YACd,KAAK,EAAE,MAAM;YACb,QAAQ,EAAE,MAAM;YAChB,SAAS,EAAE,KAAK;YAChB,QAAQ,EAAE,KAAK;SAChB;QACD,gBAAgB,EAAE;YAChB,QAAQ,EAAE,UAAU;YACpB,GAAG,EAAE,CAAC;YACN,IAAI,EAAE,CAAC;YACP,KAAK,EAAE,MAAM;YACb,MAAM,EAAE,MAAM;SACf;KACF,CAAC;IAEF;;QAC2BH,yBAA+B;QAexD,eAAY,KAAK;YAAjB,YACE,kBAAM,KAAK,CAAC,SAIb;YAFC,KAAI,CAAC,cAAc,GAAG,KAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;YACrD,KAAI,CAAC,OAAO,GAAGY,eAAe,EAAE,CAAC;;SAClC;QAED,iCAAiB,GAAjB;YACE,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,IAAI,CAAC,cAAc,EAAE,CAAC;SACvB;;;;QAKD,oCAAoB,GAApB;YACE,IAAI,CAAC,aAAa,CAAC,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;YACtE,IAAI,CAAC,eAAe,CAAC,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;SACzE;QAED,8BAAc,GAAd;YACE,IAAM,IAAI,GAAS,EAAE,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;YAE5F,IAAI,CAAC,eAAe,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC;YAC7C,IAAI,CAAC,eAAe,CAAC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC;YAE7C,IAAM,YAAY,GAAG,CAAC,CAAC;YACvB,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,KAAK,GAAM,IAAI,CAAC,KAAK,GAAG,YAAY,OAAI,CAAC;YACnE,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,MAAM,GAAM,IAAI,CAAC,MAAM,GAAG,YAAY,OAAI,CAAC;YACrE,IAAI,CAAC,aAAa,CAAC,SAAS,GAAG,YAAY,CAAC;YAC5C,IAAI,CAAC,aAAa,CAAC,UAAU,GAAG,YAAY,CAAC;YAErC,IAAA,sCAAY,CAAgB;YACpC,YAAY,CAAC,IAAI,CAAC,CAAC;SACpB;QAED,+BAAe,GAAf;YACE,IAAI,CAAC,QAAQ,GAAGH,oBAAW,CAAC,IAAI,CAAC,OAAO,CAAC,OAAQ,CAAgB,CAAC;YAElE,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAClD,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,MAAM,CAAC,YAAY,CAAC,CAAC;YAC5D,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YAE7C,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YACnD,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,MAAM,CAAC,aAAa,CAAC,CAAC;YAC9D,IAAI,CAAC,aAAa,CAAC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;YACnE,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;YAElD,IAAI,CAAC,cAAc,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YACpD,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YAEpD,IAAI,CAAC,eAAe,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YACrD,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,MAAM,CAAC,eAAe,CAAC,CAAC;YAClE,IAAI,CAAC,eAAe,CAAC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;YACrE,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;YAEpD,IAAI,CAAC,gBAAgB,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YACtD,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,MAAM,CAAC,gBAAgB,CAAC,CAAC;YACpE,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;SACzD;QAED,sBAAM,GAAN;YACE,IAAM,eAKQ,EAJZ,8BAAY,EACZ,iCAA6B,EAC7B,gBAAK,EACL,uEACY,CAAC;YAEf,QACER,oBAAC,SAAS,IACR,GAAG,EAAE,IAAI,CAAC,OAAO;gBAEjBA,oBAAC,SAAS;6BACR,KAAK,EAAE,KAAK,gBAAQ,MAAM,CAAC,IAAI,EAAK,KAAK,IAAK,MAAM,CAAC,IAAI,IACrD,SAAS,EACb,CACQ,EACZ;SACH;QA7FM,kBAAY,GAAG;YACpB,kBAAkB,EAAE,KAAK;SAC1B,CAAC;QA4FJ,YAAC;KA/FD,CAA2BE,mBAAmB;;IC5C9C;;;QAGa,YAAY,GAAG,UAC1B,gBAA0C,EAAE,kBAAgC;QAE5E,IAAI,qBAAqB,GAAG,kBAAkB,EAAE,CAAC;QACjD,IAAM,UAAU,GAAG,IAAI,GAAG,EAAE,CAAC;QAC7B;YAA8BH,mCAAyC;YAAvE;;aAcC;YAXC,2CAAiB,GAAjB;gBACE,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;aACtB;YAED,8CAAoB,GAApB;gBACE,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;aACzB;YAED,gCAAM,GAAN;gBACE,OAAOC,oBAAC,gBAAgB,eAAK,IAAI,CAAC,KAAK,EAAM,qBAAqB,EAAI,CAAC;aACxE;YACH,sBAAC;SAAA,CAd6BE,mBAAmB,GAchD;QACD,eAAe,CAAC,MAAM,GAAG;YACvB,qBAAqB,GAAG,kBAAkB,EAAE,CAAC;YAC7C,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,CAAC,OAAO,CAAC,UAAA,SAAS,IAAI,OAAA,SAAS,CAAC,WAAW,EAAE,GAAA,CAAC,CAAC;SAC/E,CAAC;QACF,OAAO,eAAe,CAAC;IACzB,CAAC;;IChCD;QACa,iBAAiB,GAAwB,UACpD,SAAS,EAAE,yBAA8B;QAA9B,0CAAA,EAAA,8BAA8B;QAEzC,IAAM,iBAAiB,GAAG,UAAC,SAAS,EAAE,KAAK;YACzC,MAAM,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC,OAAO,CAAC,UAAC,YAAY;gBAC1D,IAAM,WAAW,GAAG,yBAAyB,CAAC,YAAY,CAAC,EAAE,CAAC;gBAC9D,IAAI,WAAW,IAAI,SAAS,CAAC,YAAY,CAAC,KAAK,KAAK,CAAC,YAAY,CAAC,EAAE;oBAClE,WAAW,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,CAAC;iBACtC;aACF,CAAC,CAAC;SACJ,CAAC;QAEF,IAAI,gBAAiC,CAAC;QACtC,IAAI,YAAY,GAAG,IAAI,CAAC;QACxB,IAAI,gBAAgB,GAAG,IAAI,CAAC;QAC5B,IAAM,YAAY,GAAG,UAAC,MAAM,EAAE,OAAQ,EAAE,QAAS;YAC/C,IAAM,YAAY,GAAG,UAAC,SAAS;gBAC7B,IAAI,YAAY,KAAK,IAAI,EAAE;oBACzB,YAAY,GAAG,SAAS,CAAC;iBAC1B;gBACD,IAAM,WAAW,GAAG,MAAM,cAAM,SAAS,GAAI,OAAO,CAAC,CAAC;gBACtD,IAAM,KAAK,gBAAQ,SAAS,EAAK,WAAW,CAAE,CAAC;gBAE/C,IAAI,OAAO,QAAQ,KAAK,UAAU,EAAE;oBAClC,QAAQ,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;iBAC5B;gBACD,IAAI,YAAY,KAAK,gBAAgB,EAAE;oBACrC,IAAI,gBAAgB,KAAK,YAAY,EAAE;wBACrC,iBAAiB,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;wBACvC,gBAAgB,GAAG,YAAY,CAAC;qBACjC;oBACD,YAAY,GAAG,IAAI,CAAC;iBACrB;gBAED,OAAO,WAAW,CAAC;aACpB,CAAC;YACF,gBAAgB,GAAG,YAAY,CAAC;YAChC,SAAS,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;SAClC,CAAC;QACF,IAAM,iBAAiB,GAAG,UAAC,KAAK,EAAE,MAAM,EAAE,OAAO;YAC/C,YAAY,CAAC,UAAA,KAAK;;gBAAI;oBACpB,GAAC,KAAK,IAAG,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,OAAO,CAAC;;aACtC,CAAC,CAAC;SACL,CAAC;QAEF,OAAO;YACL,YAAY,cAAA;YACZ,iBAAiB,mBAAA;SAClB,CAAC;IACJ,CAAC;;IClDD,IAAM,kBAAkB,GAAG,UAAC,MAAM,EAAE,UAAU,EAAE,OAAe;QAC7D;YAAwBH,6BAAmB;YAA3C;;aAMC;YAHC,0BAAM,GAAN;gBACE,OAAOC,oBAAC,MAAM,eAAK,UAAU,EAAM,IAAI,CAAC,KAAK,EAAI,CAAC;aACnD;YACH,gBAAC;SAAA,CANuBE,mBAAmB,GAM1C;QACD,SAAS,CAAC,UAAU,GAAG,MAAM,CAAC,UAAU,CAAC;QACzC,MAAM,CAAC,MAAM,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAClC,OAAO,SAAS,CAAC;IACnB,CAAC,CAAC;IAMF;IAEA;AACA,QAAa,cAAc,GAAG,UAAA,UAAU,IAAI,OAAA,UAAC,MAAM;QACjD,IAAM,KAAK,GAAG,EAAE,CAAC;QACjB,IAAM,OAAO,GAAG,EAAE,CAAC;QACnB,IAAM,gBAAgB,GAAI,MAA2B,CAAC,UAAU,CAAC;QAEjE,MAAM,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,OAAO,CAAC,UAAC,EAA4C;gBAA5C,kBAA4C,EAA3C,iBAAS,EAAE,qBAAa;YACjE,IAAM,SAAS,GAAG,UAAU,CAAC,aAAa,CAAC,CAAC;YAC5C,IAAI,SAAS,IAAI,SAAS,KAAK,MAAM,CAAC,aAAa,CAAC,EAAE;gBACpD,KAAK,CAAC,SAAS,CAAC,GAAG,SAAS,CAAC;aAC9B;YACD,OAAO,CAAC,aAAa,CAAC,GAAG,SAAS,IAAI,MAAM,CAAC,aAAa,CAAC,CAAC;SAC7D,CAAC,CAAC;QAEH,OAAO,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,CAAC;cAChC,kBAAkB,CAAC,MAAM,EAAE,KAAK,EAAE,OAAO,CAAC,GAAG,MAAM,CAAC;IAC1D,CAAC,GAAA;;ICrCD;AACA,IAEA;QACa,OAAO,GAAGU,eAAe,CAAC;QACrC,OAAO,EAAEC,oBAAoB,CAAC,CAAC,OAAO,OAAO,KAAK,WAAW,IAAI,OAAO,GAAG,MAAM,CAAC;KACnF,CAAC;;;;;;;;;;;;;;;;;;;;;;"}