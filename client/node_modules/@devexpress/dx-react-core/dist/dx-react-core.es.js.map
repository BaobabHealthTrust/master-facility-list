{"version":3,"file":"dx-react-core.es.js","sources":["../src/plugin-based/contexts.ts","../src/plugin-based/plugin-indexer.tsx","../src/plugin-based/constants.ts","../src/utils/with-props-from-context.tsx","../src/plugin-based/plugin.tsx","../src/plugin-based/template-placeholder.tsx","../src/plugin-based/plugin-host.tsx","../src/plugin-based/helpers.ts","../src/plugin-based/action.tsx","../src/plugin-based/getter.tsx","../src/plugin-based/template.tsx","../src/plugin-based/template-connector.tsx","../src/draggable/touch-strategy.ts","../src/draggable/gesture-cover.ts","../src/draggable/mouse-strategy.ts","../src/draggable/shared-events.ts","../src/draggable/selection-utils.ts","../src/draggable.tsx","../src/drag-drop/context.ts","../src/drag-drop/provider.tsx","../src/drag-drop/source.tsx","../src/drag-drop/target.tsx","../src/ref-holder.tsx","../src/sizer.tsx","../src/utils/connect-props.tsx","../src/utils/state-helper.ts","../src/utils/with-components.tsx","../src/utils/ref-type.ts"],"sourcesContent":["import * as React from 'react';\nimport { PluginHost, PluginPositionFn } from '@devexpress/dx-core';\n\n/** @internal */\nexport interface TemplateHostInterface {\n  params(...args): any;\n  templates(...args): any;\n}\n\n/** @internal */\nexport const PluginHostContext = React.createContext<PluginHost | null>(null);\n/** @internal */\nexport const PositionContext = React.createContext<PluginPositionFn>(() => []);\n/** @internal */\nexport const TemplateHostContext = React.createContext<TemplateHostInterface | null>(null);\n","import * as React from 'react';\nimport { PluginPositionFn } from '@devexpress/dx-core';\nimport { PositionContext } from './contexts';\n\ntype MemoizedPluginPositionFn =\n  (index: number, positionContext: PluginPositionFn) => PluginPositionFn;\n\ntype PluginIndexerProps = {\n  children: React.ReactNode;\n};\n\n/** @internal */\nexport class PluginIndexer extends React.PureComponent<PluginIndexerProps> {\n  indexes: { [index: number]: PluginPositionFn } = {};\n  memoize: MemoizedPluginPositionFn = (index, positionContext) => {\n    if (this.indexes[index]) return this.indexes[index];\n\n    const fn: PluginPositionFn = () => {\n      const calculatedPosition = positionContext();\n      return [...calculatedPosition, index];\n    };\n    this.indexes[index] = fn;\n\n    return fn;\n  }\n  render() {\n    const { children } = this.props;\n    return (\n      <PositionContext.Consumer>\n        {positionContext => (\n          React.Children.map(children, (child: any, index: number) => {\n            if (!child || !child.type) return child;\n            const childPosition = this.memoize(index, positionContext);\n\n            return (\n              <PositionContext.Provider key={String(index)} value={childPosition}>\n                {child}\n              </PositionContext.Provider>\n            );\n          })\n        )}\n      </PositionContext.Consumer>\n    );\n  }\n}\n","/** @internal */\nexport const PLUGIN_HOST_CONTEXT = 'dxcore_pluginHost_context';\n/** @internal */\nexport const POSITION_CONTEXT = 'dxcore_position_context';\n/** @internal */\nexport const TEMPLATE_HOST_CONTEXT = 'dxcore_templateHost_context';\n\n/** @internal */\nexport const RERENDER_TEMPLATE_EVENT = Symbol('rerenderTemplate');\n/** @internal */\nexport const RERENDER_TEMPLATE_SCOPE_EVENT = Symbol('rerenderTemplateScope');\n/** @internal */\nexport const UPDATE_CONNECTION_EVENT = Symbol('updateConnection');\n","import * as React from 'react';\nimport { PluginHostContext, PositionContext } from '../plugin-based/contexts';\nimport { PLUGIN_HOST_CONTEXT, POSITION_CONTEXT } from '../plugin-based/constants';\n\n/** @internal */\nexport const withContext = (Context, name) => Component => props => (\n  <Context.Consumer>\n    {context => (\n      <Component {...props} {...{ [name]: context }} />\n    )}\n  </Context.Consumer>\n);\n\n/** @internal */\nexport const withHostAndPosition = Component => withContext(\n  PluginHostContext,\n  PLUGIN_HOST_CONTEXT,\n)(withContext(PositionContext, POSITION_CONTEXT)(Component));\n","import * as React from 'react';\nimport { InnerPlugin } from '@devexpress/dx-core';\nimport { PluginIndexer } from './plugin-indexer';\nimport { PLUGIN_HOST_CONTEXT, POSITION_CONTEXT } from './constants';\nimport { withHostAndPosition } from '../utils/with-props-from-context';\nimport { PluginContextProps } from './plugin-context-prop-types';\nimport { IDependency } from '../types';\n\nexport interface PluginProps {\n  /** React elements that expose the plugin's state and actions and render the plugin's UI. */\n  children: React.ReactNode;\n  name?: string;\n  dependencies?: IDependency[];\n}\n\n/** @internal */\nexport class PluginBase extends React.PureComponent<PluginProps & PluginContextProps> {\n  plugin!: InnerPlugin;\n\n  componentDidMount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost, [POSITION_CONTEXT]: position } = this.props;\n    const { name, dependencies } = this.props;\n    this.plugin = {\n      position,\n      name,\n      dependencies,\n      container: true,\n    };\n    pluginHost.registerPlugin(this.plugin);\n  }\n\n  componentDidUpdate() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n    pluginHost.ensureDependencies();\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n    pluginHost.unregisterPlugin(this.plugin);\n  }\n\n  render() {\n    const { children } = this.props;\n    return (\n      <PluginIndexer>\n        {children}\n      </PluginIndexer>\n    );\n  }\n}\n\nexport const Plugin: React.ComponentType<PluginProps> = withHostAndPosition(PluginBase);\n","import * as React from 'react';\nimport { shallowEqual } from '@devexpress/dx-core';\nimport {\n  PLUGIN_HOST_CONTEXT, RERENDER_TEMPLATE_EVENT,\n  TEMPLATE_HOST_CONTEXT, RERENDER_TEMPLATE_SCOPE_EVENT,\n} from './constants';\nimport { withContext } from '../utils/with-props-from-context';\nimport { PluginHostContext, TemplateHostContext, TemplateHostInterface } from './contexts';\nimport { PluginContextProps } from './plugin-context-prop-types';\nimport { TemplateBase } from './template';\n\nexport interface TemplatePlaceholderProps {\n  /** The name of a template to be rendered. */\n  name?: string;\n  /** An object passed to the related template. */\n  params?: object;\n  children?: (content) => any;\n}\ninterface TemplateHostContextProps {\n  [TEMPLATE_HOST_CONTEXT: string]: TemplateHostInterface;\n}\n\ntype Props = TemplatePlaceholderProps & PluginContextProps & TemplateHostContextProps;\n\nconst getRenderingData = (props: Props): { params?: object, templates: TemplateBase[] } => {\n  const { name, params } = props;\n  if (name) {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = props;\n    return {\n      params,\n      templates: pluginHost.collect(`${name}Template`)\n        .filter(template => template.predicate(params))\n        .reverse(),\n    };\n  }\n  const { [TEMPLATE_HOST_CONTEXT]: templateHost } = props;\n  return {\n    params: params || templateHost.params(),\n    templates: templateHost.templates(),\n  };\n};\n\nclass TemplatePlaceholderBase extends React.Component<Props> {\n  subscription = {\n    [RERENDER_TEMPLATE_EVENT]: (id: number) => {\n      if (this.template && this.template.id === id) {\n        this.forceUpdate();\n      }\n    },\n    [RERENDER_TEMPLATE_SCOPE_EVENT]: (name: string) => {\n      const { name: propsName } = this.props;\n      if (propsName === name) {\n        this.forceUpdate();\n      }\n    },\n  };\n  template: TemplateBase | null = null;\n  params?: object = {};\n\n  componentDidMount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n    pluginHost.registerSubscription(this.subscription);\n  }\n\n  shouldComponentUpdate(nextProps: Props) {\n    const { params, templates } = getRenderingData(nextProps);\n    const { children } = this.props;\n    const [template] = templates;\n    return children !== nextProps.children || this.template !== template\n      || !shallowEqual(this.params, params);\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n    pluginHost.unregisterSubscription(this.subscription);\n  }\n\n  render() {\n    const { params, templates } = getRenderingData(this.props);\n\n    this.params = params;\n    [this.template] = templates;\n    const restTemplates = templates.slice(1);\n\n    let content: ((...args) => any) | null = null;\n    if (this.template) {\n      const { children: templateContent } = this.template;\n\n      content = templateContent() || null;\n      if (content && typeof content === 'function') {\n        content = content(params);\n      }\n    }\n\n    const { children: templatePlaceholder } = this.props;\n    return (\n      <TemplateHostContext.Provider\n        value={{\n          templates: () => restTemplates,\n          params: () => this.params,\n        }}\n      >\n        {templatePlaceholder ? templatePlaceholder(content) : content}\n      </TemplateHostContext.Provider>\n    );\n  }\n}\n\n/** A React component to which a related Template is rendered. */\nexport const TemplatePlaceholder: React.ComponentType<TemplatePlaceholderProps> = withContext(\n  PluginHostContext, PLUGIN_HOST_CONTEXT,\n)(\n  withContext(TemplateHostContext, TEMPLATE_HOST_CONTEXT)(TemplatePlaceholderBase),\n);\n","import * as React from 'react';\nimport { PluginHost as PluginHostCore } from '@devexpress/dx-core';\nimport { PluginIndexer } from './plugin-indexer';\nimport { TemplatePlaceholder } from './template-placeholder';\nimport { PluginHostContext } from './contexts';\n\nexport interface PluginHostProps {\n  /** Plugin React elements. */\n  children: React.ReactNode;\n}\n\n/** @internal */\nclass PluginHostBase extends React.PureComponent<PluginHostProps> {\n  host: PluginHostCore;\n\n  constructor(props: PluginHostProps) {\n    super(props);\n\n    this.host = new PluginHostCore();\n  }\n\n  render() {\n    const { children } = this.props;\n\n    return (\n      <PluginHostContext.Provider value={this.host}>\n        <PluginIndexer>\n          {children}\n        </PluginIndexer>\n        <TemplatePlaceholder name=\"root\" />\n      </PluginHostContext.Provider>\n    );\n  }\n}\n\nexport const PluginHost: React.ComponentType<PluginHostProps> = PluginHostBase;\n","import { shallowEqual } from '@devexpress/dx-core';\n\n/** @internal */\nexport const getAvailableGetters = (\n  pluginHost,\n  getGetterValue = getterName => pluginHost.get(`${getterName}Getter`),\n) => {\n  const trackedDependencies = {};\n\n  let getters;\n  if (typeof Proxy !== 'undefined') {\n    getters = new Proxy({}, {\n      get(target, prop) {\n        if (typeof prop !== 'string') return undefined;\n        const result = getGetterValue(prop);\n        trackedDependencies[prop] = result;\n        return result;\n      },\n      getOwnPropertyDescriptor(target, prop) {\n        return {\n          configurable: true,\n          enumerable: true,\n          value: this.get!(target as any, prop, undefined),\n        };\n      },\n      ownKeys() {\n        return pluginHost.knownKeys('Getter');\n      },\n    });\n  } else {\n    getters = pluginHost.knownKeys('Getter')\n      .reduce((acc, getterName) => {\n        Object.defineProperty(acc, getterName, {\n          get: () => {\n            const result = getGetterValue(getterName);\n            trackedDependencies[getterName] = result;\n            return result;\n          },\n        });\n        return acc;\n      }, {});\n  }\n\n  return { getters, trackedDependencies };\n};\n\n/** @internal */\nexport const isTrackedDependenciesChanged = (\n  pluginHost,\n  prevTrackedDependencies,\n  getGetterValue = getterName => pluginHost.get(`${getterName}Getter`),\n) => {\n  const trackedDependencies = Object.keys(prevTrackedDependencies)\n    // tslint:disable-next-line: prefer-object-spread\n    .reduce((acc, getterName) => Object.assign(acc, {\n      [getterName]: getGetterValue(getterName),\n    }), {});\n\n  return !shallowEqual(prevTrackedDependencies, trackedDependencies);\n};\n\n/** @internal */\nexport const getAvailableActions = (\n  pluginHost,\n  getAction = actionName => pluginHost.collect(`${actionName}Action`).slice().reverse()[0],\n) => {\n  let actions;\n  if (typeof Proxy !== 'undefined') {\n    actions = new Proxy({}, {\n      get(target, prop) {\n        if (typeof prop !== 'string') return undefined;\n        return getAction(prop);\n      },\n      getOwnPropertyDescriptor(target, prop) {\n        return {\n          configurable: true,\n          enumerable: true,\n          value: this.get!(target as any, prop, undefined),\n        };\n      },\n      ownKeys() {\n        return pluginHost.knownKeys('Action');\n      },\n    });\n  } else {\n    actions = pluginHost.knownKeys('Action')\n      .reduce((acc, actionName) => {\n        Object.defineProperty(acc, actionName, {\n          get: () => getAction(actionName),\n        });\n        return acc;\n      }, {});\n  }\n  return actions;\n};\n","import * as React from 'react';\nimport { InnerPlugin } from '@devexpress/dx-core';\nimport {\n  getAvailableGetters,\n  getAvailableActions,\n} from './helpers';\nimport { PLUGIN_HOST_CONTEXT, POSITION_CONTEXT } from './constants';\nimport { withHostAndPosition } from '../utils/with-props-from-context';\nimport { PluginContextProps } from './plugin-context-prop-types';\nimport { Actions, Getters } from './getter';\n\nexport interface ActionProps {\n  /** The action name. */\n  name: string;\n  /** A function that is called when the action is executed. */\n  action: (payload: any, getters: Getters, actions: Actions) => void;\n}\n\nclass ActionBase extends React.PureComponent<ActionProps & PluginContextProps> {\n  plugin: InnerPlugin;\n\n  constructor(props) {\n    super(props);\n\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost, [POSITION_CONTEXT]: positionContext } = props;\n    const { name } = props;\n\n    this.plugin = {\n      position: () => positionContext(),\n      [`${name}Action`]: (params) => {\n        const { action } = this.props;\n        const { getters } = getAvailableGetters(\n          pluginHost,\n          getterName => pluginHost.get(`${getterName}Getter`, this.plugin),\n        );\n        let nextParams = params;\n        const actions = getAvailableActions(\n          pluginHost,\n          actionName => (actionName === name\n            ? (newParams) => { nextParams = newParams; }\n            : pluginHost.collect(`${actionName}Action`, this.plugin).slice().reverse()[0]),\n        );\n        action(params, getters, actions);\n        const nextAction = pluginHost.collect(`${name}Action`, this.plugin).slice().reverse()[0];\n        if (nextAction) {\n          nextAction(nextParams);\n        }\n      },\n    };\n\n    pluginHost.registerPlugin(this.plugin);\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n\n    pluginHost.unregisterPlugin(this.plugin);\n  }\n\n  render() {\n    return null;\n  }\n}\n\nexport const Action: React.ComponentType<ActionProps> = withHostAndPosition(ActionBase);\n","import * as React from 'react';\nimport {\n  isTrackedDependenciesChanged,\n  getAvailableGetters,\n  getAvailableActions,\n} from './helpers';\nimport { UPDATE_CONNECTION_EVENT, PLUGIN_HOST_CONTEXT, POSITION_CONTEXT } from './constants';\nimport { withHostAndPosition } from '../utils/with-props-from-context';\nimport { InnerPlugin } from '@devexpress/dx-core';\nimport { PluginContextProps } from './plugin-context-prop-types';\n\nexport interface GetterProps {\n  /** The Getter's name. */\n  name: string;\n  /** The shared value. */\n  value?: any;\n  /*** A function that calculates a value depending on the values other Getters expose.\n   * The value is computed each time a related Getter's value changes.\n   * Applies only if `value` is not defined.\n   */\n  computed?: (\n    getters: Getters,\n    actions: Actions,\n  ) => any;\n}\nexport type Getters = { readonly [getterName: string]: any };\nexport type Actions = { [actionName: string]: (payload?: any) => void };\n\nclass GetterBase extends React.PureComponent<GetterProps & PluginContextProps> {\n  plugin: InnerPlugin;\n\n  constructor(props) {\n    super(props);\n\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost, [POSITION_CONTEXT]: positionContext } = props;\n    const { name } = props;\n\n    let lastComputed;\n    let lastTrackedDependencies = {};\n    let lastResult;\n\n    this.plugin = {\n      position: () => positionContext(),\n      [`${name}Getter`]: (original) => {\n        const { value, computed } = this.props;\n        if (computed === undefined) return value;\n\n        const getGetterValue = getterName => ((getterName === name)\n          ? original\n          : pluginHost.get(`${getterName}Getter`, this.plugin));\n\n        if (computed === lastComputed\n          && !isTrackedDependenciesChanged(pluginHost, lastTrackedDependencies, getGetterValue)) {\n          return lastResult;\n        }\n\n        const { getters, trackedDependencies } = getAvailableGetters(pluginHost, getGetterValue);\n        const actions = getAvailableActions(pluginHost);\n\n        lastComputed = computed;\n        lastTrackedDependencies = trackedDependencies;\n        lastResult = computed(getters, actions);\n        return lastResult;\n      },\n    };\n\n    pluginHost.registerPlugin(this.plugin);\n  }\n\n  componentDidUpdate() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n\n    pluginHost.broadcast(UPDATE_CONNECTION_EVENT);\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n\n    pluginHost.unregisterPlugin(this.plugin);\n  }\n\n  render() {\n    return null;\n  }\n}\n\nexport const Getter: React.ComponentType<GetterProps> = withHostAndPosition(GetterBase);\n","import * as React from 'react';\nimport { InnerPlugin } from '@devexpress/dx-core';\nimport {\n  PLUGIN_HOST_CONTEXT, POSITION_CONTEXT,\n  RERENDER_TEMPLATE_EVENT, RERENDER_TEMPLATE_SCOPE_EVENT,\n} from './constants';\nimport { withHostAndPosition } from '../utils/with-props-from-context';\nimport { PluginContextProps } from './plugin-context-prop-types';\n\nexport interface TemplateProps {\n  // tslint:disable-next-line:max-line-length\n  /** The template name. The `root` name is reserved. A template called `root` is rendered as the plugin based component's root. */\n  name: string;\n  // tslint:disable-next-line:max-line-length\n  /** A predicate function that returns a Boolean value that specifies whether the template should be rendered. */\n  predicate?: (params: object) => boolean;\n  /** A markup or function that returns a markup based on the specified parameters. */\n  children: React.ReactNode | ((params: object) => React.ReactNode);\n}\n\nlet globalTemplateId = 0;\n/** @internal */\nexport class TemplateBase extends React.PureComponent<TemplateProps & PluginContextProps> {\n  id: number;\n  plugin: InnerPlugin;\n  children: () => any;\n\n  constructor(props) {\n    super(props);\n\n    this.children = () => void 0;\n\n    globalTemplateId += 1;\n    this.id = globalTemplateId;\n\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost, [POSITION_CONTEXT]: positionContext } = props;\n    const { name, predicate } = props;\n\n    this.plugin = {\n      position: () => positionContext(),\n      [`${name}Template`]: {\n        id: this.id,\n        predicate: params => (predicate ? predicate(params) : true),\n        children: () => {\n          const { children } = this.props;\n          return children;\n        },\n      },\n    };\n    pluginHost.registerPlugin(this.plugin);\n    pluginHost.broadcast(RERENDER_TEMPLATE_SCOPE_EVENT, name);\n  }\n\n  componentDidUpdate() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n    pluginHost.broadcast(RERENDER_TEMPLATE_EVENT, this.id);\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n    const { name } = this.props;\n    pluginHost.unregisterPlugin(this.plugin);\n    pluginHost.broadcast(RERENDER_TEMPLATE_SCOPE_EVENT, name);\n  }\n\n  render() {\n    return null;\n  }\n}\n\n/*** A React component that defines a markup that is rendered\n * as the corresponding TemplatePlaceholder.\n */\nexport const Template: React.ComponentType<TemplateProps> = withHostAndPosition(TemplateBase);\n","import * as React from 'react';\nimport { UPDATE_CONNECTION_EVENT } from './constants';\nimport {\n  isTrackedDependenciesChanged,\n  getAvailableGetters,\n  getAvailableActions,\n} from './helpers';\nimport { PluginHostContext } from './contexts';\nimport { Getters, Actions } from './getter';\n\nexport interface TemplateConnectorProps {\n  /** A function that renders a markup using Getters and Actions passed as arguments. */\n  children: (\n    getters: Getters,\n    actions: Actions,\n  ) => React.ReactNode;\n}\n\n/** @internal */\nclass TemplateConnectorBase extends React.Component<TemplateConnectorProps> {\n  trackedDependencies: { [key: string]: { get: (args) => any }};\n  subscription: { [UPDATE_CONNECTION_EVENT: string]: (args) => void };\n\n  constructor(props, context) {\n    super(props, context);\n\n    this.trackedDependencies = {};\n    this.subscription = {\n      [UPDATE_CONNECTION_EVENT]: () => this.updateConnection(),\n    };\n  }\n\n  componentDidMount() {\n    const pluginHost = this.context;\n    pluginHost.registerSubscription(this.subscription);\n  }\n\n  componentWillUnmount() {\n    const pluginHost = this.context;\n    pluginHost.unregisterSubscription(this.subscription);\n  }\n\n  updateConnection() {\n    const pluginHost = this.context;\n\n    if (isTrackedDependenciesChanged(pluginHost, this.trackedDependencies)) {\n      this.forceUpdate();\n    }\n  }\n\n  render() {\n    const pluginHost = this.context;\n    const { children } = this.props;\n\n    const { getters, trackedDependencies } = getAvailableGetters(pluginHost);\n    this.trackedDependencies = trackedDependencies;\n    const actions = getAvailableActions(pluginHost);\n\n    return children(getters, actions);\n  }\n}\n\nTemplateConnectorBase.contextType = PluginHostContext;\n\n/** A React component that provides access to Getters and Actions within a Template. */\nexport const TemplateConnector: React.ComponentType<TemplateConnectorProps> = TemplateConnectorBase;\n","const TIMEOUT = 180;\n\n/** @internal */\nexport class TouchStrategy {\n  delegate: any;\n  touchStartTimeout: any;\n  dragging: boolean;\n  mouseInitialOffset: null;\n\n  constructor(delegate) {\n    this.delegate = delegate;\n    this.touchStartTimeout = null;\n    this.dragging = false;\n  }\n\n  isDragging() {\n    return this.dragging;\n  }\n\n  isWaiting() {\n    return !!this.touchStartTimeout;\n  }\n\n  cancelWaiting() {\n    clearTimeout(this.touchStartTimeout);\n    this.touchStartTimeout = undefined;\n  }\n\n  start(e) {\n    const { clientX: x, clientY: y } = e.touches[0];\n    this.touchStartTimeout = setTimeout(() => {\n      this.delegate.onStart({ x, y });\n      this.dragging = true;\n    }, TIMEOUT);\n  }\n\n  move(e) {\n    this.cancelWaiting();\n    if (this.dragging) {\n      const { clientX, clientY } = e.touches[0];\n      e.preventDefault();\n      this.delegate.onMove({ x: clientX, y: clientY });\n    }\n  }\n\n  end(e) {\n    this.cancelWaiting();\n    if (this.dragging) {\n      const { clientX, clientY } = e.changedTouches[0];\n      this.delegate.onEnd({ x: clientX, y: clientY });\n    }\n    this.mouseInitialOffset = null;\n    this.dragging = false;\n  }\n}\n","/* globals document:true */\n\nlet gestureCover: HTMLElement;\n/** @internal */\nexport const toggleGestureCover = (toggle, cursor?) => {\n  let style: React.CSSProperties = {\n    pointerEvents: toggle ? 'all' : 'none',\n  };\n  if (toggle && cursor) {\n    style = {\n      ...style,\n      cursor,\n    };\n  }\n  if (!gestureCover) {\n    style = {\n      ...style,\n      position: 'fixed',\n      top: 0,\n      right: 0,\n      left: 0,\n      bottom: 0,\n      opacity: 0,\n      zIndex: 2147483647,\n    };\n\n    gestureCover = document.createElement('div');\n    document.body.appendChild(gestureCover);\n  }\n  Object.keys(style).forEach((key) => { gestureCover.style[key] = style[key]; });\n};\n","/* globals window:true document:true */\n\nimport { toggleGestureCover } from './gesture-cover';\n\nconst BOUNDARY = 10;\nconst clamp = (value, min, max) => Math.max(Math.min(value, max), min);\nconst isBoundExceeded = (\n  { x: initialX, y: initialY }, { x, y },\n) => clamp(x, initialX - BOUNDARY, initialX + BOUNDARY) !== x\n  || clamp(y, initialY - BOUNDARY, initialY + BOUNDARY) !== y;\n\n/** @internal */\nexport class MouseStrategy {\n  delegate: any;\n  mouseInitialOffset: any;\n  dragging: boolean;\n  e: any;\n\n  constructor(delegate) {\n    this.delegate = delegate;\n    this.mouseInitialOffset = null;\n    this.dragging = false;\n  }\n\n  isDragging() {\n    return this.dragging;\n  }\n\n  start(e) {\n    const { clientX: x, clientY: y } = e;\n    this.e = e;\n    this.mouseInitialOffset = { x, y };\n  }\n\n  move(e) {\n    const { clientX: x, clientY: y } = e;\n    let dragStarted = false;\n    if (!this.dragging && this.mouseInitialOffset) {\n      if (isBoundExceeded(this.mouseInitialOffset, { x, y })) {\n        this.delegate.onStart(this.mouseInitialOffset);\n        const selection = window.getSelection && window.getSelection();\n        if (selection && selection.removeAllRanges) {\n          selection.removeAllRanges();\n        }\n        dragStarted = true;\n        this.dragging = true;\n      }\n    }\n    if (this.dragging) {\n      e.preventDefault();\n      this.delegate.onMove({ x, y });\n    }\n    if (dragStarted) {\n      const { cursor } = window.getComputedStyle(document.elementFromPoint(x, y)!);\n      toggleGestureCover(true, cursor);\n    }\n  }\n\n  end(e) {\n    if (this.dragging) {\n      const { clientX: x, clientY: y } = e;\n      toggleGestureCover(false);\n      this.delegate.onEnd({ x, y });\n    }\n    this.mouseInitialOffset = null;\n    this.dragging = false;\n  }\n}\n","/* globals window:true */\n\nimport { EventEmitter } from '@devexpress/dx-core';\n\nlet eventEmitter;\n/** @internal */\nexport const getSharedEventEmitter = () => {\n  if (!eventEmitter) {\n    eventEmitter = new EventEmitter();\n\n    ['mousemove', 'mouseup', 'touchmove', 'touchend', 'touchcancel']\n      .forEach(name => window.addEventListener(\n        name, e => eventEmitter.emit([name, e]), { passive: false },\n      ));\n  }\n  return eventEmitter;\n};\n","/* globals document:true window:true */\n\n/** @internal */\nexport const clear = () => {\n  const selection = window.getSelection && window.getSelection();\n\n  if (selection) {\n    if (selection.empty) {\n      selection.empty();\n    } else if (selection.removeAllRanges) {\n      selection.removeAllRanges();\n    }\n  }\n};\n","import * as React from 'react';\nimport { unstable_batchedUpdates, findDOMNode } from 'react-dom';\nimport { TouchStrategy } from './draggable/touch-strategy';\nimport { MouseStrategy } from './draggable/mouse-strategy';\nimport { getSharedEventEmitter } from './draggable/shared-events';\nimport { clear } from './draggable/selection-utils';\n\nconst draggingHandled = Symbol('draggingHandled');\n\ntype DraggableProps = {\n  onStart?: (args) => void;\n  onUpdate?: (args) => void;\n  onEnd?: (args) => void;\n};\n\n/** @internal */\nexport class Draggable extends React.Component<DraggableProps> {\n  mouseStrategy: MouseStrategy;\n  touchStrategy: TouchStrategy;\n\n  constructor(props, context) {\n    super(props, context);\n    const delegate = {\n      onStart: ({ x, y }) => {\n        const { onStart } = this.props;\n        if (!onStart) return;\n        unstable_batchedUpdates(() => {\n          onStart({ x, y });\n        });\n      },\n      onMove: ({ x, y }) => {\n        const { onUpdate } = this.props;\n        if (!onUpdate) return;\n        unstable_batchedUpdates(() => {\n          onUpdate({ x, y });\n        });\n      },\n      onEnd: ({ x, y }) => {\n        const { onEnd } = this.props;\n        if (!onEnd) return;\n        unstable_batchedUpdates(() => {\n          onEnd({ x, y });\n        });\n      },\n    };\n\n    this.mouseStrategy = new MouseStrategy(delegate);\n    this.touchStrategy = new TouchStrategy(delegate);\n\n    this.mouseDownListener = this.mouseDownListener.bind(this);\n    this.touchStartListener = this.touchStartListener.bind(this);\n    this.globalListener = this.globalListener.bind(this);\n  }\n\n  componentDidMount() {\n    getSharedEventEmitter().subscribe(this.globalListener);\n    this.setupNodeSubscription();\n  }\n\n  shouldComponentUpdate(nextProps) {\n    const { children } = this.props;\n    return nextProps.children !== children;\n  }\n\n  componentDidUpdate() {\n    this.setupNodeSubscription();\n  }\n\n  componentWillUnmount() {\n    getSharedEventEmitter().unsubscribe(this.globalListener);\n  }\n\n  setupNodeSubscription() {\n    const node = findDOMNode(this) as Element;\n    if (!node) return;\n    node.removeEventListener('mousedown', this.mouseDownListener);\n    node.removeEventListener('touchstart', this.touchStartListener);\n    node.addEventListener('mousedown', this.mouseDownListener, { passive: true });\n    node.addEventListener('touchstart', this.touchStartListener, { passive: true });\n  }\n\n  mouseDownListener(e) {\n    if (this.touchStrategy.isWaiting() || e[draggingHandled]) return;\n    this.mouseStrategy.start(e);\n    e[draggingHandled] = true;\n  }\n\n  touchStartListener(e) {\n    if (e[draggingHandled]) return;\n    this.touchStrategy.start(e);\n    e[draggingHandled] = true;\n  }\n\n  globalListener([name, e]) {\n    switch (name) {\n      case 'mousemove':\n        this.mouseStrategy.move(e);\n        break;\n      case 'mouseup':\n        this.mouseStrategy.end(e);\n        break;\n      case 'touchmove': {\n        this.touchStrategy.move(e);\n        break;\n      }\n      case 'touchend':\n      case 'touchcancel': {\n        this.touchStrategy.end(e);\n        break;\n      }\n      default:\n        break;\n    }\n    if (this.mouseStrategy.isDragging() || this.touchStrategy.isDragging()) {\n      clear();\n    }\n  }\n\n  render() {\n    const { children } = this.props;\n    return children;\n  }\n}\n","import * as React from 'react';\nimport { DragDropProviderCore } from './provider';\n\n/** @internal */\nexport const DragDropContext = React.createContext<DragDropProviderCore | null>(null);\n","import * as React from 'react';\n\nimport { EventEmitter } from '@devexpress/dx-core';\nimport { DragDropContext } from './context';\n\n/** @internal */\nexport class DragDropProviderCore {\n  payload: null;\n  dragEmitter: EventEmitter;\n\n  constructor() {\n    this.payload = null;\n    this.dragEmitter = new EventEmitter();\n  }\n\n  start(payload, clientOffset) {\n    this.payload = payload;\n    this.dragEmitter.emit({ clientOffset, payload: this.payload });\n  }\n\n  update(clientOffset) {\n    this.dragEmitter.emit({ clientOffset, payload: this.payload });\n  }\n\n  end(clientOffset) {\n    this.dragEmitter.emit({ clientOffset, payload: this.payload, end: true });\n    this.payload = null;\n  }\n}\n\nconst defaultProps = {\n  onChange: ({ payload, clientOffset }) => {},\n};\ntype DragDropProviderDefaultProps = Readonly<typeof defaultProps>;\ntype DragDropProviderProps = Partial<DragDropProviderDefaultProps>;\n\n/** @internal */\n// tslint:disable-next-line: max-classes-per-file\nexport class DragDropProvider extends React.Component<\n  DragDropProviderProps & DragDropProviderDefaultProps\n> {\n  static defaultProps = defaultProps;\n  dragDropProvider: DragDropProviderCore;\n\n  constructor(props) {\n    super(props);\n    const { onChange } = this.props;\n\n    this.dragDropProvider = new DragDropProviderCore();\n\n    this.dragDropProvider.dragEmitter.subscribe(({ payload, clientOffset, end }) => {\n      onChange({\n        payload: end ? null : payload,\n        clientOffset: end ? null : clientOffset,\n      });\n    });\n  }\n\n  shouldComponentUpdate(nextProps) {\n    const { children } = this.props;\n    return nextProps.children !== children;\n  }\n\n  render() {\n    const { children } = this.props;\n    return (\n      <DragDropContext.Provider value={this.dragDropProvider}>\n        {children}\n      </DragDropContext.Provider>\n    );\n  }\n}\n","import * as React from 'react';\nimport { DragDropContext } from './context';\nimport { Draggable } from '../draggable';\n\nconst defaultProps = {\n  onStart: ({ clientOffset }) => {},\n  onUpdate: ({ clientOffset }) => {},\n  onEnd: ({ clientOffset }) => {},\n};\ntype DragSourceDefaultProps = Readonly<typeof defaultProps>;\ntype DragSourceProps = {\n  payload: any;\n} & Partial<DragSourceDefaultProps>;\n\n/** @internal */\nexport class DragSource extends React.Component<DragSourceProps & DragSourceDefaultProps> {\n  static defaultProps = defaultProps;\n\n  shouldComponentUpdate(nextProps) {\n    const { children } = this.props;\n    return nextProps.children !== children;\n  }\n\n  render() {\n    const dragDropProvider = this.context;\n    const {\n      onStart, onUpdate, onEnd, payload, children,\n    } = this.props;\n    return (\n      <Draggable\n        onStart={({ x, y }) => {\n          dragDropProvider.start(payload, { x, y });\n          onStart({ clientOffset: { x, y } });\n        }}\n        onUpdate={({ x, y }) => {\n          dragDropProvider.update({ x, y });\n          onUpdate({ clientOffset: { x, y } });\n        }}\n        onEnd={({ x, y }) => {\n          dragDropProvider.end({ x, y });\n          onEnd({ clientOffset: { x, y } });\n        }}\n      >\n        {children}\n      </Draggable>\n    );\n  }\n}\nDragSource.contextType = DragDropContext;\n","import * as React from 'react';\nimport { findDOMNode } from 'react-dom';\nimport { DragDropContext } from './context';\n\nconst clamp = (value, min, max) => Math.max(Math.min(value, max), min);\n\nconst defaultProps = {\n  onEnter: (args) => {},\n  onOver: (args) => {},\n  onLeave: (args) => {},\n  onDrop: (args) => {},\n};\ntype DropTargetDefaultProps = Readonly<typeof defaultProps>;\n\n/** @internal */\nexport class DropTarget extends React.Component<DropTargetDefaultProps> {\n  static defaultProps = defaultProps;\n  isOver: boolean;\n\n  constructor(props) {\n    super(props);\n\n    this.isOver = false;\n\n    this.handleDrag = this.handleDrag.bind(this);\n  }\n\n  componentDidMount() {\n    const { dragEmitter } = this.context;\n    dragEmitter.subscribe(this.handleDrag);\n  }\n\n  shouldComponentUpdate(nextProps) {\n    const { children } = this.props;\n    return nextProps.children !== children;\n  }\n\n  componentWillUnmount() {\n    const { dragEmitter } = this.context;\n    dragEmitter.unsubscribe(this.handleDrag);\n  }\n\n  handleDrag({ payload, clientOffset, end }) {\n    const {\n      left,\n      top,\n      right,\n      bottom,\n    } = (findDOMNode(this) as Element).getBoundingClientRect();\n    const {\n      onDrop, onEnter, onLeave, onOver,\n    } = this.props;\n    const isOver = clientOffset\n      && clamp(clientOffset.x, left, right) === clientOffset.x\n      && clamp(clientOffset.y, top, bottom) === clientOffset.y;\n\n    if (!this.isOver && isOver) onEnter({ payload, clientOffset });\n    if (this.isOver && isOver) onOver({ payload, clientOffset });\n    if (this.isOver && !isOver) onLeave({ payload, clientOffset });\n    if (isOver && end) onDrop({ payload, clientOffset });\n\n    this.isOver = isOver && !end;\n  }\n\n  render() {\n    const { children } = this.props;\n    return React.Children.only(children);\n  }\n}\n\nDropTarget.contextType = DragDropContext;\n","import * as React from 'react';\n\n/** @internal */\nexport class RefHolder extends React.PureComponent {\n  render() {\n    const { children } = this.props;\n    return children;\n  }\n}\n","/* globals document:true */\n\nimport * as React from 'react';\nimport { findDOMNode } from 'react-dom';\nimport { RefHolder } from './ref-holder';\nimport { SizerProps, Size } from './types';\n\nconst styles = {\n  root: {\n    position: 'relative',\n  },\n  triggersRoot: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    overflow: 'hidden',\n    zIndex: -1,\n    visibility: 'hidden',\n    opacity: 0,\n  },\n  expandTrigger: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    overflow: 'auto',\n  },\n  contractTrigger: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    overflow: 'auto',\n    minHeight: '1px',\n    minWidth: '1px',\n  },\n  contractNotifier: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '200%',\n    height: '200%',\n  },\n};\n\n/** @internal */\nexport class Sizer extends React.PureComponent<SizerProps> {\n  static defaultProps = {\n    containerComponent: 'div',\n  };\n\n  rootRef: React.RefObject<RefHolder>;\n  // Though there properties cannot be assigned in constructor\n  // they will be assigned when component is mount.\n  rootNode!: HTMLElement;\n  triggersRoot!: HTMLDivElement;\n  expandTrigger!: HTMLDivElement;\n  expandNotifier!: HTMLDivElement;\n  contractTrigger!: HTMLDivElement;\n  contractNotifier!: HTMLDivElement;\n\n  constructor(props) {\n    super(props);\n\n    this.setupListeners = this.setupListeners.bind(this);\n    this.rootRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.createListeners();\n    this.setupListeners();\n  }\n\n  // There is no need to remove listeners as divs are removed from DOM when component is unmount.\n  // But there is a little chance that component unmounting and 'scroll' event happen roughly\n  // at the same time so that `setupListeners` is called after component is unmount.\n  componentWillUnmount() {\n    this.expandTrigger.removeEventListener('scroll', this.setupListeners);\n    this.contractTrigger.removeEventListener('scroll', this.setupListeners);\n  }\n\n  setupListeners() {\n    const size: Size = { height: this.rootNode.clientHeight, width: this.rootNode.clientWidth };\n\n    this.contractTrigger.scrollTop = size.height;\n    this.contractTrigger.scrollLeft = size.width;\n\n    const scrollOffset = 2;\n    this.expandNotifier.style.width = `${size.width + scrollOffset}px`;\n    this.expandNotifier.style.height = `${size.height + scrollOffset}px`;\n    this.expandTrigger.scrollTop = scrollOffset;\n    this.expandTrigger.scrollLeft = scrollOffset;\n\n    const { onSizeChange } = this.props;\n    onSizeChange(size);\n  }\n\n  createListeners() {\n    this.rootNode = findDOMNode(this.rootRef.current!) as HTMLElement;\n\n    this.triggersRoot = document.createElement('div');\n    Object.assign(this.triggersRoot.style, styles.triggersRoot);\n    this.rootNode.appendChild(this.triggersRoot);\n\n    this.expandTrigger = document.createElement('div');\n    Object.assign(this.expandTrigger.style, styles.expandTrigger);\n    this.expandTrigger.addEventListener('scroll', this.setupListeners);\n    this.triggersRoot.appendChild(this.expandTrigger);\n\n    this.expandNotifier = document.createElement('div');\n    this.expandTrigger.appendChild(this.expandNotifier);\n\n    this.contractTrigger = document.createElement('div');\n    Object.assign(this.contractTrigger.style, styles.contractTrigger);\n    this.contractTrigger.addEventListener('scroll', this.setupListeners);\n    this.triggersRoot.appendChild(this.contractTrigger);\n\n    this.contractNotifier = document.createElement('div');\n    Object.assign(this.contractNotifier.style, styles.contractNotifier);\n    this.contractTrigger.appendChild(this.contractNotifier);\n  }\n\n  render() {\n    const {\n      onSizeChange,\n      containerComponent: Container,\n      style,\n      ...restProps\n    } = this.props;\n\n    return (\n      <RefHolder\n        ref={this.rootRef}\n      >\n        <Container // NOTE: should have `position: relative`\n          style={style ? { ...styles.root, ...style } : styles.root}\n          {...restProps}\n        />\n      </RefHolder>\n    );\n  }\n}\n","import * as React from 'react';\n\ntype RenderComponentProps = {\n  update: () => void;\n};\n\n/*** A function that creates a new component that allows you to pass additional properties\n * to the wrapped component.\n */\nexport const connectProps = (\n  WrappedComponent: React.ComponentType<any>, getAdditionalProps: () => object,\n): React.ComponentType<any> & { update(): void } => {\n  let storedAdditionalProps = getAdditionalProps();\n  const components = new Set();\n  class RenderComponent extends React.PureComponent<RenderComponentProps> {\n    static update: () => void;\n\n    componentDidMount() {\n      components.add(this);\n    }\n\n    componentWillUnmount() {\n      components.delete(this);\n    }\n\n    render() {\n      return <WrappedComponent {...this.props} {...storedAdditionalProps} />;\n    }\n  }\n  RenderComponent.update = () => {\n    storedAdditionalProps = getAdditionalProps();\n    Array.from(components.values()).forEach(component => component.forceUpdate());\n  };\n  return RenderComponent;\n};\n","import { CreateStateHelperFn } from '../types';\n\n/** @internal */\nexport const createStateHelper: CreateStateHelperFn = (\n  component, controlledStateProperties = {},\n) => {\n  const notifyStateChange = (nextState, state) => {\n    Object.keys(controlledStateProperties).forEach((propertyName) => {\n      const changeEvent = controlledStateProperties[propertyName]();\n      if (changeEvent && nextState[propertyName] !== state[propertyName]) {\n        changeEvent(nextState[propertyName]);\n      }\n    });\n  };\n\n  let lastStateUpdater: (state) => void;\n  let initialState = null;\n  let lastInitialState = null;\n  const applyReducer = (reduce, payload?, callback?) => {\n    const stateUpdater = (prevState) => {\n      if (initialState === null) {\n        initialState = prevState;\n      }\n      const stateChange = reduce({ ...prevState }, payload);\n      const state = { ...prevState, ...stateChange };\n\n      if (typeof callback === 'function') {\n        callback(state, prevState);\n      }\n      if (stateUpdater === lastStateUpdater) {\n        if (lastInitialState !== initialState) {\n          notifyStateChange(state, initialState);\n          lastInitialState = initialState;\n        }\n        initialState = null;\n      }\n\n      return stateChange;\n    };\n    lastStateUpdater = stateUpdater;\n    component.setState(stateUpdater);\n  };\n  const applyFieldReducer = (field, reduce, payload) => {\n    applyReducer(state => ({\n      [field]: reduce(state[field], payload),\n    }));\n  };\n\n  return {\n    applyReducer,\n    applyFieldReducer,\n  };\n};\n","import * as React from 'react';\n\nconst makeBoundComponent = (Target, components, exposed: object) => {\n  class Component extends React.PureComponent {\n    static components: PluginComponents;\n\n    render() {\n      return <Target {...components} {...this.props} />;\n    }\n  }\n  Component.components = Target.components;\n  Object.assign(Component, exposed);\n  return Component;\n};\n\nexport type PluginComponents = { [key: string]: string };\nexport interface ITargetComponent {\n  components: PluginComponents;\n}\n// type ITargetComponentStatic = new() => ITargetComponent;\n\n/** @internal */\nexport const withComponents = components => (Target) => {\n  const props = {};\n  const exposed = {};\n  const targetComponents = (Target as ITargetComponent).components;\n\n  Object.entries(targetComponents).forEach(([fieldName, componentName]: [string, string]) => {\n    const component = components[componentName];\n    if (component && component !== Target[componentName]) {\n      props[fieldName] = component;\n    }\n    exposed[componentName] = component || Target[componentName];\n  });\n\n  return Object.keys(props).length > 0\n    ? makeBoundComponent(Target, props, exposed) : Target;\n};\n","/* globals Element */\nimport * as PropTypes from 'prop-types';\n\n/** @internal */\nexport const RefType = PropTypes.shape({\n  current: PropTypes.instanceOf((typeof Element !== 'undefined') ? Element : Object),\n});\n"],"names":["React.createContext","tslib_1.__extends","React.createElement","React.Children","React.PureComponent","React.Component","PluginHostCore","defaultProps","clamp","React.createRef","PropTypes.shape","PropTypes.instanceOf"],"mappings":"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"}