{"version":3,"file":"dx-grid-core.es.js","sources":["../src/plugins/integrated-grouping/constants.ts","../src/plugins/grid-core/computeds.ts","../src/plugins/sorting-state/reducers.ts","../src/plugins/sorting-state/helpers.ts","../src/utils/merge-sort.ts","../src/utils/hierarchical-data.ts","../src/plugins/integrated-sorting/computeds.ts","../src/plugins/filtering-state/reducers.ts","../src/plugins/filtering-state/helpers.ts","../src/plugins/filtering-state/computeds.ts","../src/plugins/integrated-filtering/computeds.ts","../src/plugins/grouping-state/constants.ts","../src/plugins/grouping-state/reducers.ts","../src/plugins/grouping-state/helpers.ts","../src/plugins/integrated-grouping/computeds.ts","../src/plugins/custom-grouping/computeds.ts","../src/plugins/grouping-panel/helpers.ts","../src/plugins/paging-state/reducers.ts","../src/plugins/integrated-paging/helpers.ts","../src/plugins/integrated-paging/computeds.ts","../src/plugins/paging-panel/helpers.ts","../src/utils/common-reducers.ts","../src/plugins/selection-state/reducers.ts","../src/plugins/integrated-selection/computeds.ts","../src/plugins/editing-state/reducers.ts","../src/plugins/editing-state/computeds.ts","../src/plugins/editing-state/helpers.ts","../src/plugins/table-column-reordering/constants.ts","../src/plugins/table-column-reordering/reducers.ts","../src/plugins/table/constants.ts","../src/plugins/table-column-reordering/computeds.ts","../src/plugins/table-column-resizing/computeds.ts","../src/plugins/table-column-resizing/reducers.ts","../src/plugins/table-edit-column/constants.ts","../src/plugins/table-edit-row/constants.ts","../src/plugins/table-header-row/constants.ts","../src/plugins/table-edit-column/helpers.ts","../src/plugins/table-edit-column/computeds.ts","../src/plugins/table-edit-row/helpers.ts","../src/plugins/table-edit-row/computeds.ts","../src/plugins/table-filter-row/constants.ts","../src/plugins/table-filter-row/helpers.ts","../src/plugins/table-filter-row/computeds.ts","../src/plugins/table-group-row/constants.ts","../src/plugins/table-group-row/helpers.ts","../src/plugins/table-group-row/computeds.ts","../src/plugins/table-header-row/helpers.ts","../src/plugins/table-header-row/computeds.ts","../src/plugins/table-band-header/constants.ts","../src/plugins/table-band-header/helpers.ts","../src/plugins/table-band-header/computeds.ts","../src/plugins/row-detail-state/reducers.ts","../src/plugins/table-row-detail/constants.ts","../src/plugins/table-row-detail/helpers.ts","../src/plugins/table-row-detail/computeds.ts","../src/plugins/table-selection/constants.ts","../src/plugins/table-selection/helpers.ts","../src/plugins/table-selection/computeds.ts","../src/utils/virtual-table.ts","../src/plugins/table/helpers.ts","../src/utils/column-extension.ts","../src/plugins/table/computeds.ts","../src/plugins/table-column-visibility/computeds.ts","../src/plugins/table-column-visibility/helpers.ts","../src/plugins/column-chooser/computeds.ts","../src/plugins/column-chooser/reducers.ts","../src/plugins/tree-data-state/reducers.ts","../src/plugins/custom-tree-data/constants.ts","../src/plugins/custom-tree-data/computeds.ts","../src/plugins/table-tree-column/helpers.ts","../src/plugins/search-state/reducers.ts","../src/plugins/search-state/computeds.ts","../src/plugins/data-type-provider/computeds.ts","../src/plugins/table-fixed-columns/constants.ts","../src/plugins/table-fixed-columns/helpers.ts","../src/plugins/table-fixed-columns/computeds.ts","../src/plugins/integrated-summary/computeds.ts","../src/plugins/table-summary-row/constants.ts","../src/plugins/table-summary-row/computeds.ts","../src/plugins/table-summary-row/helpers.ts","../src/utils/column-geometries.ts","../src/utils/table.ts","../src/utils/group-panel.ts","../src/plugins/virtual-table/helpers.ts","../src/plugins/virtual-table/computeds.ts","../src/plugins/virtual-table-state/utils.ts","../src/plugins/virtual-table-state/helpers.ts","../src/plugins/virtual-table-state/computeds.ts","../src/index.ts"],"sourcesContent":["export const GRID_GROUP_TYPE = Symbol('group');\nexport const GRID_GROUP_CHECK = Symbol(`${GRID_GROUP_TYPE.toString()}_check`);\nexport const GRID_GROUP_LEVEL_KEY = Symbol(`${GRID_GROUP_TYPE.toString()}_levelKey`);\nexport const GRID_GROUP_COLLAPSED_ROWS = Symbol(`${GRID_GROUP_TYPE.toString()}_collapsedRows`);\n","import { GRID_GROUP_CHECK } from '../integrated-grouping/constants';\nimport { GetRowIdFn, Row, RowId, GetCellValueFn, Column } from '../../types';\nimport { PureComputed } from '@devexpress/dx-core';\n\nconst warnIfRowIdUndefined: PureComputed<[GetRowIdFn]> = getRowId => (row) => {\n  const result = getRowId(row);\n  if (!row[GRID_GROUP_CHECK] && result === undefined) {\n    // tslint:disable-next-line: no-console\n    console.warn('The row id is undefined. Check the getRowId function. The row is', row);\n  }\n  return result;\n};\n\nexport const rowIdGetter: PureComputed<[GetRowIdFn, Row[]]> = (getRowId, rows) => {\n  if (!getRowId) {\n    const map = new Map(rows.map((row, rowIndex) => [row, rowIndex]) as [any, number]);\n    return (row: Row) => map.get(row) as RowId;\n  }\n  return warnIfRowIdUndefined(getRowId);\n};\n\nconst defaultGetCellValue: GetCellValueFn = (row, columnName) => row[columnName];\n\nexport const cellValueGetter: PureComputed<[GetCellValueFn, Column[]]> = (\n  getCellValue = defaultGetCellValue, columns,\n) => {\n  let useFastAccessor = true;\n  const map = columns.reduce((acc, column) => {\n    if (column.getCellValue) {\n      useFastAccessor = false;\n      acc[column.name] = column.getCellValue;\n    }\n    return acc;\n  }, {});\n\n  if (useFastAccessor) {\n    return getCellValue;\n  }\n\n  return (row, columnName) => (map[columnName]\n    ? map[columnName](row, columnName)\n    : getCellValue(row, columnName));\n};\n","import { ColumnSortingState, ChangeSortingPayload, Sorting } from '../../types';\nimport { PureReducer, slice } from '@devexpress/dx-core';\n\nexport const changeColumnSorting: PureReducer<ColumnSortingState, ChangeSortingPayload> = (\n  state, {\n  columnName, direction, keepOther, sortIndex,\n}) => {\n  const { sorting } = state;\n\n  let nextSorting: any[] = [];\n  if (keepOther === true) {\n    nextSorting = sorting as Sorting[];\n  }\n  if (Array.isArray(keepOther)) {\n    nextSorting = slice(sorting)\n      .filter(s =>\n        keepOther.indexOf(s.columnName) > -1);\n  }\n\n  const columnSortingIndex = sorting.findIndex(s => s.columnName === columnName);\n  const columnSorting = sorting[columnSortingIndex];\n  const newColumnSorting = {\n    columnName,\n    direction: direction\n      || (!columnSorting || columnSorting.direction === 'desc' ? 'asc' : 'desc'),\n  };\n\n  if (columnSortingIndex > -1) {\n    nextSorting = slice(nextSorting);\n    nextSorting.splice(columnSortingIndex, 1);\n  }\n\n  if (direction !== null) {\n    const newIndexFallback = columnSortingIndex > -1 ? columnSortingIndex : nextSorting.length;\n    const newIndex = sortIndex !== undefined ? sortIndex : newIndexFallback;\n    nextSorting = slice(nextSorting);\n    nextSorting.splice(newIndex, 0, newColumnSorting);\n  }\n\n  return {\n    sorting: nextSorting,\n  };\n};\n","import {\n  KeepOtherSorting, GetColumnSortingDirectionFn, GetPersistentSortedColumnsFn,\n  CalculateKeepOtherFn,\n} from '../../types';\n\nconst unique = (arr: any[]) => [...Array.from(new Set(arr))];\n\nexport const getColumnSortingDirection: GetColumnSortingDirectionFn = (\n  sorting, columnName,\n) => {\n  const columnSorting = sorting.filter(s => s.columnName === columnName)[0];\n  return columnSorting ? columnSorting.direction : null;\n};\n\nexport const getPersistentSortedColumns: GetPersistentSortedColumnsFn = (\n  sorting, columnExtensions = [],\n) => columnExtensions.reduce((acc, { columnName, sortingEnabled }) => {\n  if (sortingEnabled === false) {\n    if (sorting.findIndex(sortItem => sortItem.columnName === columnName) > -1) {\n      acc.push(columnName);\n    }\n  }\n  return acc;\n}, [] as string[]);\n\nexport const calculateKeepOther: CalculateKeepOtherFn = (\n  sorting, keepOther, persistentSortedColumns = [],\n) => {\n  if (!persistentSortedColumns.length) return keepOther as KeepOtherSorting;\n  if (!keepOther) return persistentSortedColumns as KeepOtherSorting;\n\n  return Array.isArray(keepOther)\n    ? unique([...keepOther, ...persistentSortedColumns])\n    : unique([...sorting.map(item => item.columnName), ...persistentSortedColumns]);\n};\n","import { slice } from '@devexpress/dx-core';\nimport { MergeFn, SortArrayToAuxiliaryFn, CompareFn } from '../types';\n\n/* eslint-disable no-plusplus, no-param-reassign, no-use-before-define, no-constant-condition */\n/* tslint:disable no-increment-decrement */\n\nconst merge: MergeFn = (array, auxiliary, lo, mid, hi, compare) => {\n  let i = lo;\n  let j = mid + 1;\n  let k = lo;\n  while (true) {\n    const cmp = compare(array[i], array[j]);\n    if (cmp <= 0) {\n      auxiliary[k++] = array[i++];\n      if (i > mid) {\n        do {\n          auxiliary[k++] = array[j++];\n        } while (j <= hi);\n        break;\n      }\n    } else {\n      auxiliary[k++] = array[j++];\n      if (j > hi) {\n        do {\n          auxiliary[k++] = array[i++];\n        } while (i <= mid);\n        break;\n      }\n    }\n  }\n};\n\nconst sortArrayToAuxiliary: SortArrayToAuxiliaryFn = (array, auxiliary, lo, hi, compare) => {\n  if (hi < lo) return;\n  if (hi === lo) {\n    auxiliary[lo] = array[lo];\n    return;\n  }\n  const mid = Math.floor(lo + ((hi - lo) / 2));\n  sortAuxiliaryToArray(array, auxiliary, lo, mid, compare);\n  sortAuxiliaryToArray(array, auxiliary, mid + 1, hi, compare);\n  merge(array, auxiliary, lo, mid, hi, compare);\n};\n\nconst sortAuxiliaryToArray: SortArrayToAuxiliaryFn = (array, auxiliary, lo, hi, compare) => {\n  if (hi <= lo) return;\n  const mid = Math.floor(lo + ((hi - lo) / 2));\n  sortArrayToAuxiliary(array, auxiliary, lo, mid, compare);\n  sortArrayToAuxiliary(array, auxiliary, mid + 1, hi, compare);\n  merge(auxiliary, array, lo, mid, hi, compare);\n};\n\nexport default (\n  array: any[] | ReadonlyArray<any>,\n  compare: CompareFn = (a, b): number => {\n    if (a < b) return -1;\n    if (a > b) return 1;\n    return 0;\n  },\n) => {\n  const result = slice(array);\n  const auxiliary = slice(array);\n  sortAuxiliaryToArray(result, auxiliary, 0, result.length - 1, compare);\n  return result;\n};\n","import { RowsToTreeFn, TreeToRowsFn, TreeNode } from '../types';\n\nexport const NODE_CHECK = Symbol('node');\n\nexport const rowsToTree: RowsToTreeFn = (rows, getRowLevelKey) => {\n  if (!rows.length) return rows;\n\n  const levels: any[] = [{ children: [] }];\n\n  rows.forEach((row) => {\n    const levelKey = getRowLevelKey(row);\n    if (levelKey) {\n      const levelIndex = levels.slice(1)\n        .findIndex(level => getRowLevelKey(level.root) === levelKey) + 1;\n      if (levelIndex > 0) {\n        levels.splice(levelIndex, levels.length - levelIndex);\n      }\n      const node = { [NODE_CHECK]: true, root: row, children: [] };\n      levels[levels.length - 1].children.push(node);\n      levels.push(node);\n    } else {\n      levels[levels.length - 1].children.push(row);\n    }\n  });\n\n  return levels[0].children;\n};\n\nexport const treeToRows: TreeToRowsFn = (tree, rows = []) => {\n  if (!tree.length) return tree;\n  return tree.reduce(\n    (acc, node) => {\n      if (node[NODE_CHECK]) {\n        acc.push(node.root);\n        treeToRows(node.children, rows);\n      } else {\n        acc.push(node);\n      }\n      return acc;\n    },\n    rows as TreeNode[],\n  );\n};\n","import { PureComputed } from '@devexpress/dx-core';\nimport mergeSort from '../../utils/merge-sort';\nimport { NODE_CHECK, rowsToTree, treeToRows } from '../../utils/hierarchical-data';\nimport {\n  Row, GetRowLevelKeyFn, CompareFn, CreateCompareFn, SortedRowsFn, TreeNode,\n} from '../../types';\n\nconst defaultCompare = (a: any, b: any) => {\n  if (a === b) return 0;\n\n  if (a === null) {\n    return b === undefined ? -1 : 1;\n  }\n  if (a === undefined) {\n    return 1;\n  }\n  if (b === null || b === undefined) {\n    return -1;\n  }\n  return a < b ? -1 : 1;\n};\n\nconst createCompare: CreateCompareFn = (\n  sorting, getColumnCompare, getComparableValue,\n) => sorting.reduceRight((prevCompare, columnSorting) => {\n  const { columnName } = columnSorting;\n  const inverse = columnSorting.direction === 'desc';\n  const columnCompare = (getColumnCompare && getColumnCompare(columnName)) || defaultCompare;\n\n  return (aRow: Row, bRow: Row) => {\n    const a = getComparableValue(aRow, columnName);\n    const b = getComparableValue(bRow, columnName);\n    const result = columnCompare(a, b);\n\n    if (result !== 0) {\n      return inverse ? -result : result;\n    }\n    return prevCompare(aRow, bRow);\n  };\n}, (...args: any[]) => 0);\n\nconst sortTree: PureComputed<[TreeNode[], CompareFn]> = (tree, compare) => {\n  const sortedTree = tree.map((node) => {\n    if (node[NODE_CHECK]) {\n      return {\n        ...node,\n        children: sortTree(node.children, compare),\n      };\n    }\n    return node;\n  });\n\n  return mergeSort(\n    sortedTree, (a, b) => compare(a[NODE_CHECK] ? a.root : a, b[NODE_CHECK] ? b.root : b),\n  );\n};\n\nconst sortHierarchicalRows: PureComputed<[Row[], CompareFn, GetRowLevelKeyFn]> = (\n  rows, compare, getRowLevelKey,\n) => {\n  const tree = rowsToTree(rows, getRowLevelKey);\n\n  const sortedTree = sortTree(tree, compare);\n\n  return treeToRows(sortedTree);\n};\n\nexport const sortedRows: SortedRowsFn = (\n  rows, sorting, getCellValue, getColumnCompare, isGroupRow, getRowLevelKey,\n) => {\n  if (!sorting.length || !rows.length) return rows;\n\n  let compare;\n  if (!getRowLevelKey) {\n    compare = createCompare(sorting, getColumnCompare, getCellValue);\n    return mergeSort(rows.slice(), compare);\n  }\n\n  compare = createCompare(sorting, getColumnCompare, (row, columnName) => {\n    if (isGroupRow && isGroupRow(row)) {\n      if (row.groupedBy === columnName) {\n        return row.value;\n      }\n      return undefined;\n    }\n    return getCellValue(row, columnName);\n  });\n  return sortHierarchicalRows(\n    rows,\n    compare,\n    getRowLevelKey,\n  );\n};\n","import { Filter, ChangeFilterPayload } from '../../types';\nimport { PureReducer, slice } from '@devexpress/dx-core';\n\nexport const changeColumnFilter: PureReducer<Filter[], ChangeFilterPayload> = (\n  filters, { columnName, config },\n) => {\n  const filterIndex = filters.findIndex(f => f.columnName === columnName);\n  const nextState = slice(filters);\n\n  if (config) {\n    const filter = { columnName, ...config };\n    if (filterIndex > -1) {\n      nextState.splice(filterIndex, 1, filter);\n    } else {\n      nextState.push(filter);\n    }\n  } else if (filterIndex > -1) {\n    nextState.splice(filterIndex, 1);\n  }\n\n  return nextState;\n};\n","import { PureComputed } from '@devexpress/dx-core';\nimport { Filter } from '../../types';\n\nexport const getColumnFilterConfig: PureComputed<\n  [Filter[], string], Filter | null\n> = (filters, columnName) => (\n  filters.length && filters.filter(s => s.columnName === columnName)[0] || null\n);\n","import { FilterExpression, Filter } from '../../types';\nimport { PureComputed } from '@devexpress/dx-core';\n\nexport const filterExpression: PureComputed<\n  [Filter[], FilterExpression?], FilterExpression\n> = (filters, expression) => {\n  // tslint:disable-next-line: no-object-literal-type-assertion\n  const selfFilterExpr = { filters, operator: 'and' as 'and' } as FilterExpression;\n  if (!expression) {\n    return selfFilterExpr;\n  }\n  return {\n    operator: 'and' as 'and',\n    filters: [expression, selfFilterExpr] as FilterExpression[],\n  };\n};\n","import { NODE_CHECK, rowsToTree, treeToRows } from '../../utils/hierarchical-data';\nimport { PureComputed } from '@devexpress/dx-core';\nimport {\n  Row, Filter, FilterPredicate,\n  FilterExpression, GetCellValueFn, RowsWithCollapsedRowsMetaMap,\n  UnwrapRowsComputed, FilteredRowsFn, FilterHierarchicalRowsFn,\n  CompiledPredicate, GetColumnPredicateFn, FilteredCollapsedRowsGetterFn, TreeNode,\n} from '../../types';\n\nconst operators = {\n  or: (predicates: CompiledPredicate[]) => (row: Row) => (\n    predicates.reduce((acc, predicate) => acc || predicate(row), false)\n  ),\n  and: (predicates: CompiledPredicate[]) => (row: Row) => (\n    predicates.reduce((acc, predicate) => acc && predicate(row), true)\n  ),\n};\n\nconst toLowerCase = (value: any) => String(value).toLowerCase();\n\nconst operationPredicates: { [key: string]: FilterPredicate } = {\n  contains: (value, filter) => toLowerCase(value)\n    .indexOf(toLowerCase(filter.value)) > -1,\n\n  notContains: (value, filter) => toLowerCase(value)\n    .indexOf(toLowerCase(filter.value)) === -1,\n\n  startsWith: (value, filter) => toLowerCase(value)\n    .startsWith(toLowerCase(filter.value)),\n\n  endsWith: (value, filter) => toLowerCase(value)\n    .endsWith(toLowerCase(filter.value)),\n\n  equal: (value, filter) => String(value) === String(filter.value),\n  notEqual: (value, filter) => String(value) !== String(filter.value),\n\n  greaterThan: (value, filter) => value > filter.value!,\n  greaterThanOrEqual: (value, filter) => value >= filter.value!,\n  lessThan: (value, filter) => value < filter.value!,\n  lessThanOrEqual: (value, filter) => value <= filter.value!,\n};\n\nexport const defaultFilterPredicate: FilterPredicate = (value, filter) => {\n  const operation = filter.operation || 'contains';\n  return operationPredicates[operation](value, filter);\n};\n\nconst filterTree: PureComputed<[TreeNode[], CompiledPredicate]> = (tree, predicate) => tree.reduce(\n  (acc, node) => {\n    if (node[NODE_CHECK]) {\n      const filteredChildren = filterTree(node.children, predicate) as TreeNode[];\n      if (filteredChildren.length > 0) {\n        acc.push({\n          ...node,\n          children: filteredChildren,\n        });\n        return acc;\n      }\n      if (predicate(node.root, true)) {\n        acc.push(node.root);\n        return acc;\n      }\n      return acc;\n    }\n\n    if (predicate(node)) {\n      acc.push(node);\n      return acc;\n    }\n\n    return acc;\n  },\n  [] as TreeNode[],\n);\n\nconst filterHierarchicalRows: FilterHierarchicalRowsFn = (\n  rows, predicate, getRowLevelKey, getCollapsedRows,\n) => {\n  const tree = rowsToTree(rows, getRowLevelKey);\n  const collapsedRowsMeta: any[] = [];\n\n  const filteredTree = filterTree(tree, (row, isNode) => {\n    if (isNode) {\n      const collapsedRows = getCollapsedRows && getCollapsedRows(row);\n      if (collapsedRows && collapsedRows.length) {\n        const filteredCollapsedRows = collapsedRows.filter(predicate);\n        collapsedRowsMeta.push([row, filteredCollapsedRows]);\n        return !!filteredCollapsedRows.length || predicate(row);\n      }\n      if (predicate(row)) {\n        collapsedRowsMeta.push([row, []]);\n        return true;\n      }\n      return false;\n    }\n    return predicate(row);\n  });\n\n  return { rows: treeToRows(filteredTree), collapsedRowsMeta: new Map(collapsedRowsMeta) };\n};\n\nconst buildPredicate: PureComputed<\n  [FilterExpression, GetCellValueFn, GetColumnPredicateFn],\n  CompiledPredicate\n> = (\n  initialFilterExpression, getCellValue, getColumnPredicate,\n) => {\n  const getSimplePredicate = (filter: Filter) => {\n    const { columnName } = filter;\n    const customPredicate = getColumnPredicate && getColumnPredicate(columnName);\n    const predicate = customPredicate || defaultFilterPredicate;\n    return (row: Row) => predicate(getCellValue(row, columnName), filter, row);\n  };\n\n  const getOperatorPredicate: any = (filterExpression: FilterExpression) => {\n    const build = operators[toLowerCase(filterExpression.operator)];\n    return build && build(filterExpression.filters.map(getPredicate));\n  };\n\n  const getPredicate = (filterExpression: any) => (\n    getOperatorPredicate(filterExpression)\n    || getSimplePredicate(filterExpression)\n  );\n\n  return getPredicate(initialFilterExpression);\n};\n\nexport const filteredRows: FilteredRowsFn = (\n  rows, filterExpression, getCellValue, getColumnPredicate, getRowLevelKey, getCollapsedRows,\n) => {\n  if (!(filterExpression && Object.keys(filterExpression).length && rows.length)) {\n    // tslint:disable-next-line:no-object-literal-type-assertion\n    return { rows } as Partial<RowsWithCollapsedRowsMetaMap>;\n  }\n\n  const predicate = buildPredicate(\n    filterExpression,\n    getCellValue,\n    getColumnPredicate,\n  );\n\n  return getRowLevelKey\n    ? filterHierarchicalRows(rows, predicate, getRowLevelKey, getCollapsedRows)\n    : { rows: rows.filter(predicate) };\n};\n\nexport const filteredCollapsedRowsGetter: FilteredCollapsedRowsGetterFn = (\n  { collapsedRowsMeta },\n) => row => collapsedRowsMeta && collapsedRowsMeta.get(row);\n\nexport const unwrappedFilteredRows: UnwrapRowsComputed = ({ rows }) => rows;\n","export const GROUP_KEY_SEPARATOR = '|';\n","import { PureReducer, slice } from '@devexpress/dx-core';\nimport { Getters } from '@devexpress/dx-react-core';\nimport { GROUP_KEY_SEPARATOR } from './constants';\nimport {\n  Grouping, ColumnGroupingState, ChangeGroupingPayload, ToggleGroupPayload, DraftGroupingState,\n} from '../../types';\n\nconst applyColumnGrouping: PureReducer<Grouping[], ChangeGroupingPayload> = (\n  grouping, { columnName, groupIndex },\n) => {\n  let nextGrouping = grouping;\n  const groupingIndex = nextGrouping.findIndex(g => g.columnName === columnName);\n  let targetIndex = groupIndex;\n\n  if (groupingIndex > -1) {\n    nextGrouping = slice(grouping);\n    (nextGrouping as Grouping[]).splice(groupingIndex, 1);\n  } else if (groupIndex === undefined) {\n    targetIndex = nextGrouping.length;\n  }\n\n  if (targetIndex > -1) {\n    nextGrouping = slice(nextGrouping);\n    (nextGrouping as Grouping[]).splice(targetIndex, 0, {\n      columnName,\n    });\n  }\n\n  return nextGrouping;\n};\n\nexport const changeColumnGrouping: PureReducer<ColumnGroupingState, ChangeGroupingPayload> = (\n  { grouping, expandedGroups }, { columnName, groupIndex },\n) => {\n  const nextGrouping = applyColumnGrouping(grouping!, { columnName, groupIndex });\n\n  const ungroupedColumnIndex = grouping!.findIndex(\n    (group, index) => !nextGrouping[index] || group.columnName !== nextGrouping[index].columnName,\n  );\n  if (ungroupedColumnIndex === -1) {\n    return {\n      grouping: nextGrouping,\n    };\n  }\n\n  const filteredExpandedGroups = expandedGroups!.filter(\n    group => group.split(GROUP_KEY_SEPARATOR).length <= ungroupedColumnIndex,\n  );\n  if (filteredExpandedGroups.length === expandedGroups!.length) {\n    return {\n      grouping: nextGrouping,\n    };\n  }\n\n  return {\n    grouping: nextGrouping,\n    expandedGroups: filteredExpandedGroups,\n  };\n};\n\nexport const toggleExpandedGroups: PureReducer<ColumnGroupingState, ToggleGroupPayload> = (\n  state, { groupKey },\n) => {\n  const expandedGroups = slice(state.expandedGroups);\n  const groupKeyIndex = expandedGroups.indexOf(groupKey);\n\n  if (groupKeyIndex > -1) {\n    expandedGroups.splice(groupKeyIndex, 1);\n  } else {\n    expandedGroups.push(groupKey);\n  }\n\n  return {\n    expandedGroups,\n  };\n};\n\nexport const draftColumnGrouping: PureReducer<\n  Getters, ChangeGroupingPayload, DraftGroupingState\n> = (\n  { grouping, draftGrouping },\n  { columnName, groupIndex },\n) => ({\n  draftGrouping: applyColumnGrouping(draftGrouping || grouping, { columnName, groupIndex }),\n});\n\nexport const cancelColumnGroupingDraft = () => ({\n  draftGrouping: null,\n});\n","import { PureComputed } from '@devexpress/dx-core';\nimport { Grouping, Sorting, GroupIndex } from '../../types';\n\nexport const adjustSortIndex: PureComputed<[GroupIndex, Grouping[], Sorting[]]> = (\n  groupingIndex, grouping, sorting,\n) => Math.max(\n  grouping.slice(0, groupingIndex).reduce(\n    (acc, columnGrouping) => {\n      const columnSortingIndex = sorting.findIndex(\n        columnSorting => columnSorting.columnName === columnGrouping.columnName,\n      );\n      return (columnSortingIndex === -1 ? acc - 1 : acc);\n    },\n    groupingIndex,\n  ),\n  0,\n);\n","import { PureComputed } from '@devexpress/dx-core';\nimport { GROUP_KEY_SEPARATOR } from '../grouping-state/constants';\nimport {\n  GRID_GROUP_TYPE,\n  GRID_GROUP_CHECK,\n  GRID_GROUP_LEVEL_KEY,\n  GRID_GROUP_COLLAPSED_ROWS,\n} from './constants';\nimport {\n  Grouping, GroupKey, Row, GetCollapsedRowsFn, IsSpecificRowFn, GroupedRowsFn,\n} from '../../types';\n\nexport const groupRowChecker: IsSpecificRowFn = row => row[GRID_GROUP_CHECK];\n\nexport const groupRowLevelKeyGetter = (row: Row) => (row ? row[GRID_GROUP_LEVEL_KEY] : undefined);\n\nconst defaultColumnCriteria = (value: any) => ({\n  value,\n  key: String(value),\n});\n\nexport const groupedRows: GroupedRowsFn = (\n  rows, grouping, getCellValue, getColumnCriteria, keyPrefix = '',\n) => {\n  if (!grouping.length) return rows;\n\n  const { columnName } = grouping[0];\n  const groupCriteria = (getColumnCriteria && getColumnCriteria(columnName))\n    || defaultColumnCriteria;\n\n  const groups = new Map();\n  rows.forEach((row) => {\n    const rawValue = getCellValue(row, columnName);\n    const { key, value } = groupCriteria(rawValue, row);\n    const sameKeyItems = groups.get(key);\n\n    if (!sameKeyItems) {\n      const groupingValue = value === rawValue ? value : value || key;\n      groups.set(key, [groupingValue, key, [row]]);\n    } else {\n      sameKeyItems[2].push(row);\n    }\n  });\n\n  const groupedBy = grouping[0].columnName;\n  const nestedGrouping = grouping.slice(1);\n  return [...groups.values()]\n    .reduce((acc, [value, key, items]) => {\n      const compoundKey = `${keyPrefix}${key}`;\n      acc.push({\n        groupedBy,\n        compoundKey,\n        key,\n        value,\n        [GRID_GROUP_CHECK]: true,\n        [GRID_GROUP_LEVEL_KEY]: `${GRID_GROUP_TYPE.toString()}_${groupedBy}`,\n      });\n      acc.push(...groupedRows(\n        items,\n        nestedGrouping,\n        getCellValue,\n        getColumnCriteria,\n        `${compoundKey}${GROUP_KEY_SEPARATOR}`,\n      ));\n      return acc;\n    }, []);\n};\n\nexport const expandedGroupRows: PureComputed<[Row[], Grouping[], GroupKey[]]> = (\n  rows,\n  grouping,\n  expandedGroups,\n) => {\n  if (!grouping.length) return rows;\n\n  const groupingColumnNames = grouping.map(columnGrouping => columnGrouping.columnName);\n  const expandedGroupsSet = new Set(expandedGroups);\n  let currentGroupExpanded = true;\n  let currentGroupLevel = 0;\n\n  return rows.reduce((acc, row) => {\n    if (!row[GRID_GROUP_CHECK]) {\n      if (currentGroupExpanded) {\n        acc.push(row);\n      } else {\n        acc[acc.length - 1][GRID_GROUP_COLLAPSED_ROWS].push(row);\n      }\n      return acc;\n    }\n\n    const groupLevel = groupingColumnNames.indexOf(row.groupedBy);\n    if (groupLevel > currentGroupLevel && !currentGroupExpanded) {\n      return acc;\n    }\n\n    currentGroupExpanded = expandedGroupsSet.has(row.compoundKey);\n    currentGroupLevel = groupLevel;\n\n    if (currentGroupExpanded) {\n      acc.push(row);\n    } else {\n      acc.push({\n        ...row,\n        [GRID_GROUP_COLLAPSED_ROWS]: [],\n      });\n    }\n\n    return acc;\n  }, []);\n};\n\nexport const groupCollapsedRowsGetter: PureComputed<[GetCollapsedRowsFn]> =\n  getCollapsedRows => row => (\n  row[GRID_GROUP_COLLAPSED_ROWS] || (getCollapsedRows && getCollapsedRows(row))\n);\n","import { PureComputed } from '@devexpress/dx-core';\nimport { GROUP_KEY_SEPARATOR } from '../grouping-state/constants';\nimport {\n  GRID_GROUP_TYPE,\n  GRID_GROUP_CHECK,\n  GRID_GROUP_LEVEL_KEY,\n} from '../integrated-grouping/constants';\nimport { GetRowIdFn, Row, RowId, CustomGroupedRowsFn } from '../../types';\n\nexport const customGroupedRows: CustomGroupedRowsFn = (\n  currentRows, grouping, getChildGroups, rootRows = currentRows, keyPrefix = '',\n) => {\n  if (!currentRows || !currentRows.length) return [];\n  if (!grouping.length) return currentRows;\n\n  const groupedBy = grouping[0].columnName;\n  const nestedGrouping = grouping.slice(1);\n  return getChildGroups(currentRows as any[], grouping[0], rootRows as any[])\n    .reduce((acc, { key, value = key, childRows }) => {\n      const compoundKey = `${keyPrefix}${key}`;\n      acc.push({\n        groupedBy,\n        compoundKey,\n        key,\n        value,\n        [GRID_GROUP_CHECK]: true,\n        [GRID_GROUP_LEVEL_KEY]: `${GRID_GROUP_TYPE.toString()}_${groupedBy}`,\n      });\n      acc.push(...customGroupedRows(\n        childRows!,\n        nestedGrouping,\n        getChildGroups,\n        rootRows,\n        `${compoundKey}${GROUP_KEY_SEPARATOR}`,\n      ));\n      return acc;\n    }, [] as Row[]);\n};\n\nexport const customGroupingRowIdGetter: PureComputed<[GetRowIdFn, Row[]]> = (getRowId, rows) => {\n  const firstRow = rows.find(row => !row[GRID_GROUP_CHECK]);\n  if (!firstRow || getRowId(firstRow) !== undefined) {\n    return getRowId;\n  }\n\n  const map = new Map<Row, RowId>(rows\n    .filter(row => !row[GRID_GROUP_CHECK])\n    .map((row, rowIndex) => [row, rowIndex]) as [Row, RowId]);\n\n  return row => map.get(row)!;\n};\n","import { GroupingPanelItemsFn } from '../../types/';\n\nexport const groupingPanelItems: GroupingPanelItemsFn = (\n  columns, grouping, draftGrouping,\n) => {\n  const items = draftGrouping.map(({ columnName }) => ({\n    column: columns.find(c => c.name === columnName)!,\n    draft: !grouping.some(columnGrouping => columnGrouping.columnName === columnName),\n  }));\n\n  grouping.forEach(({ columnName }, index) => {\n    if (draftGrouping.some(columnGrouping => columnGrouping.columnName === columnName)) return;\n    items.splice(index, 0, {\n      column: columns.find(c => c.name === columnName)!,\n      draft: true,\n    });\n  });\n\n  return items;\n};\n","export const setCurrentPage = (prevPage: number, page: number) => page;\nexport const setPageSize = (prevPageSize: number, size: number) => size;\n","import { PureComputed } from '@devexpress/dx-core';\n\nexport const clamp: PureComputed<[number, number]> = (value, max) => (\n  Math.max(Math.min(value, max), 0)\n);\n","import { clamp } from './helpers';\nimport { Row, GetRowLevelKeyFn, CurrentPageFn } from '../../types';\nimport { PureComputed } from '@devexpress/dx-core';\n\n// tslint:disable-next-line:max-line-length\nconst PAGE_HEADERS_OVERFLOW_ERROR = 'Max row level exceeds the page size. Consider increasing the page size.';\n\nexport const paginatedRows: PureComputed<[Row[], number, number]> = (rows, pageSize, page) => (\n  pageSize\n    ? rows.slice(pageSize * page, pageSize * (page + 1))\n    : rows as Row[]\n);\n\nexport const rowsWithPageHeaders: PureComputed<[Row[], number, GetRowLevelKeyFn]> = (\n  rows, pageSize, getRowLevelKey,\n) => {\n  if (!pageSize || !getRowLevelKey) return rows as Row[];\n\n  let result = rows.slice();\n\n  let headerRows: any[] = [];\n  let currentIndex = 0;\n  while (result.length > currentIndex) {\n    const row = result[currentIndex];\n    const levelKey = getRowLevelKey(row);\n    if (levelKey) {\n      const headerIndex = headerRows.findIndex(headerRow => getRowLevelKey(headerRow) === levelKey);\n      // tslint:disable-next-line:prefer-conditional-expression\n      if (headerIndex === -1) {\n        headerRows = [...headerRows, row];\n      } else {\n        headerRows = [...headerRows.slice(0, headerIndex), row];\n      }\n      if (headerRows.length >= pageSize) {\n        throw new Error(PAGE_HEADERS_OVERFLOW_ERROR);\n      }\n    }\n    const indexInPage = currentIndex % pageSize;\n    if (indexInPage < headerRows.length && row !== headerRows[indexInPage]) {\n      result = [\n        ...result.slice(0, currentIndex),\n        headerRows[indexInPage],\n        ...result.slice(currentIndex),\n      ];\n    }\n    currentIndex += 1;\n  }\n\n  return result;\n};\n\nexport const rowCount = (rows: Row[]) => rows.length;\n\nexport const pageCount: PureComputed<[number, number]> = (count, pageSize) => (\n  pageSize ? Math.ceil(count / pageSize) : 1\n);\n\nexport const currentPage: CurrentPageFn = (\n  page, totalCount, pageSize, setCurrentPage,\n) => {\n  const totalPages = pageCount(totalCount, pageSize);\n  const adjustedCurrentPage = clamp(page, totalPages - 1);\n  if (page !== adjustedCurrentPage) {\n    setTimeout(() => setCurrentPage(adjustedCurrentPage));\n  }\n  return adjustedCurrentPage;\n};\n","import { PureComputed } from '@devexpress/dx-core';\nimport { NthRowOnPageFn } from '../../types';\n\nexport const firstRowOnPage: NthRowOnPageFn = (currentPage, pageSize, totalCount) => {\n  if (totalCount === 0) {\n    return 0;\n  }\n  return pageSize ? (currentPage * pageSize) + 1 : 1;\n};\n\nexport const lastRowOnPage: NthRowOnPageFn = (currentPage, pageSize, totalRowCount) => {\n  let result = totalRowCount;\n  if (pageSize) {\n    const index = (currentPage + 1) * pageSize;\n    result = index > totalRowCount ? totalRowCount : index;\n  }\n\n  return result;\n};\n\nexport const calculateStartPage: PureComputed<[number, number, number]> = (\n  currentPage, maxButtonCount, totalPageCount,\n) => (\n  Math.max(\n    Math.min(\n    currentPage - Math.floor(maxButtonCount / 2),\n      (totalPageCount - maxButtonCount) + 1,\n    ),\n    1,\n  )\n);\n","import { PureComputed } from '@devexpress/dx-core';\nimport { RowId } from '../types';\n\nexport const toggle: PureComputed<[RowId[], RowId[], boolean?]> = (\n  source, items, state?,\n) => {\n  const itemsSet = new Set(items);\n\n  let sourceState: any = state;\n  if (sourceState === undefined) {\n    const availableSelection = source.filter(item => itemsSet.has(item));\n    sourceState = availableSelection.length !== itemsSet.size;\n  }\n\n  if (sourceState) {\n    const sourceSet = new Set(source);\n    return [\n      ...source,\n      ...items.filter(item => !sourceSet.has(item)),\n    ];\n  }\n\n  return source.filter(item => !itemsSet.has(item));\n};\n","import { toggle } from '../../utils/common-reducers';\nimport { ToggleRowsFieldReducer } from '../../types';\n\nexport const toggleSelection: ToggleRowsFieldReducer = (\n  selection, { rowIds, state },\n) => toggle(selection, rowIds, state);\n","import { PureComputed } from '@devexpress/dx-core';\nimport {\n  RowsWithSelection, UnwrapRowsComputed, RowId, RowsWithAvailableToSelectFn,\n} from '../../types';\n\ntype RowsSelectedFn = PureComputed<[RowsWithSelection, RowId[]], boolean>;\n\nexport const rowsWithAvailableToSelect: RowsWithAvailableToSelectFn = (\n  rows, getRowId, isGroupRow,\n) => {\n  let dataRows = rows;\n  if (isGroupRow) {\n    dataRows = dataRows.filter(row => !isGroupRow(row));\n  }\n  return { rows, availableToSelect: dataRows.map(row => getRowId(row)) };\n};\n\nexport const someSelected: RowsSelectedFn = ({ availableToSelect }, selection) => {\n  const selectionSet = new Set(selection);\n\n  return availableToSelect.length !== 0 && selectionSet.size !== 0\n    && availableToSelect.some(elem => selectionSet.has(elem))\n    && availableToSelect.some(elem => !selectionSet.has(elem));\n};\n\nexport const allSelected: RowsSelectedFn = ({ availableToSelect }, selection) => {\n  const selectionSet = new Set(selection);\n\n  return selectionSet.size !== 0 && availableToSelect.length !== 0\n    && !availableToSelect.some(elem => !selectionSet.has(elem));\n};\n\nexport const unwrapSelectedRows: UnwrapRowsComputed = ({ rows }) => rows;\n","import { PureReducer } from '@devexpress/dx-core';\nimport { RowId, Row, RowIdsPayload, RowPayload, RowChangePayload, RowChanges } from '../../types';\n\nexport const startEditRows: PureReducer<RowId[], RowIdsPayload> = (\n  prevEditingRowIds, { rowIds },\n) => [...prevEditingRowIds, ...rowIds];\n\nexport const stopEditRows: PureReducer<RowId[], RowIdsPayload> = (\n  prevEditingRowIds, { rowIds },\n) => {\n  const rowIdSet = new Set(rowIds);\n  return prevEditingRowIds.filter(id => !rowIdSet.has(id));\n};\n\nexport const addRow: PureReducer<Row[], RowPayload> = (\n  addedRows, { row } = { row: {} },\n) => [...addedRows, row];\n\nexport const changeAddedRow: PureReducer<Row[], RowChangePayload> = (\n  addedRows, { rowId, change },\n) => {\n  const result = addedRows.slice();\n  result[rowId] = { ...result[rowId], ...change };\n  return result;\n};\n\nexport const cancelAddedRows: PureReducer<Row[], RowIdsPayload> = (addedRows, { rowIds }) => {\n  const result: Row[] = [];\n  const indexSet = new Set(rowIds);\n  addedRows.forEach((row, index) => {\n    if (!indexSet.has(index)) {\n      result.push(row);\n    }\n  });\n  return result;\n};\n\nexport const changeRow: PureReducer<RowChanges, RowChangePayload> = (\n  prevRowChanges, { rowId, change },\n) => {\n  const prevChange = prevRowChanges[rowId] || {};\n  return {\n    ...prevRowChanges,\n    [rowId]: {\n      ...prevChange,\n      ...change,\n    },\n  };\n};\n\nexport const cancelChanges: PureReducer<RowChanges, RowIdsPayload> = (\n  prevRowChanges, { rowIds },\n) => {\n  const result = { ...prevRowChanges };\n  rowIds.forEach((rowId) => {\n    delete result[rowId];\n  });\n  return result;\n};\n\nexport const deleteRows: PureReducer<RowId[], RowIdsPayload> = (deletedRowIds, { rowIds }) => [\n  ...deletedRowIds, ...rowIds,\n];\n\nexport const cancelDeletedRows: PureReducer<RowId[], RowIdsPayload> = (\n  deletedRowIds, { rowIds },\n) => {\n  const rowIdSet = new Set(rowIds);\n  return deletedRowIds.filter(rowId => !rowIdSet.has(rowId));\n};\n","import { PureComputed } from '@devexpress/dx-core';\nimport {\n  EditingColumnExtension, CreateRowChangeFn, Row, RowId, RowChanges,\n} from '../../types';\n\nexport const changedRowsByIds: PureComputed<\n  [any, RowId[]], RowChanges\n> = (changes, rowIds) => {\n  const result = {};\n  rowIds.forEach((rowId) => {\n    result[rowId] = changes[rowId];\n  });\n  return result;\n};\n\nexport const addedRowsByIds: PureComputed<[Row[], RowId[]]> = (addedRows, rowIds) => {\n  const rowIdSet = new Set(rowIds);\n  const result: Row[] = [];\n  addedRows.forEach((row, index) => {\n    if (rowIdSet.has(index)) {\n      result.push(row);\n    }\n  });\n  return result;\n};\n\nconst defaultCreateRowChange: CreateRowChangeFn = (row, value, columnName) => (\n  { [columnName]: value }\n);\nexport const createRowChangeGetter: PureComputed<\n  [CreateRowChangeFn?, EditingColumnExtension[]?], CreateRowChangeFn\n> = (\n  createRowChange = defaultCreateRowChange,\n  columnExtensions = [],\n) => {\n  const map = columnExtensions.reduce((acc, columnExtension) => {\n    if (columnExtension.createRowChange) {\n      acc[columnExtension.columnName] = columnExtension.createRowChange;\n    }\n    return acc;\n  }, {});\n\n  return (row, value, columnName) => {\n    if (map[columnName]) {\n      return map[columnName](row, value, columnName);\n    }\n    return createRowChange(row, value, columnName);\n  };\n};\n","import { PureComputed } from '@devexpress/dx-core';\nimport { RowId, RowChanges } from '../../types';\n\nexport const getRowChange: PureComputed<[RowChanges, RowId], any> = (\n  rowChanges, rowId,\n) => rowChanges[rowId] || {};\n","export const TABLE_REORDERING_TYPE = Symbol('reordering');\n","import { PureReducer, slice } from '@devexpress/dx-core';\nimport { ColumnOrder, ChangeColumnOrderPayload } from '../../types';\n\nexport const changeColumnOrder: PureReducer<ColumnOrder, ChangeColumnOrderPayload> = (\n  order, { sourceColumnName, targetColumnName },\n) => {\n  const sourceColumnIndex = order.indexOf(sourceColumnName);\n  const targetColumnIndex = order.indexOf(targetColumnName);\n  const newOrder = slice(order);\n\n  newOrder.splice(sourceColumnIndex, 1);\n  newOrder.splice(targetColumnIndex, 0, sourceColumnName);\n  return newOrder;\n};\n","export const TABLE_DATA_TYPE = Symbol('data');\nexport const TABLE_NODATA_TYPE = Symbol('nodata');\nexport const TABLE_FLEX_TYPE = Symbol('flex');\n","import { PureComputed, slice } from '@devexpress/dx-core';\nimport mergeSort from '../../utils/merge-sort';\nimport { TABLE_DATA_TYPE } from '../table/constants';\nimport { TABLE_REORDERING_TYPE } from './constants';\nimport { OrderedColumnsComputed, DraftOrderComputed, TableRow } from '../../types';\n\nexport const orderedColumns: OrderedColumnsComputed = (\n  tableColumns, order,\n) => mergeSort(tableColumns, (a, b) => {\n  if (a.type !== TABLE_DATA_TYPE || b.type !== TABLE_DATA_TYPE) return 0;\n\n  const aPos = order.indexOf(a.column.name);\n  const bPos = order.indexOf(b.column.name);\n  return aPos - bPos;\n});\n\nexport const tableHeaderRowsWithReordering: PureComputed<[TableRow[]]> = tableHeaderRows => [\n  ...tableHeaderRows,\n  {\n    key: TABLE_REORDERING_TYPE.toString(),\n    type: TABLE_REORDERING_TYPE,\n    height: 0,\n  },\n];\n\nexport const draftOrder: DraftOrderComputed = (order, sourceColumnIndex, targetColumnIndex) => {\n  if (sourceColumnIndex === -1\n    || targetColumnIndex === -1\n    || sourceColumnIndex === targetColumnIndex) {\n    return order;\n  }\n\n  const result = slice(order);\n  const sourceColumn = order[sourceColumnIndex];\n  result.splice(sourceColumnIndex, 1);\n  result.splice(targetColumnIndex, 0, sourceColumn);\n\n  return result;\n};\n","import { TABLE_DATA_TYPE } from '../table/constants';\nimport { TableColumn, SpecifyWidthsFn, TableColumnsWithWidthFn } from '../../types';\n\nconst UNSET_COLUMN_WIDTH_ERROR = [\n  'The \"$1\" column\\'s width is not specified.',\n  'The TableColumnResizing plugin requires that all columns have the specified width.',\n].join('\\n');\n\nconst specifyWidths: SpecifyWidthsFn = (tableColumns, widths, onAbsence) => {\n  if (!widths.length) return tableColumns;\n  return tableColumns\n    .reduce((acc, tableColumn) => {\n      if (tableColumn.type === TABLE_DATA_TYPE) {\n        const columnName = tableColumn.column!.name;\n        const column = widths.find(el => el.columnName === columnName);\n        const width = column && column.width;\n        if (width === undefined) {\n          onAbsence(columnName);\n          acc.push(tableColumn);\n        } else {\n          acc.push({ ...tableColumn, width });\n        }\n      } else {\n        acc.push(tableColumn);\n      }\n      return acc;\n    }, [] as TableColumn[]);\n};\n\nexport const tableColumnsWithWidths: TableColumnsWithWidthFn = (\n  tableColumns, columnWidths,\n) => specifyWidths(tableColumns, columnWidths, (columnName) => {\n  throw new Error(UNSET_COLUMN_WIDTH_ERROR.replace('$1', columnName));\n});\n\nexport const tableColumnsWithDraftWidths: TableColumnsWithWidthFn = (\n  tableColumns, draftColumnWidths,\n) => specifyWidths(tableColumns, draftColumnWidths, () => {});\n","import { slice } from '@devexpress/dx-core';\nimport { ColumnWidthReducer } from '../../types';\n\nexport const changeTableColumnWidth: ColumnWidthReducer = (\n  state, { columnName, shift, minColumnWidth ,\n}) => {\n  const { columnWidths } = state;\n  const nextColumnWidth = slice(columnWidths);\n  const index = nextColumnWidth.findIndex(elem => elem.columnName === columnName);\n  const updatedColumn = nextColumnWidth[index];\n  const size = Math.max(minColumnWidth, updatedColumn.width + shift);\n  nextColumnWidth.splice(index, 1, { columnName, width: size });\n\n  return {\n    columnWidths: nextColumnWidth,\n  };\n};\n\nexport const draftTableColumnWidth: ColumnWidthReducer = (\n  state, { columnName, shift, minColumnWidth },\n) => {\n  const { columnWidths } = state;\n  const updatedColumn = columnWidths.find(elem => elem.columnName === columnName)!;\n  const size = Math.max(minColumnWidth, updatedColumn.width + shift);\n\n  return {\n    draftColumnWidths: [{ columnName: updatedColumn.columnName, width: size }],\n  };\n};\n\nexport const cancelTableColumnWidthDraft = () => ({\n  draftColumnWidths: [],\n});\n","export const TABLE_EDIT_COMMAND_TYPE = Symbol('editCommand');\n","export const TABLE_ADDED_TYPE = Symbol('added');\nexport const TABLE_EDIT_TYPE = Symbol('edit');\n","export const TABLE_HEADING_TYPE = Symbol('heading');\n","import { TABLE_ADDED_TYPE, TABLE_EDIT_TYPE } from '../table-edit-row/constants';\nimport { TABLE_DATA_TYPE } from '../table/constants';\nimport { TABLE_HEADING_TYPE } from '../table-header-row/constants';\nimport { TABLE_EDIT_COMMAND_TYPE } from './constants';\nimport { IsSpecificCellFn } from '../../types';\n\nexport const isHeadingEditCommandsTableCell: IsSpecificCellFn = (\n  tableRow, tableColumn,\n) => tableRow.type === TABLE_HEADING_TYPE && tableColumn.type === TABLE_EDIT_COMMAND_TYPE;\nexport const isEditCommandsTableCell: IsSpecificCellFn = (\n  tableRow, tableColumn,\n) => (tableRow.type === TABLE_DATA_TYPE || tableRow.type === TABLE_ADDED_TYPE\n  || tableRow.type === TABLE_EDIT_TYPE) && tableColumn.type === TABLE_EDIT_COMMAND_TYPE;\n","import { PureComputed } from '@devexpress/dx-core';\nimport { TABLE_EDIT_COMMAND_TYPE } from './constants';\nimport { TableColumn } from '../../types';\n\nexport const tableColumnsWithEditing: PureComputed<[TableColumn[], number?]> = (\n  tableColumns, width,\n) => [\n  { width, key: TABLE_EDIT_COMMAND_TYPE.toString(), type: TABLE_EDIT_COMMAND_TYPE },\n  ...tableColumns];\n","import { TABLE_ADDED_TYPE, TABLE_EDIT_TYPE } from './constants';\nimport { TABLE_DATA_TYPE } from '../table/constants';\nimport { IsSpecificRowFn, IsSpecificCellFn } from '../../types';\n\nexport const isEditTableCell: IsSpecificCellFn = (\n  tableRow, tableColumn,\n) => (tableRow.type === TABLE_ADDED_TYPE || tableRow.type === TABLE_EDIT_TYPE)\n  && tableColumn.type === TABLE_DATA_TYPE;\nexport const isAddedTableRow: IsSpecificRowFn = tableRow => tableRow.type === TABLE_ADDED_TYPE;\nexport const isEditTableRow: IsSpecificRowFn = tableRow => tableRow.type === TABLE_EDIT_TYPE;\n","import { slice } from '@devexpress/dx-core';\nimport { TABLE_ADDED_TYPE, TABLE_EDIT_TYPE } from './constants';\nimport { TABLE_DATA_TYPE } from '../table/constants';\nimport { TableRowsWithEditingFn } from '../../types';\n\nexport const tableRowsWithEditing: TableRowsWithEditingFn = (\n  tableRows, editingRowIds, addedRows, rowHeight,\n) => {\n  const rowIds = new Set(editingRowIds);\n  const editedTableRows = tableRows\n    .map(tableRow => (\n      tableRow.type === TABLE_DATA_TYPE && rowIds.has(tableRow.rowId!)\n        ? {\n          ...tableRow,\n          type: TABLE_EDIT_TYPE,\n          height: rowHeight,\n        }\n        : tableRow\n    ));\n\n  const addedTableRows = addedRows\n    .map((row, rowIndex) => ({\n      row,\n      key: `${TABLE_ADDED_TYPE.toString()}_${rowIndex}`,\n      type: TABLE_ADDED_TYPE,\n      rowId: rowIndex,\n      height: rowHeight,\n    }));\n\n  return [\n    ...slice(addedTableRows).reverse(),\n    ...editedTableRows,\n  ];\n};\n","export const TABLE_FILTER_TYPE = Symbol('filter');\nexport const DEFAULT_FILTER_OPERATIONS = [\n  'contains',\n  'notContains',\n  'startsWith',\n  'endsWith',\n  'equal',\n  'notEqual',\n];\n","import { PureComputed } from '@devexpress/dx-core';\nimport { TABLE_FILTER_TYPE, DEFAULT_FILTER_OPERATIONS } from './constants';\nimport { TABLE_DATA_TYPE } from '../table/constants';\nimport {\n  IsSpecificCellFn, IsSpecificRowFn, FilterOperation, GetAvailableFilterOperationsFn,\n  GetSelectedFilterOperationFn,\n} from '../../types';\n\nexport const isFilterTableCell: IsSpecificCellFn = (\n  tableRow, tableColumn,\n) => tableRow.type === TABLE_FILTER_TYPE && tableColumn.type === TABLE_DATA_TYPE;\n\nexport const isFilterTableRow: IsSpecificRowFn = tableRow => tableRow.type === TABLE_FILTER_TYPE;\n\nexport const getColumnFilterOperations: PureComputed<\n  [GetAvailableFilterOperationsFn, string],\n  FilterOperation[]\n> = (\n  getAvailableFilterOperations, columnName,\n) => (getAvailableFilterOperations && getAvailableFilterOperations(columnName))\n  || DEFAULT_FILTER_OPERATIONS;\n\nexport const isFilterValueEmpty = (value: any) => value === undefined || !String(value).length;\n\nexport const getSelectedFilterOperation: GetSelectedFilterOperationFn = (\n  filterOperations, columnName, columnFilter, columnFilterOperations,\n) => {\n  if (columnFilter && columnFilter.operation) {\n    return columnFilter.operation;\n  }\n  if (filterOperations[columnName]) {\n    return filterOperations[columnName];\n  }\n  return columnFilterOperations[0];\n};\n","import { PureComputed } from '@devexpress/dx-core';\nimport { TABLE_FILTER_TYPE } from './constants';\nimport { TableRow } from '../../types';\n\nexport const tableHeaderRowsWithFilter: PureComputed<[TableRow[], number]> = (\n  headerRows, rowHeight,\n) => [\n  ...headerRows,\n  { key: TABLE_FILTER_TYPE.toString(), type: TABLE_FILTER_TYPE, height: rowHeight }];\n","export const TABLE_GROUP_TYPE = Symbol('group');\n","import { PureComputed } from '@devexpress/dx-core';\nimport { TABLE_GROUP_TYPE } from './constants';\nimport { TableRow, TableColumn, IsSpecificCellFn, Grouping } from '../../types';\n\nexport const isGroupTableCell: IsSpecificCellFn = (\n  tableRow, tableColumn,\n) => !!(tableRow.type === TABLE_GROUP_TYPE && tableColumn.type === TABLE_GROUP_TYPE\n  && tableColumn.column\n  && tableColumn.column.name === tableRow.row.groupedBy);\n\nexport const isGroupIndentTableCell: PureComputed<[TableRow, TableColumn, Grouping[]], boolean> = (\n  tableRow, tableColumn, grouping,\n) => {\n  if (tableRow.type !== TABLE_GROUP_TYPE || tableColumn.type !== TABLE_GROUP_TYPE) return false;\n  if (tableColumn.column && tableRow.row.groupedBy === tableColumn.column.name) return false;\n  const rowGroupIndex = grouping.findIndex(\n    columnGrouping => columnGrouping.columnName === tableRow.row.groupedBy,\n  );\n  const columnGroupIndex = grouping.findIndex(\n    columnGrouping => !!tableColumn.column && columnGrouping.columnName === tableColumn.column.name,\n  );\n  return columnGroupIndex < rowGroupIndex;\n};\nexport const isGroupTableRow = (tableRow: TableRow) => tableRow.type === TABLE_GROUP_TYPE;\n","import { TABLE_DATA_TYPE } from '../table/constants';\nimport { TABLE_GROUP_TYPE } from './constants';\nimport { PureComputed } from '@devexpress/dx-core';\nimport {\n  TableColumn, TableRow, CellColSpanGetter, IsSpecificRowFn,\n  TableColumnsWithDraftGroupingFn,\n  TableColumnsWithGroupingFn,\n} from '../../types';\n\nconst tableColumnsWithDraftGrouping: TableColumnsWithDraftGroupingFn = (\n  tableColumns, grouping, draftGrouping, showColumnWhenGrouped,\n) => tableColumns\n  .reduce((acc, tableColumn) => {\n    if (tableColumn.type !== TABLE_DATA_TYPE) {\n      acc.push(tableColumn);\n      return acc;\n    }\n\n    const columnName = tableColumn.column && tableColumn.column.name || '';\n    const columnGroupingExists = grouping\n      .some(columnGrouping => columnGrouping.columnName === columnName);\n    const columnDraftGroupingExists = draftGrouping\n      .some(columnGrouping => columnGrouping.columnName === columnName);\n\n    if ((!columnGroupingExists && !columnDraftGroupingExists)\n        || showColumnWhenGrouped(columnName)) {\n      acc.push(tableColumn);\n    } else if ((!columnGroupingExists && columnDraftGroupingExists)\n        || (columnGroupingExists && !columnDraftGroupingExists)) {\n      acc.push({\n        ...tableColumn,\n        draft: true,\n      });\n    }\n    return acc;\n  // tslint:disable-next-line: prefer-array-literal\n  }, [] as Array<TableColumn & { draft?: boolean }>);\n\nexport const tableColumnsWithGrouping: TableColumnsWithGroupingFn = (\n  columns, tableColumns, grouping, draftGrouping, indentColumnWidth, showColumnWhenGrouped,\n) => [\n  ...grouping.map((columnGrouping) => {\n    const groupedColumn = columns.find(column => column.name === columnGrouping.columnName);\n    return {\n      key: `${TABLE_GROUP_TYPE.toString()}_${groupedColumn!.name}`,\n      type: TABLE_GROUP_TYPE,\n      column: groupedColumn,\n      width: indentColumnWidth,\n    };\n  }),\n  ...tableColumnsWithDraftGrouping(tableColumns, grouping, draftGrouping, showColumnWhenGrouped),\n];\n\nexport const tableRowsWithGrouping: PureComputed<[TableRow[], IsSpecificRowFn]> = (\n  tableRows, isGroupRow,\n) => tableRows.map((tableRow) => {\n  if (tableRow.type !== TABLE_DATA_TYPE || !isGroupRow(tableRow.row)) {\n    return tableRow;\n  }\n  return {\n    ...tableRow,\n    key: `${TABLE_GROUP_TYPE.toString()}_${tableRow.row.compoundKey}`,\n    type: TABLE_GROUP_TYPE,\n  };\n});\n\nexport const tableGroupCellColSpanGetter: CellColSpanGetter = getTableCellColSpan => (params) => {\n  const { tableRow, tableColumns, tableColumn } = params;\n  if (tableRow.type === TABLE_GROUP_TYPE && tableColumn.type === TABLE_GROUP_TYPE\n    && tableRow.row.groupedBy === tableColumn.column!.name) {\n    return tableColumns.length - tableColumns.indexOf(tableColumn);\n  }\n  return getTableCellColSpan(params);\n};\n","import { TABLE_HEADING_TYPE } from './constants';\nimport { TABLE_DATA_TYPE } from '../table/constants';\nimport {\n  IsSpecificCellFn, IsSpecificRowFn, HeaderColumnChain,\n  SplitHeaderColumnChainsFn, FindChainByColumnIndexFn,\n  GenerateChainsFn,\n} from '../../types';\n\nexport const isHeadingTableCell: IsSpecificCellFn = (\n  tableRow, tableColumn,\n) => tableRow.type === TABLE_HEADING_TYPE && tableColumn.type === TABLE_DATA_TYPE;\n\nexport const isHeadingTableRow: IsSpecificRowFn = tableRow => (\n  tableRow.type === TABLE_HEADING_TYPE\n);\n\nexport const findChainByColumnIndex: FindChainByColumnIndexFn = (chains, columnIndex) => (\n  chains.find(chain => (\n    chain.start <= columnIndex && columnIndex < chain.start + chain.columns.length\n  ))!\n);\n\nexport const splitHeaderColumnChains: SplitHeaderColumnChainsFn = (\n  tableColumnChains, tableColumns, shouldSplitChain, extendChainProps,\n) => (\n  tableColumnChains.map((row, rowIndex) => row\n    .reduce((acc, chain) => {\n      let currentChain: any = null;\n      chain.columns.forEach((col) => {\n        const column = tableColumns.find(c => c.key === col.key);\n        const isNewGroup = shouldSplitChain(currentChain, column!, rowIndex);\n\n        if (isNewGroup) {\n          const start = currentChain\n            ? (currentChain.start + currentChain.columns.length)\n            : chain.start;\n\n          acc.push({\n            ...chain,\n            ...extendChainProps(column!),\n            start,\n            columns: [],\n          });\n          currentChain = acc[acc.length - 1];\n        }\n\n        currentChain.columns.push(column);\n      });\n\n      return acc;\n    }, [] as HeaderColumnChain[]))\n);\n\nexport const generateSimpleChains: GenerateChainsFn = (rows, columns) => (\n  rows.map(() => ([{\n    columns,\n    start: 0,\n  }]))\n);\n","import { PureComputed } from '@devexpress/dx-core';\nimport { TABLE_HEADING_TYPE } from './constants';\nimport { TableRow } from '../../types';\n\nexport const tableRowsWithHeading: PureComputed<[TableRow[]]> = headerRows => [\n  { key: TABLE_HEADING_TYPE.toString(), type: TABLE_HEADING_TYPE },\n  ...headerRows];\n","export const TABLE_BAND_TYPE = Symbol('band');\nexport const BAND_GROUP_CELL = 'bandGroupCell';\nexport const BAND_HEADER_CELL = 'bandHeaderCell';\nexport const BAND_EMPTY_CELL = 'bandEmptyCell';\nexport const BAND_DUPLICATE_RENDER = 'bandDuplicateRender';\n","import {\n  TABLE_BAND_TYPE, BAND_GROUP_CELL, BAND_HEADER_CELL, BAND_EMPTY_CELL, BAND_DUPLICATE_RENDER,\n} from './constants';\nimport { TABLE_HEADING_TYPE } from '../table-header-row/constants';\nimport { TABLE_DATA_TYPE } from '../table/constants';\nimport { findChainByColumnIndex } from '../table-header-row/helpers';\nimport {\n  IsSpecificRowFn, GetColumnBandMetaFn, GetBandComponentFn, BandHeaderRow,\n} from '../../types';\n\nexport const isBandedTableRow: IsSpecificRowFn = tableRow => (tableRow.type === TABLE_BAND_TYPE);\nexport const isBandedOrHeaderRow: IsSpecificRowFn = tableRow => isBandedTableRow(tableRow)\n  || tableRow.type === TABLE_HEADING_TYPE;\nexport const isNoDataColumn = (columnType: symbol) => columnType !== TABLE_DATA_TYPE;\n\nexport const getColumnMeta: GetColumnBandMetaFn = (\n  columnName, bands, tableRowLevel,\n  level = 0, title = null, result = null,\n) => bands.reduce((acc, column) => {\n  if (column.columnName === columnName) {\n    return { ...acc, title, level };\n  }\n  if (column.children !== undefined) {\n    return getColumnMeta(\n      columnName,\n      column.children,\n      tableRowLevel,\n      level + 1,\n      level > tableRowLevel ? title : column.title,\n      acc,\n    );\n  }\n  return acc;\n}, result || { level, title });\n\nexport const getBandComponent: GetBandComponentFn = (\n  { tableColumn: currentTableColumn, tableRow, rowSpan },\n  tableHeaderRows, tableColumns, columnBands, tableHeaderColumnChains,\n) => {\n  if (rowSpan) return { type: BAND_DUPLICATE_RENDER, payload: null };\n\n  const maxLevel = tableHeaderRows.filter(column => column.type === TABLE_BAND_TYPE).length + 1;\n  const level = (tableRow as BandHeaderRow).level;\n  const currentRowLevel = level === undefined\n    ? maxLevel - 1 : level;\n  const currentColumnMeta = currentTableColumn.type === TABLE_DATA_TYPE\n    ? getColumnMeta(currentTableColumn.column!.name, columnBands, currentRowLevel)\n    : { level: 0, title: '' };\n\n  if (currentColumnMeta.level < currentRowLevel) return { type: BAND_EMPTY_CELL, payload: null };\n  const currentColumnIndex = tableColumns\n    .findIndex(column => column.key === currentTableColumn.key);\n  const previousTableColumn = tableColumns[currentColumnIndex - 1];\n  let beforeBorder = false;\n  if (currentColumnIndex > 0 && currentTableColumn.type === TABLE_DATA_TYPE\n    && isNoDataColumn(previousTableColumn.type)) {\n    beforeBorder = true;\n  }\n  if (currentColumnMeta.level === currentRowLevel) {\n    return {\n      type: BAND_HEADER_CELL,\n      payload: {\n        tableRow: tableHeaderRows.find(row => row.type === TABLE_HEADING_TYPE),\n        rowSpan: maxLevel - currentRowLevel,\n        ...beforeBorder && { beforeBorder },\n      },\n    };\n  }\n\n  const currentColumnChain = findChainByColumnIndex(\n    tableHeaderColumnChains[currentRowLevel],\n    currentColumnIndex,\n  );\n  if (currentColumnChain!.start < currentColumnIndex) {\n    return { type: null, payload: null };\n  }\n\n  return {\n    type: BAND_GROUP_CELL,\n    payload: {\n      colSpan: currentColumnChain!.columns.length,\n      value: currentColumnMeta.title!,\n      column: currentColumnMeta,\n      ...beforeBorder && { beforeBorder },\n    },\n  };\n};\n","import { PureComputed } from '@devexpress/dx-core';\nimport { TABLE_BAND_TYPE } from './constants';\nimport { TABLE_DATA_TYPE } from '../table/constants';\nimport { getColumnMeta } from './helpers';\nimport { splitHeaderColumnChains, generateSimpleChains } from '../table-header-row/helpers';\nimport {\n  ColumnBands, GetHeaderColumnChainsFn, ShouldSplitChainFn,\n  GetMaxNestedLevelFn, TableRow, TableColumn,\n} from '../../types';\n\nexport const tableRowsWithBands: PureComputed<\n  [TableRow[], ColumnBands[], TableColumn[]]\n> = (\n  tableHeaderRows, columnBands, tableColumns,\n) => {\n  const tableDataColumns = tableColumns.filter(column => column.type === TABLE_DATA_TYPE);\n  const getMaxNestedLevel: GetMaxNestedLevelFn = (bands, level = 0, result = null) => (\n    bands.reduce((acc, column) => {\n      if (column.children !== undefined) {\n        return getMaxNestedLevel(column.children, level + 1, acc);\n      }\n      const isDataColumn = tableDataColumns.findIndex(\n        dataColumn => !!dataColumn.column && dataColumn.column.name === column.columnName,\n      ) > -1;\n      if (level > acc.level && isDataColumn) {\n        return { ...acc, level };\n      }\n      return acc;\n    }, result || { level: 0 })\n  );\n\n  const tableBandHeaders = Array.from({\n    length: getMaxNestedLevel(columnBands as ColumnBands[], 0).level,\n  })\n    .map((row, index) => ({\n      key: `${TABLE_BAND_TYPE.toString()}_${index}`,\n      type: TABLE_BAND_TYPE,\n      level: index,\n    }));\n  return [...tableBandHeaders, ...tableHeaderRows];\n};\n\nexport const tableHeaderColumnChainsWithBands: GetHeaderColumnChainsFn<\n  TableRow[], TableColumn[], ColumnBands[]\n> = (\n  tableHeaderRows, tableColumns, bands,\n) => {\n  const chains = generateSimpleChains(tableHeaderRows, tableColumns);\n  const maxBandRowIndex = tableHeaderRows\n    .filter(row => row.type === TABLE_BAND_TYPE)\n    .length;\n  const rawBandChains = chains.slice(0, maxBandRowIndex);\n\n  let currentBand: any = null;\n  const shouldSplitChain: ShouldSplitChainFn = (chain, column, rowIndex) => {\n    if (rowIndex > maxBandRowIndex) return false;\n\n    const columnName = column.column && column.column.name || '';\n    currentBand = getColumnMeta(columnName, bands, rowIndex);\n    return !chain\n      || (chain as any).bandTitle !== currentBand.title;\n  };\n  const extendChainProps = () => ({\n    bandTitle: (currentBand || {}).title,\n  });\n\n  const bandChains = splitHeaderColumnChains(\n    rawBandChains,\n    tableColumns,\n    shouldSplitChain,\n    extendChainProps,\n  );\n\n  return [...bandChains, ...chains.slice(maxBandRowIndex)];\n};\n","import { toggle } from '../../utils/common-reducers';\nimport { ToggleRowFieldReducer } from '../../types';\n\nexport const toggleDetailRowExpanded: ToggleRowFieldReducer = (\n  prevExpanded, { rowId, state },\n) => toggle(prevExpanded, [rowId], state);\n","export const TABLE_DETAIL_TYPE = Symbol('detail');\n","import { PureComputed } from '@devexpress/dx-core';\nimport { TABLE_DETAIL_TYPE } from './constants';\nimport { TABLE_DATA_TYPE } from '../table/constants';\nimport { IsSpecificCellFn, IsSpecificRowFn, TableColumn, RowId } from '../../types';\n\nexport const isDetailRowExpanded: PureComputed<[RowId[], RowId], boolean> = (\n  expandedDetailRowIds, rowId,\n) => expandedDetailRowIds.indexOf(rowId) > -1;\n\nexport const isDetailToggleTableCell: IsSpecificCellFn = (\n  tableRow, tableColumn,\n) => tableColumn.type === TABLE_DETAIL_TYPE && tableRow.type === TABLE_DATA_TYPE;\n\nexport const isDetailTableRow: IsSpecificRowFn = tableRow => tableRow.type === TABLE_DETAIL_TYPE;\n\nexport const isDetailTableCell: PureComputed<[TableColumn, TableColumn[]], boolean> = (\n  tableColumn, tableColumns,\n) => tableColumns.indexOf(tableColumn) === 0;\n","import { PureComputed } from '@devexpress/dx-core';\nimport { TABLE_DETAIL_TYPE } from './constants';\nimport { TABLE_DATA_TYPE } from '../table/constants';\nimport { TableRow, TableColumn, CellColSpanGetter } from '../../types';\n\nexport const tableRowsWithExpandedDetail: PureComputed<[TableRow[], number[], number]> = (\n  tableRows, expandedDetailRowIds, rowHeight,\n) => {\n  let result = tableRows;\n  expandedDetailRowIds\n    .forEach((expandedRowId) => {\n      const rowIndex = result.findIndex(\n        tableRow => tableRow.type === TABLE_DATA_TYPE && tableRow.rowId === expandedRowId,\n      );\n      if (rowIndex === -1) return;\n      const insertIndex = rowIndex + 1;\n      const { row, rowId } = result[rowIndex];\n      result = [\n        ...result.slice(0, insertIndex),\n        {\n          rowId,\n          row,\n          key: `${TABLE_DETAIL_TYPE.toString()}_${rowId}`,\n          type: TABLE_DETAIL_TYPE,\n          height: rowHeight,\n        },\n        ...result.slice(insertIndex),\n      ];\n    });\n  return result;\n};\n\nexport const tableColumnsWithDetail: PureComputed<[TableColumn[], number]> = (\n  tableColumns, toggleColumnWidth,\n) => [\n  { key: TABLE_DETAIL_TYPE.toString(), type: TABLE_DETAIL_TYPE, width: toggleColumnWidth },\n  ...tableColumns,\n];\n\nexport const tableDetailCellColSpanGetter: CellColSpanGetter = getTableCellColSpan => (params) => {\n  const { tableRow, tableColumns, tableColumn } = params;\n  if (tableRow.type === TABLE_DETAIL_TYPE && tableColumns.indexOf(tableColumn) === 0) {\n    return tableColumns.length;\n  }\n  return getTableCellColSpan(params);\n};\n","export const TABLE_SELECT_TYPE = Symbol('select');\n","import { TABLE_SELECT_TYPE } from './constants';\nimport { TABLE_DATA_TYPE } from '../table/constants';\nimport { TABLE_HEADING_TYPE } from '../table-header-row/constants';\nimport { IsSpecificCellFn } from '../../types';\n\nexport const isSelectTableCell: IsSpecificCellFn = (\n  tableRow, tableColumn,\n) => tableColumn.type === TABLE_SELECT_TYPE && tableRow.type === TABLE_DATA_TYPE;\nexport const isSelectAllTableCell: IsSpecificCellFn = (\n  tableRow, tableColumn,\n) => tableColumn.type === TABLE_SELECT_TYPE && tableRow.type === TABLE_HEADING_TYPE;\n","import { PureComputed } from '@devexpress/dx-core';\nimport { TABLE_SELECT_TYPE } from './constants';\nimport { TableColumn } from '../../types';\n\nexport const tableColumnsWithSelection: PureComputed<[TableColumn[], number]> = (\n  tableColumns, selectionColumnWidth,\n) => [\n  { key: TABLE_SELECT_TYPE.toString(), type: TABLE_SELECT_TYPE, width: selectionColumnWidth },\n  ...tableColumns,\n];\n","import { PureComputed } from '@devexpress/dx-core';\nimport {\n  GetVisibleBoundaryWithFixedFn, VisibleBoundary, GetVisibleBoundaryFn, GetSpanBoundaryFn,\n  CollapseBoundariesFn, GetColumnsSizeFn, GetCollapsedColumnsFn, CollapsedColumn,\n  GetCollapsedAndStubRowsFn, GetCollapsedCellsFn, GetCollapsedGridFn, GetColumnWidthFn,\n  TableColumn, TableRow,\n  CollapsedCell,\n  GetColumnWidthGetterFn,\n  RowsVisibleBoundary,\n  GetCollapsedGridsFn,\n  CollapsedGrid,\n  GetRenderBoundaryFn,\n  GetSpecificRenderBoundaryFn,\n} from '../types';\nimport { TABLE_FLEX_TYPE, intervalUtil } from '..';\n\nexport const TABLE_STUB_TYPE = Symbol('stub');\n\nexport const getVisibleBoundaryWithFixed: GetVisibleBoundaryWithFixedFn = (\n  visibleBoundary, items,\n) => items.reduce((acc, item, index) => {\n  if (item.fixed && (index < visibleBoundary[0] || index > visibleBoundary[1])) {\n    acc.push([index, index]);\n  }\n  return acc;\n}, [visibleBoundary] as [VisibleBoundary]);\n\nexport const getVisibleBoundary: GetVisibleBoundaryFn = (\n  items, viewportStart, viewportSize, getItemSize, offset = 0, itemSize = 0,\n) => {\n  let start: number | null = null;\n  let end: number | null = null;\n  let index = 0;\n  let beforePosition = offset * itemSize;\n  const noVisibleRowsLoaded = itemSize > 0 &&\n    beforePosition + items.length * itemSize < viewportStart ||\n    viewportStart < beforePosition;\n\n  if (noVisibleRowsLoaded) {\n    beforePosition = viewportStart;\n    index = items.length;\n    start = Math.round(viewportStart / itemSize) - offset;\n    end = start;\n  }\n\n  const viewportEnd = viewportStart + viewportSize;\n  while (end === null && index < items.length) {\n    const item = items[index];\n    const afterPosition = beforePosition + getItemSize(item)!;\n    const isVisible = (beforePosition >= viewportStart && beforePosition < viewportEnd)\n      || (afterPosition > viewportStart && afterPosition <= viewportEnd)\n      || (beforePosition < viewportStart && afterPosition > viewportEnd);\n    if (isVisible && start === null) {\n      start = index;\n    }\n    if (!isVisible && start !== null) {\n      end = index - 1;\n      break;\n    }\n    index += 1;\n    beforePosition = afterPosition;\n  }\n  if (start !== null && end === null) {\n    end = index - 1;\n  }\n\n  start = start === null ? 0 : start;\n  end = end === null ? 0 : end;\n\n  return [start + offset, end + offset];\n};\n\nexport const getRenderBoundary: GetRenderBoundaryFn = (itemsCount, visibleBoundary, overscan) => {\n  let [start, end] = visibleBoundary;\n  start = Math.max(0, start - overscan);\n  end = Math.min(itemsCount - 1, end + overscan);\n\n  return [start, end];\n};\n\nexport const getColumnBoundaries: PureComputed<\n  [TableColumn[], number, number, GetColumnWidthFn], VisibleBoundary[]\n> = (columns, left, width, getColumnWidth) => (\n  getVisibleBoundaryWithFixed(\n    getColumnsRenderBoundary(\n      columns.length,\n      getVisibleBoundary(columns, left, width, getColumnWidth, 0),\n    ),\n    columns,\n  )\n);\nexport const getRowsVisibleBoundary: PureComputed<\n[TableRow[], number, number, GetColumnWidthFn, number, number], RowsVisibleBoundary\n> = (rows, top, height, getRowHeight, offset, rowHeight) => {\n  const boundaries = getVisibleBoundary(rows, top, height, getRowHeight, offset, rowHeight);\n  const start = boundaries[0];\n  const end = boundaries[1];\n\n  return {\n    start,\n    end,\n  };\n};\n\nexport const getColumnsRenderBoundary: GetSpecificRenderBoundaryFn = (\n  columnCount, visibleBoundary,\n) => getRenderBoundary(columnCount, visibleBoundary, 1);\n\nexport const getRowsRenderBoundary: GetSpecificRenderBoundaryFn = (\n  rowsCount, visibleBoundary,\n) => getRenderBoundary(rowsCount, visibleBoundary, 3);\n\nexport const getSpanBoundary: GetSpanBoundaryFn = (\n  items, visibleBoundaries, getItemSpan,\n) => visibleBoundaries\n  .map((visibleBoundary) => {\n    let [start, end] = visibleBoundary;\n    for (let index = 0; index <= visibleBoundary[1]; index += 1) {\n      const span = getItemSpan(items[index]);\n      if (index < visibleBoundary[0] && index + span > visibleBoundary[0]) {\n        start = index;\n      }\n      if (index + (span - 1) > visibleBoundary[1]) {\n        end = index + (span - 1);\n      }\n    }\n    return [start, end] as VisibleBoundary;\n  });\n\nexport const collapseBoundaries: CollapseBoundariesFn = (\n  itemsCount, visibleBoundaries, spanBoundaries,\n) => {\n  const breakpoints = new Set([0, itemsCount]);\n  spanBoundaries.forEach(rowBoundaries => rowBoundaries\n    .forEach((boundary) => {\n      breakpoints.add(boundary[0]);\n      if (boundary[1] - 1 < itemsCount) {\n        // next interval starts after span end point\n        breakpoints.add(boundary[1] + 1);\n      }\n    }));\n\n  visibleBoundaries\n    .filter(boundary => boundary.every(bound => 0 <= bound && bound < itemsCount))\n    .forEach((boundary) => {\n      for (let point = boundary[0]; point <= boundary[1]; point += 1) {\n        breakpoints.add(point);\n      }\n      if (boundary[1] + 1 < itemsCount) {\n        // close last visible point\n        breakpoints.add(boundary[1] + 1);\n      }\n    });\n\n  const bp = [...breakpoints].sort((a, b) => a - b);\n  const bounds: any[] = [];\n  for (let i = 0; i < bp.length - 1; i += 1) {\n    bounds.push([\n      bp[i],\n      bp[i + 1] - 1,\n    ]);\n  }\n\n  return bounds;\n};\n\nconst getColumnsSize: GetColumnsSizeFn = (columns, startIndex, endIndex, getColumnSize) => {\n  let size = 0;\n  for (let i = startIndex; i <= endIndex; i += 1) {\n    size += getColumnSize(columns[i], 0) || 0;\n  }\n  return size;\n};\n\nexport const getCollapsedColumns: GetCollapsedColumnsFn = (\n  columns, visibleBoundaries, boundaries, getColumnWidth,\n) => {\n  const collapsedColumns: CollapsedColumn[] = [];\n  boundaries.forEach((boundary) => {\n    const isVisible = visibleBoundaries.reduce((acc, visibleBoundary) => (\n      acc || (visibleBoundary[0] <= boundary[0] && boundary[1] <= visibleBoundary[1])\n    ), false);\n\n    if (isVisible) {\n      const column = columns[boundary[0]];\n      collapsedColumns.push({\n        ...column,\n        width: getColumnWidth(column) as number,\n      });\n    } else {\n      collapsedColumns.push({\n        key: `${TABLE_STUB_TYPE.toString()}_${boundary[0]}_${boundary[1]}`,\n        type: TABLE_STUB_TYPE,\n        width: getColumnsSize(columns, boundary[0], boundary[1], getColumnWidth),\n      });\n    }\n  });\n  return collapsedColumns;\n};\n\nexport const getCollapsedRows: GetCollapsedAndStubRowsFn = (\n  rows, visibleBoundary, boundaries, getRowHeight, getCells, offset,\n) => {\n  const collapsedRows: any[] = [];\n  boundaries.forEach((boundary) => {\n    const isVisible = visibleBoundary[0] <= boundary[0] && boundary[1] <= visibleBoundary[1];\n    if (isVisible) {\n      const row = rows[boundary[0] - offset];\n      collapsedRows.push({\n        row,\n        cells: getCells(row),\n      });\n    } else {\n      const row = {} as any;\n      collapsedRows.push({\n        row: {\n          key: `${TABLE_STUB_TYPE.toString()}_${boundary[0]}_${boundary[1]}`,\n          type: TABLE_STUB_TYPE,\n          height: getColumnsSize(rows, boundary[0], boundary[1], getRowHeight),\n        },\n        cells: getCells(row),\n      });\n    }\n  });\n  return collapsedRows;\n};\n\nexport const getCollapsedCells: GetCollapsedCellsFn = (\n  columns, spanBoundaries, boundaries, getColSpan,\n) => {\n  const collapsedCells: CollapsedCell[] = [];\n  let index = 0;\n  while (index < boundaries.length) {\n    const boundary = boundaries[index];\n    const isSpan = spanBoundaries.reduce((acc, spanBoundary) => (\n      acc || (spanBoundary[0] <= boundary[0] && boundary[1] <= spanBoundary[1])), false);\n    if (isSpan) {\n      const column = columns[boundary[0]];\n      const realColSpan = getColSpan(column);\n      const realColSpanEnd = (realColSpan + boundary[0]) - 1;\n      const colSpanEnd = boundaries.findIndex(\n        colSpanBoundary => colSpanBoundary[0]\n        <= realColSpanEnd && realColSpanEnd\n        <= colSpanBoundary[1],\n      );\n      collapsedCells.push({\n        column,\n        colSpan: (colSpanEnd - index) + 1,\n      });\n      index += 1;\n    } else {\n      collapsedCells.push({\n        column: {\n          key: `${TABLE_STUB_TYPE.toString()}_${boundary[0]}_${boundary[1]}`,\n          type: TABLE_STUB_TYPE,\n        },\n        colSpan: 1,\n      });\n      index += 1;\n    }\n  }\n  return collapsedCells;\n};\n\nexport const getCollapsedGrid: GetCollapsedGridFn = ({\n  rows,\n  columns,\n  rowsVisibleBoundary,\n  columnsVisibleBoundary,\n  getColumnWidth = (column: any) => column.width,\n  getRowHeight = (row: any) => row.height,\n  getColSpan = () => 1,\n  totalRowCount,\n  offset,\n}) => {\n  if (!columns.length) {\n    return {\n      columns: [],\n      rows: [],\n    };\n  }\n\n  const boundaries = rowsVisibleBoundary || [0, rows.length - 1 || 1];\n\n  const rowSpanBoundaries = rows\n    .slice(boundaries[0], boundaries[1])\n    .map(row => getSpanBoundary(\n      columns,\n      columnsVisibleBoundary,\n      column => getColSpan(row, column),\n    ));\n  const columnBoundaries = collapseBoundaries(\n    columns.length,\n    columnsVisibleBoundary,\n    rowSpanBoundaries,\n    0,\n  );\n\n  const rowBoundaries = collapseBoundaries(totalRowCount!, [boundaries], [], offset);\n\n  return {\n    columns: getCollapsedColumns(\n      columns,\n      columnsVisibleBoundary,\n      columnBoundaries,\n      getColumnWidth,\n    ),\n    rows: getCollapsedRows(\n      rows,\n      boundaries,\n      rowBoundaries,\n      getRowHeight,\n      row => getCollapsedCells(\n        columns,\n        getSpanBoundary(\n          columns,\n          columnsVisibleBoundary,\n          column => getColSpan(row, column),\n        ),\n        columnBoundaries,\n        column => getColSpan(row, column),\n      ),\n      offset,\n    ),\n  };\n};\n\nexport const getColumnWidthGetter: GetColumnWidthGetterFn = (\n  tableColumns, tableWidth, minColumnWidth,\n) => {\n  const colsHavingWidth = tableColumns.filter(col => col.width !== undefined);\n  const columnsWidth = colsHavingWidth.reduce((acc, col) => (acc + col.width!), 0);\n  const autoWidth = (tableWidth - columnsWidth) / (tableColumns.length - colsHavingWidth.length);\n  const autoColWidth = Math.max(autoWidth, minColumnWidth!);\n\n  return column => (column.type === TABLE_FLEX_TYPE\n    ? null\n    : column.width || autoColWidth);\n};\n\nexport const getCollapsedGrids: GetCollapsedGridsFn = ({\n    headerRows = [],\n    bodyRows = [],\n    footerRows = [],\n    columns,\n    loadedRowsStart,\n    totalRowCount,\n    getCellColSpan,\n    viewportLeft,\n    containerWidth,\n    visibleRowBoundaries,\n    getColumnWidth,\n    getRowHeight,\n  },\n) => {\n  const getColSpan = (\n    tableRow: any, tableColumn: any,\n  ) => getCellColSpan!({ tableRow, tableColumn, tableColumns: columns });\n\n  const columnBoundaries = getColumnBoundaries(\n    columns, viewportLeft, containerWidth, getColumnWidth,\n  );\n  const getCollapsedGridBlock: PureComputed<\n    [any[], any[]?, number?, number?], CollapsedGrid\n  > = (\n    rows, rowsVisibleBoundary, rowCount = rows.length, offset = 0,\n  ) => getCollapsedGrid({\n    rows,\n    columns,\n    rowsVisibleBoundary,\n    columnsVisibleBoundary: columnBoundaries,\n    getColumnWidth,\n    getRowHeight,\n    getColSpan,\n    totalRowCount: rowCount,\n    offset,\n  });\n\n  const headerGrid = getCollapsedGridBlock(\n    headerRows, getRenderRowBounds(visibleRowBoundaries.header, headerRows.length),\n  );\n  const bodyGrid = getCollapsedGridBlock(\n    bodyRows,\n    adjustedRenderRowBounds(\n      visibleRowBoundaries.body, bodyRows.length, loadedRowsStart,\n    ),\n    totalRowCount || 1,\n    loadedRowsStart,\n  );\n  const footerGrid = getCollapsedGridBlock(\n    footerRows, getRenderRowBounds(visibleRowBoundaries.footer, footerRows.length),\n  );\n\n  return {\n    headerGrid,\n    bodyGrid,\n    footerGrid,\n  };\n};\n\nconst getRenderRowBounds: PureComputed<[RowsVisibleBoundary, number], number[]> = (\n  visibleBounds, rowCount,\n) => getRowsRenderBoundary(\n  rowCount,\n  [visibleBounds.start, visibleBounds.end],\n);\n\nconst adjustedRenderRowBounds: PureComputed<[RowsVisibleBoundary, number, number], number[]> = (\n  visibleBounds, rowCount, loadedRowsStart,\n) => {\n  const renderRowBoundaries = getRenderRowBounds(\n    visibleBounds, loadedRowsStart + rowCount,\n  );\n  const adjustedInterval = intervalUtil.intersect(\n    { start: renderRowBoundaries[0], end: renderRowBoundaries[1] },\n    { start: loadedRowsStart, end: loadedRowsStart + rowCount },\n  );\n  return [adjustedInterval.start, adjustedInterval.end];\n};\n","import { TABLE_DATA_TYPE, TABLE_NODATA_TYPE } from './constants';\nimport {\n  IsSpecificCellFn, IsSpecificRowFn, TableRow, TableColumn,\n} from '../../types';\nimport { TABLE_STUB_TYPE } from '../../utils/virtual-table';\n\nexport const isDataTableCell: IsSpecificCellFn = (\n  tableRow, tableColumn,\n) => tableRow.type === TABLE_DATA_TYPE && tableColumn.type === TABLE_DATA_TYPE;\nexport const isHeaderStubTableCell: IsSpecificCellFn<TableRow, TableRow[]> = (\n  tableRow, headerRows,\n) => headerRows.indexOf(tableRow) > -1;\nexport const isDataTableRow: IsSpecificRowFn = tableRow => tableRow.type === TABLE_DATA_TYPE;\nexport const isNoDataTableRow: IsSpecificRowFn = tableRow => tableRow.type === TABLE_NODATA_TYPE;\nexport const isNoDataTableCell: IsSpecificCellFn<TableColumn, TableColumn[]> = (\n  tableColumn, tableColumns,\n) => tableColumns.indexOf(tableColumn as any) === 0;\nexport const isStubTableCell: IsSpecificRowFn = tableRow => (\n  tableRow.type === TABLE_STUB_TYPE\n);\n","import { PureComputed } from '@devexpress/dx-core';\nimport {\n  GridColumnExtension, GetColumnExtensionValueGetterFn,\n} from '../types';\n\nexport const getColumnExtension: PureComputed<\n  [GridColumnExtension[] | undefined, string], GridColumnExtension\n> = (columnExtensions, columnName) => {\n  if (!columnExtensions) {\n    // tslint:disable-next-line:no-object-literal-type-assertion\n    return {} as GridColumnExtension;\n  }\n  const columnExtension = columnExtensions.find(extension => extension.columnName === columnName);\n  if (!columnExtension) {\n    // tslint:disable-next-line:no-object-literal-type-assertion\n    return {} as GridColumnExtension;\n  }\n  return columnExtension;\n};\n\nexport const getColumnExtensionValueGetter: GetColumnExtensionValueGetterFn = (\n  columnExtensions, extensionName, defaultValue,\n) => (columnName) => {\n  if (columnExtensions) {\n    const columnExtension = getColumnExtension(columnExtensions, columnName);\n    const extensionValue = columnExtension[extensionName];\n    return extensionValue !== undefined ? extensionValue : defaultValue;\n  }\n  return defaultValue;\n};\n","import { PureComputed } from '@devexpress/dx-core';\nimport { TABLE_DATA_TYPE, TABLE_NODATA_TYPE } from './constants';\nimport { getColumnExtension } from '../../utils/column-extension';\nimport { GridColumnExtension, GetCellColSpanFn } from './../../types/table.types';\nimport { Row, GetRowIdFn } from '../../types';\n\nexport const tableColumnsWithDataRows: PureComputed<[any[], GridColumnExtension[]]> = (\n  columns, columnExtensions,\n) => columns.map((column) => {\n  const { name } = column;\n  const columnExtension = getColumnExtension(columnExtensions as GridColumnExtension[], name);\n  return {\n    column,\n    key: `${TABLE_DATA_TYPE.toString()}_${name}`,\n    type: TABLE_DATA_TYPE,\n    width: columnExtension.width,\n    align: columnExtension.align,\n    wordWrapEnabled: columnExtension.wordWrapEnabled,\n  };\n});\n\nexport const tableRowsWithDataRows: PureComputed<[Row[], GetRowIdFn, number]> = (\n  rows, getRowId, isRemoteRowsLoading,\n) => (\n  !rows.length && !isRemoteRowsLoading\n    ? [{ key: TABLE_NODATA_TYPE.toString(), type: TABLE_NODATA_TYPE }]\n    : rows.map((row, dataIndex) => {\n      const rowId = getRowId(row);\n      return {\n        row,\n        // dataIndex,\n        rowId,\n        type: TABLE_DATA_TYPE,\n        key: `${TABLE_DATA_TYPE.toString()}_${rowId}`,\n      };\n    }));\n\nexport const tableCellColSpanGetter: GetCellColSpanFn = (params) => {\n  const { tableRow, tableColumns, tableColumn } = params;\n  if (tableRow.type === TABLE_NODATA_TYPE && tableColumns.indexOf(tableColumn) === 0) {\n    return tableColumns.length;\n  }\n  return 1;\n};\n","import { PureComputed } from '@devexpress/dx-core';\nimport { TABLE_DATA_TYPE } from '../table/constants';\nimport { TableColumn } from '../../types';\n\nexport const visibleTableColumns: PureComputed<[TableColumn[], string[]]> = (\n  tableColumns, hiddenColumnNames,\n) => tableColumns.filter(tableColumn => tableColumn.type !== TABLE_DATA_TYPE\n    || hiddenColumnNames.indexOf(tableColumn.column!.name) === -1);\n","import { TABLE_DATA_TYPE } from '../table/constants';\nimport { TableColumn } from '../../types';\n\nexport const tableDataColumnsExist = (tableColumns: TableColumn[]) => tableColumns.some(\n  column => column.type === TABLE_DATA_TYPE,\n);\n","import { PureComputed } from '@devexpress/dx-core';\nimport { Column } from '../../types/grid-core.types';\nimport { ColumnChooserItem } from '../../types';\n\nexport const columnChooserItems: PureComputed<[Column[], string[]], ColumnChooserItem[]> = (\n  columns, hiddenColumnNames,\n) => columns.map(column => ({\n  column,\n  hidden: hiddenColumnNames.indexOf(column.name) !== -1,\n}));\n","import { PureReducer } from '@devexpress/dx-core';\n\nexport const toggleColumn: PureReducer<string[], string> = (\n  hiddenColumnNames, columnName,\n) => (\n  hiddenColumnNames.indexOf(columnName) === -1\n    ? [...hiddenColumnNames, columnName]\n    : hiddenColumnNames.filter(hiddenColumn => hiddenColumn !== columnName)\n);\n","import { toggle } from '../../utils/common-reducers';\nimport { ToggleRowFieldReducer } from '../../types';\n\nexport const toggleRowExpanded: ToggleRowFieldReducer = (\n  prevExpanded, { rowId, state },\n) => toggle(prevExpanded, [rowId], state);\n","export const GRID_TREE_NODE_TYPE = Symbol('treeNode');\n","import { PureComputed } from '@devexpress/dx-core';\nimport { GRID_TREE_NODE_TYPE } from './constants';\nimport {\n  RowsWithTreeMetaMap, RowsWithCollapsedRowsMetaMap, IsSpecificTreeRowGetter, GetRowIdFn,\n  GetRowLevelKeyFn, GetCollapsedRowsFn, CustomTreeRowsWithMetaComputed, GetCustomTreeRowsFn,\n  UnwrapRowsComputed, GetTreeRowLevelGetter, ExpandedTreeRowsFn,\n} from '../../types';\n\nconst customTreeRows: GetCustomTreeRowsFn = (\n  currentRow, getChildRows, rootRows, level = 0,\n) => {\n  const childRows = getChildRows(currentRow, rootRows as any[]);\n\n  if (!childRows) return { rows: [], treeMeta: [], empty: true };\n\n  return childRows\n    .reduce((acc, row) => {\n      const nestedResult = customTreeRows(\n        row,\n        getChildRows,\n        rootRows,\n        level + 1,\n      );\n      acc.rows.push(row, ...nestedResult.rows);\n      acc.treeMeta.push([row, { level, leaf: !!nestedResult.empty }], ...nestedResult.treeMeta);\n\n      return acc;\n    }, { rows: [], treeMeta: [] });\n};\n\nexport const customTreeRowsWithMeta: CustomTreeRowsWithMetaComputed = (\n  rows, getChildRows,\n) => {\n  const result = customTreeRows(null, getChildRows, rows);\n\n  return {\n    rows: result.rows,\n    treeMeta: new Map(result.treeMeta),\n  };\n};\n\nexport const customTreeRowIdGetter: PureComputed<[GetRowIdFn, RowsWithTreeMetaMap]> = (\n  getRowId, { rows, treeMeta },\n) => {\n  const firstNestedRowIndex = rows.findIndex(row => treeMeta.get(row)!.level > 0);\n  if (firstNestedRowIndex === -1 || getRowId(rows[firstNestedRowIndex]) !== undefined) {\n    return getRowId;\n  }\n  const map = new Map(rows\n    .map((row, rowIndex) => [row, rowIndex] as [any, any]));\n  return row => map.get(row);\n};\n\nexport const customTreeRowLevelKeyGetter: PureComputed<\n  [GetRowLevelKeyFn, RowsWithTreeMetaMap]\n> = (\n  getRowLevelKey, { treeMeta },\n) => (row) => {\n  const rowMeta = treeMeta.get(row);\n  if (rowMeta !== undefined) {\n    return `${GRID_TREE_NODE_TYPE.toString()}_${rowMeta.level}`;\n  }\n  return getRowLevelKey && getRowLevelKey();\n};\n\nexport const expandedTreeRows: ExpandedTreeRowsFn = (\n  { rows, treeMeta }, getRowId, expandedRowIds,\n) => {\n  const expandedRowIdsSet = new Set(expandedRowIds);\n\n  let currentExpanded = true;\n  let currentLevel = 0;\n\n  const collapsedRowsMeta = new Map();\n  const resultRows: object[] = [];\n\n  rows.forEach((row) => {\n    const rowMeta = treeMeta.get(row);\n    const level = rowMeta && rowMeta.level;\n    if (level === undefined && currentExpanded) {\n      resultRows.push(row);\n    } else if (!currentExpanded && (level === undefined || level > currentLevel)) {\n      const lastRow = resultRows[resultRows.length - 1];\n      let collapsedItems = collapsedRowsMeta.get(lastRow);\n      if (!collapsedItems) {\n        collapsedItems = [];\n        collapsedRowsMeta.set(lastRow, collapsedItems);\n      }\n      collapsedItems.push(row);\n    } else {\n      currentExpanded = expandedRowIdsSet.has(getRowId(row));\n      currentLevel = level!;\n\n      resultRows.push(row);\n    }\n  });\n\n  return {\n    treeMeta,\n    collapsedRowsMeta,\n    rows: resultRows,\n  };\n};\n\nexport const collapsedTreeRowsGetter: PureComputed<\n  [GetCollapsedRowsFn, RowsWithCollapsedRowsMetaMap]\n> = (\n  getCollapsedRows, { collapsedRowsMeta },\n) => row => collapsedRowsMeta.get(row) || (getCollapsedRows && getCollapsedRows(row));\n\nexport const isTreeRowLeafGetter: IsSpecificTreeRowGetter = ({ treeMeta }) => (row) => {\n  const rowMeta = treeMeta.get(row);\n  return rowMeta && rowMeta.leaf;\n};\n\nexport const getTreeRowLevelGetter: GetTreeRowLevelGetter = ({ treeMeta }) => (row) => {\n  const rowMeta = treeMeta.get(row);\n  return (rowMeta && rowMeta.level) as number;\n};\n\nexport const unwrappedCustomTreeRows: UnwrapRowsComputed = ({ rows }) => rows;\n","import { TABLE_DATA_TYPE } from '../table/constants';\nimport { IsSpecificCellFn, TableRow, TableColumn } from '../../types';\n\nexport const isTreeTableCell: IsSpecificCellFn<TableRow, TableColumn, string> = (\n  tableRow, tableColumn, forColumnName,\n) => tableRow.type === TABLE_DATA_TYPE && tableColumn.type === TABLE_DATA_TYPE\n  && tableColumn.column!.name === forColumnName;\n","export const changeSearchValue = (\n  prevSearchValue: string, searchValue: string,\n) => searchValue;\n","import { SearchFilterExpressionFn, FilterExpression } from '../../types';\n\nexport const searchFilterExpression: SearchFilterExpressionFn = (\n  searchValue, columns, filterExpression,\n) => {\n  const filters = columns.map(({ name }) => ({ columnName: name, value: searchValue }));\n  const selfFilterExpression: FilterExpression = { filters, operator: 'or' };\n  if (!filterExpression) {\n    return selfFilterExpression;\n  }\n  return {\n    operator: 'and',\n    filters: [filterExpression as FilterExpression, selfFilterExpression],\n  };\n};\n","import { PureComputed } from '@devexpress/dx-core';\nimport { GetAvailableFilterOperationsFn, FilterOperation } from '../../types';\n\nexport const getAvailableFilterOperationsGetter: PureComputed<\n  [GetAvailableFilterOperationsFn, FilterOperation[], string[]]\n> = (\n  getAvailableFilterOperations,\n  availableFilterOperations,\n  columnNames,\n) => columnName => (columnNames.indexOf(columnName) > -1 && availableFilterOperations)\n// tslint:disable-next-line: max-line-length\n    || (typeof getAvailableFilterOperations === 'function' && getAvailableFilterOperations(columnName))\n    || undefined;\n","export const FIXED_COLUMN_LEFT_SIDE = 'left';\nexport const FIXED_COLUMN_RIGHT_SIDE = 'right';\nexport const TABLE_FIXED_TYPE = Symbol('fixed');\n","import { slice } from '@devexpress/dx-core';\nimport { TABLE_DATA_TYPE } from '../table/constants';\nimport {\n  FIXED_COLUMN_LEFT_SIDE, TABLE_FIXED_TYPE,\n} from './constants';\nimport { findChainByColumnIndex } from '../table-header-row/helpers';\nimport {\n  GetFixedColumnKeysFn, IsSpecificRowFn, CalculatePositionFn, CalculateFixedColumnPropsFn,\n} from '../../types';\n\nexport const getFixedColumnKeys: GetFixedColumnKeysFn = (tableColumns, fixedNames) => tableColumns\n  .filter(tableColumn => (\n    (tableColumn.type === TABLE_DATA_TYPE && fixedNames.indexOf(tableColumn.column!.name) !== -1)\n    || fixedNames.indexOf(tableColumn.type) !== -1\n  ))\n  .map(({ key }) => key);\n\nexport const isFixedTableRow: IsSpecificRowFn = tableRow => tableRow.type === TABLE_FIXED_TYPE;\n\nconst calculatePosition: CalculatePositionFn = (array, index, tableColumnDimensions) => (\n  index === 0\n    ? 0\n    : array\n      .slice(0, index)\n      .reduce((acc, target) => acc + tableColumnDimensions[target] || 0, 0)\n);\n\nexport const calculateFixedColumnProps: CalculateFixedColumnPropsFn = (\n  { tableColumn },\n  { leftColumns, rightColumns },\n  tableColumns,\n  tableColumnDimensions,\n  tableHeaderColumnChains,\n) => {\n  const side = tableColumn.fixed!;\n  const targetArray = side === FIXED_COLUMN_LEFT_SIDE\n    ? getFixedColumnKeys(tableColumns, leftColumns)\n    : slice(getFixedColumnKeys(tableColumns, rightColumns)).reverse();\n\n  const index = tableColumns.findIndex(({ key }) => key === tableColumn.key);\n  const fixedIndex = targetArray.indexOf(tableColumn.key);\n  const columnChain = findChainByColumnIndex(tableHeaderColumnChains[0], index)!;\n\n  const showLeftDivider = columnChain.start === index && index !== 0;\n  const showRightDivider = columnChain.start + columnChain.columns.length - 1 === index\n    && index < tableColumns.length - 1;\n\n  const position = calculatePosition(targetArray, fixedIndex, tableColumnDimensions);\n\n  return {\n    showRightDivider,\n    showLeftDivider,\n    position,\n    side,\n  };\n};\n","import { PureComputed } from '@devexpress/dx-core';\nimport { TABLE_DATA_TYPE } from '../table/constants';\nimport { FIXED_COLUMN_LEFT_SIDE, FIXED_COLUMN_RIGHT_SIDE, TABLE_FIXED_TYPE } from './constants';\nimport { splitHeaderColumnChains, generateSimpleChains } from '../table-header-row/helpers';\nimport {\n  FixedColumnName, TableColumn, FixedColumnSide, TableRow, HeaderColumnChainRows,\n  ShouldSplitChainFn,\n} from '../../types';\n\nexport const tableColumnsWithFixed: PureComputed<\n  [TableColumn[], FixedColumnName[], FixedColumnName[]]\n> = (\n  tableColumns, leftColumns, rightColumns,\n) => tableColumns\n  .map((tableColumn) => {\n    let fixed!: FixedColumnSide;\n    if ((tableColumn.type === TABLE_DATA_TYPE\n      && leftColumns.indexOf(tableColumn.column!.name) !== -1)\n      || leftColumns.indexOf(tableColumn.type) !== -1) {\n      fixed = FIXED_COLUMN_LEFT_SIDE;\n    }\n    if ((tableColumn.type === TABLE_DATA_TYPE\n      && rightColumns.indexOf(tableColumn.column!.name) !== -1)\n      || rightColumns.indexOf(tableColumn.type) !== -1) {\n      fixed = FIXED_COLUMN_RIGHT_SIDE;\n    }\n    return fixed ? { ...tableColumn, fixed } : tableColumn;\n  });\n\nexport const tableHeaderRowsWithFixed: PureComputed<[TableRow[]]> = tableHeaderRows => [\n  ...tableHeaderRows,\n  { key: TABLE_FIXED_TYPE.toString(), type: TABLE_FIXED_TYPE, height: 0 },\n];\n\nexport const tableHeaderColumnChainsWithFixed: PureComputed<\n  [HeaderColumnChainRows, TableRow[], TableColumn[]]\n> = (\n  tableHeaderColumnChains, tableHeaderRows, tableColumns,\n) => {\n  const chains = tableHeaderColumnChains\n    || generateSimpleChains(tableHeaderRows, tableColumns);\n\n  const shouldSplitChain: ShouldSplitChainFn = (currentGroup, column) => (\n    !currentGroup || (currentGroup as any).fixed !== column.fixed\n  );\n  const extendChainProps = (column: TableColumn) => ({\n    fixed: column.fixed,\n  });\n  return splitHeaderColumnChains(\n    chains,\n    tableColumns,\n    shouldSplitChain,\n    extendChainProps,\n  );\n};\n","import {\n  SummaryValue, SummaryCalculator,\n  DefaultSummaryCalculators,\n  Row,\n  TotalSummaryValuesFn,\n  GroupSummaryValuesFn,\n  TreeSummaryValuesFn,\n  RowsSummaryValuesFn,\n} from '../../types';\n\nconst defaultSummaryCalculators: DefaultSummaryCalculators = {\n  count: rows => rows.length,\n  sum: (rows, getValue) => rows.reduce((acc, row) => acc + getValue(row), 0),\n  max: (rows, getValue) => (rows.length\n    ? rows.reduce((acc, row) => Math.max(acc, getValue(row)), -Infinity)\n    : null),\n  min: (rows, getValue) => (rows.length\n    ? rows.reduce((acc, row) => Math.min(acc, getValue(row)), Infinity)\n    : null),\n  avg: (rows, getValue) => (rows.length\n    ? rows.reduce((acc, row) => acc + getValue(row), 0) / rows.length\n    : null),\n};\n\nexport const defaultSummaryCalculator: SummaryCalculator = (type, rows, getValue) => {\n  const summaryCalculator = defaultSummaryCalculators[type];\n  if (!summaryCalculator) {\n    throw new Error(`The summary type '${type}' is not defined`);\n  }\n  return summaryCalculator(rows, getValue);\n};\n\nconst rowsSummary: RowsSummaryValuesFn = (\n  rows, summaryItems, getCellValue, calculator,\n) => summaryItems\n  .reduce((acc, { type, columnName }) => {\n    const getValue = (row: Row) => getCellValue(row, columnName);\n    acc.push(calculator(type, rows as any[], getValue));\n    return acc;\n  }, [] as SummaryValue[]);\n\nexport const totalSummaryValues: TotalSummaryValuesFn = (\n  rows,\n  summaryItems,\n  getCellValue,\n  getRowLevelKey,\n  isGroupRow,\n  getCollapsedRows,\n  calculator = defaultSummaryCalculator,\n) => {\n  const plainRows = rows.reduce((acc, row) => {\n    if (getRowLevelKey && getRowLevelKey(row)) {\n      if (!isGroupRow || !isGroupRow(row)) {\n        acc.push(row);\n      }\n      const collapsedRows = getCollapsedRows && getCollapsedRows(row);\n      if (collapsedRows) {\n        acc.push(...collapsedRows);\n      }\n      return acc;\n    }\n    acc.push(row);\n    return acc;\n  }, [] as Row[]);\n  return rowsSummary(plainRows, summaryItems, getCellValue, calculator);\n};\n\nexport const groupSummaryValues: GroupSummaryValuesFn = (\n  rows,\n  summaryItems,\n  getCellValue,\n  getRowLevelKey,\n  isGroupRow,\n  calculator = defaultSummaryCalculator,\n) => {\n  let levels: any[] = [];\n  const summaries = {};\n  rows.forEach((row) => {\n    const levelKey = getRowLevelKey(row);\n    if (!levelKey) {\n      levels.forEach((level) => {\n        level.rows.push(row);\n      });\n    }\n    const levelIndex = levels.findIndex(level => level.levelKey === levelKey);\n    if (levelIndex > -1) {\n      levels.slice(levelIndex).forEach((level) => {\n        summaries[level.row.compoundKey] = rowsSummary(\n          level.rows, summaryItems, getCellValue, calculator,\n        );\n      });\n      levels = levels.slice(0, levelIndex);\n    }\n    if (isGroupRow!(row)) {\n      levels.push({\n        levelKey,\n        row,\n        rows: [],\n      });\n    }\n  }, {});\n  levels.forEach((level) => {\n    summaries[level.row.compoundKey] = rowsSummary(\n      level.rows, summaryItems, getCellValue, calculator,\n    );\n  });\n  return summaries;\n};\n\nexport const treeSummaryValues: TreeSummaryValuesFn = (\n  rows,\n  summaryItems,\n  getCellValue,\n  getRowLevelKey,\n  isGroupRow,\n  getRowId,\n  calculator = defaultSummaryCalculator,\n) => {\n  let levels: any[] = [];\n  const summaries = {};\n  rows.forEach((row) => {\n    const levelKey = getRowLevelKey(row);\n    if (!levelKey) {\n      levels[levels.length - 1].rows.push(row);\n      return;\n    }\n    const levelIndex = levels.findIndex(level => level.levelKey === levelKey);\n    if (levelIndex > -1) {\n      levels.slice(levelIndex).forEach((level) => {\n        if (level.rows.length) {\n          summaries[getRowId(level.row)] = rowsSummary(\n            level.rows, summaryItems, getCellValue, calculator,\n          );\n        }\n      });\n      levels = levels.slice(0, levelIndex);\n    }\n    if (!isGroupRow || !isGroupRow(row)) {\n      if (levels.length) {\n        levels[levels.length - 1].rows.push(row);\n      }\n      levels.push({\n        levelKey,\n        row,\n        rows: [],\n      });\n    }\n  }, {});\n  levels.forEach((level) => {\n    if (level.rows.length) {\n      summaries[getRowId(level.row)] = rowsSummary(\n        level.rows, summaryItems, getCellValue, calculator,\n      );\n    }\n  });\n  return summaries;\n};\n","export const TABLE_TOTAL_SUMMARY_TYPE = Symbol('totalSummary');\nexport const TABLE_GROUP_SUMMARY_TYPE = Symbol('groupSummary');\nexport const TABLE_TREE_SUMMARY_TYPE = Symbol('treeSummary');\n","import { PureComputed } from '@devexpress/dx-core';\nimport {\n  TABLE_TOTAL_SUMMARY_TYPE,\n  TABLE_GROUP_SUMMARY_TYPE,\n  TABLE_TREE_SUMMARY_TYPE,\n} from './constants';\nimport {\n  TableRow, RowLevel, TableRowsWithSummariesFn,\n} from '../../types';\n\nexport const tableRowsWithTotalSummaries: PureComputed<[TableRow[]]> = footerRows => [\n  { key: TABLE_TOTAL_SUMMARY_TYPE.toString(), type: TABLE_TOTAL_SUMMARY_TYPE },\n  ...footerRows,\n];\n\nexport const tableRowsWithSummaries: TableRowsWithSummariesFn = (\n  tableRows, getRowLevelKey, isGroupRow, getRowId,\n) => {\n  if (!getRowLevelKey) return tableRows;\n\n  const result: TableRow[] = [];\n  const closeLevel = (level: RowLevel) => {\n    if (!level.opened) return;\n    if (isGroupRow && isGroupRow(level.row)) {\n      const { compoundKey } = level.row;\n      result.push({\n        key: `${TABLE_GROUP_SUMMARY_TYPE.toString()}_${compoundKey}`,\n        type: TABLE_GROUP_SUMMARY_TYPE,\n        row: level.row,\n      });\n    } else {\n      const rowId = getRowId(level.row);\n      result.push({\n        key: `${TABLE_TREE_SUMMARY_TYPE.toString()}_${rowId}`,\n        type: TABLE_TREE_SUMMARY_TYPE,\n        row: level.row,\n      });\n    }\n  };\n\n  let levels: RowLevel[] = [];\n  tableRows.forEach((tableRow) => {\n    const { row } = tableRow;\n    const levelKey = getRowLevelKey(row);\n    if (levelKey) {\n      const levelIndex = levels.findIndex(level => level.levelKey === levelKey);\n      if (levelIndex > -1) {\n        levels.slice(levelIndex).reverse().forEach(closeLevel);\n        levels = levels.slice(0, levelIndex);\n      }\n      if (!isGroupRow || !isGroupRow(row)) {\n        levels = levels.map(level => ({\n          ...level,\n          opened: true,\n        }));\n      }\n      levels.push({\n        levelKey,\n        row,\n        opened: false,\n      });\n    } else {\n      levels = levels.map(level => ({\n        ...level,\n        opened: true,\n      }));\n    }\n    result.push(tableRow);\n  });\n  levels.slice().reverse().forEach(closeLevel);\n\n  return result;\n};\n","import {\n  TABLE_TOTAL_SUMMARY_TYPE, TABLE_GROUP_SUMMARY_TYPE, TABLE_TREE_SUMMARY_TYPE,\n} from './constants';\nimport { TABLE_DATA_TYPE } from '../table/constants';\nimport { GetColumnSummariesFn, IsSpecificCellFn, IsSpecificRowFn, SummaryItem } from '../../types';\n\nexport const isTotalSummaryTableCell: IsSpecificCellFn = (\n  tableRow, tableColumn,\n) => tableRow.type === TABLE_TOTAL_SUMMARY_TYPE && tableColumn.type === TABLE_DATA_TYPE;\nexport const isGroupSummaryTableCell: IsSpecificCellFn = (\n  tableRow, tableColumn,\n) => tableRow.type === TABLE_GROUP_SUMMARY_TYPE && tableColumn.type === TABLE_DATA_TYPE;\nexport const isTreeSummaryTableCell: IsSpecificCellFn = (\n  tableRow, tableColumn,\n) => tableRow.type === TABLE_TREE_SUMMARY_TYPE && tableColumn.type === TABLE_DATA_TYPE;\nexport const isTotalSummaryTableRow: IsSpecificRowFn = tableRow => (\n  tableRow.type === TABLE_TOTAL_SUMMARY_TYPE\n);\nexport const isGroupSummaryTableRow: IsSpecificRowFn = tableRow => (\n  tableRow.type === TABLE_GROUP_SUMMARY_TYPE\n);\nexport const isTreeSummaryTableRow: IsSpecificRowFn = tableRow => (\n  tableRow.type === TABLE_TREE_SUMMARY_TYPE\n);\n\nexport const getColumnSummaries: GetColumnSummariesFn = (\n  summaryItems, columnName, summaryValues,\n) => summaryItems\n  .map((item, index) => [item, index] as [SummaryItem, number])\n  .filter(([item]) => item.columnName === columnName)\n  .map(([item, index]) => ({\n    type: item.type,\n    value: summaryValues[index],\n  }));\n","import { GetTargetColumnGeometriesFn } from '../types';\n\nexport const getTargetColumnGeometries: GetTargetColumnGeometriesFn = (\n  columnGeometries, sourceIndex,\n) => {\n  const sourceWidth = columnGeometries[sourceIndex].right - columnGeometries[sourceIndex].left;\n  const getWidthDifference = (index: number) => columnGeometries[index].right\n                                      - columnGeometries[index].left\n                                      - sourceWidth;\n\n  return columnGeometries\n    .map(({\n      top, right, bottom, left,\n    }, targetIndex) => {\n      let leftBorder = left;\n      if (targetIndex > 0 && targetIndex <= sourceIndex) {\n        leftBorder = Math.min(leftBorder, leftBorder - getWidthDifference(targetIndex - 1));\n      }\n      if (targetIndex > sourceIndex) {\n        leftBorder = Math.max(leftBorder, leftBorder + getWidthDifference(targetIndex));\n      }\n      let rightBorder = right;\n      if (targetIndex < columnGeometries.length - 1 && targetIndex >= sourceIndex) {\n        rightBorder = Math.max(rightBorder, rightBorder + getWidthDifference(targetIndex + 1));\n      }\n      if (targetIndex < sourceIndex) {\n        rightBorder = Math.min(rightBorder, rightBorder - getWidthDifference(targetIndex));\n      }\n\n      return {\n        top,\n        bottom,\n        right: rightBorder,\n        left: leftBorder,\n      };\n    });\n};\n","import { easeOutCubic } from '@devexpress/dx-core';\nimport { getTargetColumnGeometries } from './column-geometries';\nimport {\n  GetTableColumnGeometriesFn, GetTableTargetColumnIndexFn, ColumnAnimation,\n  GetColumnAnimationsFn, ColumnGeometry, FilterActiveAnimationsFn, EvalAnimationsFn,\n} from '../types';\n\nexport const getTableColumnGeometries: GetTableColumnGeometriesFn = (columns, tableWidth) => {\n  const columnWidths = columns\n    .map(column => column.width);\n\n  const freeSpace = tableWidth;\n  const restrictedSpace = columnWidths\n    .reduce((accum, width) => accum! + (width || 0), 0);\n  const freeSpacePortions = columnWidths\n    .reduce((accum, width) => accum! + (width === undefined ? 1 : 0), 0);\n  const freeSpacePortion = (freeSpace - restrictedSpace!) / freeSpacePortions!;\n\n  let lastRightPosition = 0;\n  return columnWidths\n    .map(width => (width === undefined ? freeSpacePortion : width))\n    .map((width) => {\n      lastRightPosition += width;\n      return {\n        left: lastRightPosition - width,\n        right: lastRightPosition,\n      };\n    });\n};\n\nexport const getTableTargetColumnIndex: GetTableTargetColumnIndexFn = (\n  columnGeometries, sourceIndex, offset,\n) => getTargetColumnGeometries(columnGeometries, sourceIndex)\n  .findIndex(({ left, right }) => offset > left && offset < right);\n\nconst ANIMATION_DURATION = 200;\n\nconst getAnimationProgress = (animation: ColumnAnimation) => (\n  new Date().getTime() - animation.startTime) / ANIMATION_DURATION;\n\nexport const getAnimations: GetColumnAnimationsFn = (\n  prevColumns,\n  nextColumns,\n  tableWidth,\n  prevAnimations,\n) => {\n  const resizing = prevColumns.map(column => column.key).join()\n    === nextColumns.map(column => column.key).join();\n\n  const prevColumnGeometries = new Map<string, ColumnGeometry>(\n    getTableColumnGeometries(prevColumns, tableWidth)\n      .map((geometry, index) => [prevColumns[index].key, geometry] as [string, ColumnGeometry])\n      .map(([key, geometry]) => {\n        const animation = prevAnimations.get(key);\n        if (!animation) return [key, geometry];\n        const progress = easeOutCubic(getAnimationProgress(animation));\n        const { to, from } = animation.left!;\n        const left = ((to - from) * progress) + from;\n        return [key, {\n          left,\n          right: geometry.right - (geometry.left - left),\n        }];\n      // tslint:disable-next-line:array-type\n      }) as [string, ColumnGeometry][],\n    );\n\n  const nextColumnGeometries = new Map(\n    getTableColumnGeometries(nextColumns, tableWidth)\n      // tslint:disable-next-line:array-type\n      .map((geometry, index) => [nextColumns[index].key, geometry]) as [string, ColumnGeometry][],\n  );\n\n  return new Map([...nextColumnGeometries.keys()]\n    .map((key) => {\n      const prev: any = prevColumnGeometries.get(key);\n      const next: any = nextColumnGeometries.get(key);\n\n      const result: ColumnAnimation = { startTime: new Date().getTime(), style: {} };\n      const takePrevColumnIntoAccount = !!prevAnimations.get(key) || (prev && !resizing);\n      if (Math.abs((takePrevColumnIntoAccount ? prev!.left : next!.left) - next!.left) > 1) {\n        result.left = { from: prev.left, to: next.left };\n      }\n      return [key, result] as [string, ColumnAnimation];\n    })\n    .filter((animation: [string, ColumnAnimation]) => animation[1].left));\n};\n\nexport const filterActiveAnimations: FilterActiveAnimationsFn = animations => new Map(\n  [...animations.entries()]\n    .filter(([, animation]) => getAnimationProgress(animation) < 1),\n);\n\nexport const evalAnimations: EvalAnimationsFn = animations => new Map([...animations.entries()]\n  .map(([key, animation]): [string, object] => {\n    const progress = easeOutCubic(getAnimationProgress(animation));\n    const result = { ...animation.style };\n    if (animation.left) {\n      const offset = (animation.left.to - animation.left.from) * (progress - 1);\n      (result as any).transform = `translateX(${offset}px)`;\n    }\n    return [key, result];\n  }));\n","import { getTargetColumnGeometries } from './column-geometries';\nimport { TargetColumnGeometry, GetGroupCellTargetIndexFn } from '../types';\nimport { PureComputed } from '@devexpress/dx-core';\n\nconst isOnTheSameLine: PureComputed<[TargetColumnGeometry, number], boolean> = (geometry, y) => (\n  y >= geometry.top && y <= geometry.bottom\n);\n\nconst rectToObject = ({\n  top, right, bottom, left,\n}: TargetColumnGeometry) => ({\n  top, right, bottom, left,\n});\n\nconst collapseGapsBetweenItems: PureComputed<[TargetColumnGeometry[]]> = geometries => (\n  geometries.map((geometry, index) => {\n    if (index !== geometries.length - 1 && geometry.top === geometries[index + 1].top) {\n      return {\n        ...geometry,\n        right: geometries[index + 1].left,\n      };\n    }\n    return geometry;\n  }));\n\nexport const getGroupCellTargetIndex: GetGroupCellTargetIndexFn = (\n  geometries, sourceIndex, { x, y },\n) => {\n  if (geometries.length === 0) return 0;\n\n  const targetGeometries = sourceIndex !== -1\n    ? getTargetColumnGeometries(geometries, sourceIndex)\n    : geometries.map(rectToObject);\n\n  const targetIndex = collapseGapsBetweenItems(targetGeometries)\n    .findIndex((geometry, index) => {\n      const inVerticalBounds = isOnTheSameLine(geometry, y);\n      const inHorizontalBounds = x >= geometry.left && x <= geometry.right;\n      const shouldGoFirst = index === 0 && x < geometry.left;\n      const shouldGoOnLineBreak = !inVerticalBounds\n        && !!geometries[index - 1]\n        && isOnTheSameLine(geometries[index - 1], y);\n\n      return (inVerticalBounds && inHorizontalBounds)\n        || shouldGoFirst\n        || shouldGoOnLineBreak;\n    });\n\n  return targetIndex === -1 ? geometries.length : targetIndex;\n};\n","import { PageTriggersMetaFn } from '../../types';\n\n/** how many rows up and down before next page request */\nexport const pageTriggersMeta: PageTriggersMetaFn = (\n  { containerHeight, visibleRowBoundaries, estimatedRowHeight },\n  { pageSize, virtualRows },\n) => {\n  const loadedCount = virtualRows.rows.length;\n  if (loadedCount === 0) {\n    return null;\n  }\n\n  const loadedRowsStart = virtualRows.skip;\n  const topTriggerIndex = loadedRowsStart > 0 ? loadedRowsStart + pageSize : 0;\n  const bottomTriggerIndex = loadedRowsStart + loadedCount - pageSize;\n  const bodyBoundaries = visibleRowBoundaries.body;\n  const firstRowIndex = bodyBoundaries.start;\n  const visibleCount = bodyBoundaries.end - bodyBoundaries.start;\n  const middleIndex = firstRowIndex + Math.round(visibleCount / 2);\n\n  const middlePosition = visibleRowBoundaries.viewportTop + containerHeight / 2;\n\n  const topTriggerOffset = (middleIndex - topTriggerIndex) * estimatedRowHeight;\n  const bottomTriggerOffset = (bottomTriggerIndex - middleIndex) * estimatedRowHeight;\n  const topTriggerPosition = middlePosition - topTriggerOffset;\n  const bottomTriggerPosition = middlePosition + bottomTriggerOffset;\n\n  return {\n    topTriggerIndex,\n    topTriggerPosition,\n    bottomTriggerIndex,\n    bottomTriggerPosition,\n  };\n};\n","import { Getters } from '@devexpress/dx-react-core';\nimport {\n  getRowsVisibleBoundary,\n} from '../../utils/virtual-table';\nimport { RowsVisibleBoundaryFn } from '../../types';\nimport { pageTriggersMeta } from './helpers';\n\nexport const getVisibleRowsBounds: RowsVisibleBoundaryFn = (\n  state, getters, estimatedRowHeight, getRowHeight,\n) => {\n  const {\n    viewportTop, containerHeight, headerHeight, footerHeight,\n  } = state;\n  const {\n    loadedRowsStart,\n    bodyRows,\n    headerRows = [],\n    footerRows = [],\n  } = getters;\n\n  return {\n    viewportTop,\n    header: getRowsVisibleBoundary(\n      headerRows, 0, headerHeight,\n      getRowHeight, 0, estimatedRowHeight,\n    ),\n    body: getRowsVisibleBoundary(\n      bodyRows, viewportTop, containerHeight - headerHeight - footerHeight,\n      getRowHeight, loadedRowsStart, estimatedRowHeight,\n    ),\n    footer: getRowsVisibleBoundary(\n      footerRows, 0, footerHeight,\n      getRowHeight, 0, estimatedRowHeight,\n    ),\n  };\n};\n\nexport const nextPageReferenceIndex = (\n  payload: any,\n  getters: Getters,\n) => {\n  const triggersMeta = pageTriggersMeta(payload, getters);\n  if (triggersMeta === null) {\n    return null;\n  }\n\n  const {\n    topTriggerPosition, bottomTriggerPosition, topTriggerIndex, bottomTriggerIndex,\n  } = triggersMeta;\n  const { viewportTop, estimatedRowHeight, containerHeight } = payload;\n  const referencePosition = viewportTop + containerHeight / 2;\n\n  const getReferenceIndex = (triggetIndex: number, triggerPosition: number) => (\n    triggetIndex + Math.round((referencePosition - triggerPosition) / estimatedRowHeight)\n  );\n\n  let referenceIndex: number | null = null;\n  if (referencePosition < topTriggerPosition) {\n    referenceIndex = getReferenceIndex(topTriggerIndex, topTriggerPosition);\n  }\n  if (bottomTriggerPosition < referencePosition) {\n    referenceIndex = getReferenceIndex(bottomTriggerIndex, bottomTriggerPosition);\n  }\n\n  return referenceIndex;\n};\n","import { PureComputed } from '@devexpress/dx-core';\nimport { emptyVirtualRows } from './helpers';\nimport { Interval, VirtualRows } from '../../types';\n\nconst empty: Interval = {\n  start: Number.POSITIVE_INFINITY,\n  end: Number.NEGATIVE_INFINITY,\n};\n\nconst getRowsInterval: PureComputed<[VirtualRows], Interval> = r => (\n  r === emptyVirtualRows\n    ? empty\n    : {\n      start: r.skip,\n      end: r.skip + r.rows.length,\n    }\n);\n\nconst getLength = (a: Interval) => a.end - a.start;\n\nconst intersect = (a: Interval, b: Interval) => {\n  if (a.end < b.start || b.end < a.start) {\n    return empty;\n  }\n\n  return {\n    start: Math.max(a.start, b.start),\n    end: Math.min(a.end, b.end),\n  };\n};\n\nconst difference = (a: Interval, b: Interval) => {\n  if (empty === intervalUtil.intersect(a, b)) {\n    return a;\n  }\n\n  if (b.end < a.end) {\n    return {\n      start: b.end,\n      end: a.end,\n    };\n  }\n  if (a.start < b.start) {\n    return {\n      start: a.start,\n      end: b.start,\n    };\n  }\n  return empty;\n};\n\nexport const intervalUtil = {\n  empty,\n\n  getRowsInterval,\n  getLength,\n\n  intersect,\n  difference,\n};\n","import { intervalUtil } from './utils';\nimport {\n  VirtualRows, Row, MergeRowsFn, CalculateRequestedRangeFn, Interval,\n} from '../../types';\nimport { PureComputed } from '@devexpress/dx-core';\n\nexport const emptyVirtualRows: VirtualRows = {\n  skip: Number.POSITIVE_INFINITY,\n  rows: [],\n};\n\nconst pluckSubarray: PureComputed<[Row[], ...number[]]> = (source, sourceStart, left, right) => (\n  source.slice(left - sourceStart, right - sourceStart)\n);\n\nexport const mergeRows: MergeRowsFn = (\n  rowsInterval, cacheInterval, rows, cacheRows, rowsStart, cacheStart,\n) => {\n  const breakpoints = [\n    rowsInterval.start, rowsInterval.end,\n    cacheInterval.start, cacheInterval.end,\n  ]\n    .filter(i => 0 <= i && i < Number.POSITIVE_INFINITY)\n    .sort((a, b) => a - b);\n\n  let result: Row[] = [];\n  if (breakpoints.length > 1) {\n    for (let i = 0; i < breakpoints.length - 1; i += 1) {\n      const left = breakpoints[i];\n      const right = breakpoints[i + 1];\n      const chunk = rowsInterval.start <= left && right <= rowsInterval.end\n        ? pluckSubarray(rows, rowsStart, left, right) // rows have higher priority\n        : pluckSubarray(cacheRows, cacheStart, left, right);\n\n      result = result.concat(chunk);\n    }\n  }\n\n  return {\n    skip: breakpoints[0],\n    rows: result,\n  };\n};\n\nexport const calculateRequestedRange: CalculateRequestedRangeFn = (\n  loadedInterval, newRange, referenceIndex, pageSize,\n) => {\n  if (Math.abs(loadedInterval.start - newRange.start) >= 2 * pageSize) {\n    const useFirstHalf = referenceIndex % pageSize < pageSize / 2;\n    const start = useFirstHalf\n      ? newRange.start\n      : newRange.start + pageSize;\n    const end = Math.min(newRange.end, start + 2 * pageSize);\n\n    return { start, end };\n  }\n  return intervalUtil.difference(newRange, loadedInterval);\n};\n\nexport const rowToPageIndex: PureComputed<[number, number]> = (\n  rowIndex, pageSize,\n) => Math.floor(rowIndex / pageSize);\n\nexport const recalculateBounds: PureComputed<[number, number, number], Interval> = (\n  middleIndex, pageSize, totalCount,\n) => {\n  const currentPageIndex = rowToPageIndex(middleIndex, pageSize);\n\n  const prevPageIndex = currentPageIndex - 1;\n  const nextPageIndex = currentPageIndex + 2;\n  const start = Math.max(0, prevPageIndex * pageSize);\n  const end = Math.min(nextPageIndex * pageSize, totalCount);\n\n  return {\n    start,\n    end,\n  };\n};\n\nexport const trimRowsToInterval: PureComputed<[VirtualRows, Interval]> = (\n  virtualRows, targetInterval,\n) => {\n  const rowsInterval = intervalUtil.getRowsInterval(virtualRows);\n  const intersection = intervalUtil.intersect(rowsInterval, targetInterval);\n  if (intervalUtil.empty === intersection) {\n    return emptyVirtualRows;\n  }\n\n  const rows = pluckSubarray(\n    virtualRows.rows, virtualRows.skip, intersection.start, intersection.end,\n  );\n\n  return {\n    rows,\n    skip: intersection.start,\n  };\n};\n\nexport const getAvailableRowCount: PureComputed<[boolean, number, number, number], number> = (\n  infiniteScroll, newCount, lastCount, totalRowCount,\n) => (\n  infiniteScroll\n    ? Math.max(newCount, lastCount)\n    : totalRowCount\n);\n","import { mergeRows } from './helpers';\nimport { intervalUtil } from './utils';\nimport { VirtualRowsWithCacheFn, PlainRowsFn, LoadedRowsStartFn } from '../../types';\n\nexport const virtualRowsWithCache: VirtualRowsWithCacheFn = (skip, rows, cache) => {\n  const rowsInterval = intervalUtil.getRowsInterval({ skip, rows });\n  const cacheInterval = intervalUtil.getRowsInterval(cache);\n\n  return mergeRows(rowsInterval, cacheInterval, rows, cache.rows, skip, cache.skip);\n};\n\nexport const plainRows: PlainRowsFn = virtualRows => virtualRows.rows;\n\nexport const loadedRowsStart: LoadedRowsStartFn = virtualRows => virtualRows.skip;\n","/** @internal */\nexport * from './plugins/grid-core/computeds';\n\n/** @internal */\nexport * from './plugins/sorting-state/reducers';\n/** @internal */\nexport * from './plugins/sorting-state/helpers';\n/** @internal */\nexport * from './plugins/integrated-sorting/computeds';\n\n/** @internal */\nexport * from './plugins/filtering-state/reducers';\n/** @internal */\nexport * from './plugins/filtering-state/helpers';\n/** @internal */\nexport * from './plugins/filtering-state/computeds';\n/** @internal */\nexport * from './plugins/integrated-filtering/computeds';\n\n/** @internal */\nexport * from './plugins/grouping-state/constants';\n/** @internal */\nexport * from './plugins/grouping-state/reducers';\n/** @internal */\nexport * from './plugins/grouping-state/helpers';\n/** @internal */\nexport * from './plugins/integrated-grouping/computeds';\n/** @internal */\nexport * from './plugins/custom-grouping/computeds';\n/** @internal */\nexport * from './plugins/grouping-panel/helpers';\n\n/** @internal */\nexport * from './plugins/paging-state/reducers';\n/** @internal */\nexport * from './plugins/integrated-paging/computeds';\n/** @internal */\nexport * from './plugins/integrated-paging/helpers';\n/** @internal */\nexport * from './plugins/paging-panel/helpers';\n\n/** @internal */\nexport * from './plugins/selection-state/reducers';\n/** @internal */\nexport * from './plugins/integrated-selection/computeds';\n\n/** @internal */\nexport * from './plugins/editing-state/reducers';\n/** @internal */\nexport * from './plugins/editing-state/computeds';\n/** @internal */\nexport * from './plugins/editing-state/helpers';\n\n/** @internal */\nexport * from './plugins/table-column-reordering/constants';\n/** @internal */\nexport * from './plugins/table-column-reordering/reducers';\n/** @internal */\nexport * from './plugins/table-column-reordering/computeds';\n\n/** @internal */\nexport * from './plugins/table-column-resizing/computeds';\n/** @internal */\nexport * from './plugins/table-column-resizing/reducers';\n\n/** @internal */\nexport * from './plugins/table-edit-column/constants';\n/** @internal */\nexport * from './plugins/table-edit-column/helpers';\n/** @internal */\nexport * from './plugins/table-edit-column/computeds';\n\n/** @internal */\nexport * from './plugins/table-edit-row/constants';\n/** @internal */\nexport * from './plugins/table-edit-row/helpers';\n/** @internal */\nexport * from './plugins/table-edit-row/computeds';\n\n/** @internal */\nexport * from './plugins/table-filter-row/constants';\n/** @internal */\nexport * from './plugins/table-filter-row/helpers';\n/** @internal */\nexport * from './plugins/table-filter-row/computeds';\n\n/** @internal */\nexport * from './plugins/table-group-row/constants';\n/** @internal */\nexport * from './plugins/table-group-row/helpers';\n/** @internal */\nexport * from './plugins/table-group-row/computeds';\n\n/** @internal */\nexport * from './plugins/table-header-row/constants';\n/** @internal */\nexport * from './plugins/table-header-row/helpers';\n/** @internal */\nexport * from './plugins/table-header-row/computeds';\n\n/** @internal */\nexport * from './plugins/table-band-header/constants';\n/** @internal */\nexport * from './plugins/table-band-header/helpers';\n/** @internal */\nexport * from './plugins/table-band-header/computeds';\n\n/** @internal */\nexport * from './plugins/row-detail-state/reducers';\n/** @internal */\nexport * from './plugins/table-row-detail/constants';\n/** @internal */\nexport * from './plugins/table-row-detail/helpers';\n/** @internal */\nexport * from './plugins/table-row-detail/computeds';\n\n/** @internal */\nexport * from './plugins/table-selection/constants';\n/** @internal */\nexport * from './plugins/table-selection/helpers';\n/** @internal */\nexport * from './plugins/table-selection/computeds';\n\n/** @internal */\nexport * from './plugins/table/constants';\n/** @internal */\nexport * from './plugins/table/helpers';\n/** @internal */\nexport * from './plugins/table/computeds';\n\n/** @internal */\nexport * from './plugins/table-column-visibility/computeds';\n/** @internal */\nexport * from './plugins/table-column-visibility/helpers';\n\n/** @internal */\nexport * from './plugins/column-chooser/computeds';\n/** @internal */\nexport * from './plugins/column-chooser/reducers';\n\n/** @internal */\nexport * from './plugins/tree-data-state/reducers';\n/** @internal */\nexport * from './plugins/custom-tree-data/computeds';\n/** @internal */\nexport * from './plugins/table-tree-column/helpers';\n\n/** @internal */\nexport * from './plugins/search-state/reducers';\n/** @internal */\nexport * from './plugins/search-state/computeds';\n\n/** @internal */\nexport * from './plugins/data-type-provider/computeds';\n\n/** @internal */\nexport * from './plugins/table-fixed-columns/constants';\n/** @internal */\nexport * from './plugins/table-fixed-columns/helpers';\n/** @internal */\nexport * from './plugins/table-fixed-columns/computeds';\n\n/** @internal */\nexport * from './plugins/integrated-summary/computeds';\n/** @internal */\nexport * from './plugins/table-summary-row/computeds';\n/** @internal */\nexport * from './plugins/table-summary-row/helpers';\n/** @internal */\nexport * from './plugins/table-summary-row/constants';\n\n/** @internal */\nexport { getColumnExtension, getColumnExtensionValueGetter } from './utils/column-extension';\n\n/** @internal */\nexport {\n  getTableColumnGeometries,\n  getTableTargetColumnIndex,\n  getAnimations,\n  filterActiveAnimations,\n  evalAnimations,\n} from './utils/table';\n\n/** @internal */\nexport { getGroupCellTargetIndex } from './utils/group-panel';\n\n/** @internal */\nexport {\n  getCollapsedGrid,\n  getCollapsedGrids,\n  getColumnBoundaries,\n  getRowsVisibleBoundary,\n  getColumnsRenderBoundary,\n  getRowsRenderBoundary,\n  getColumnWidthGetter,\n  TABLE_STUB_TYPE,\n} from './utils/virtual-table';\n\n/** @internal */\nexport * from './plugins/virtual-table/computeds';\n/** @internal */\nexport * from './plugins/virtual-table/helpers';\n\n/** @internal */\nexport * from './plugins/virtual-table-state/computeds';\n/** @internal */\nexport * from './plugins/virtual-table-state/utils';\n/** @internal */\nexport * from './plugins/virtual-table-state/helpers';\n\nexport * from './types';\n"],"names":["tslib_1.__spread"],"mappings":"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"}